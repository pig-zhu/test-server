import{k as Pi,ap as Oi,x as Wl,n as Ds,_ as Vi,o as de,r as E,c as M,a_ as Zl,z as Le,E as Li,P as se,s as f,Q as V,a1 as qe,N as l,Y as ye,u as n,O as N,L as X,R as nt,X as ie,t as Te,q as I,M as Ee,a2 as pt,U as Re,a3 as Yt,aA as Bi,e as Ai,a as Js,aR as uo,S as w,l as ji,aY as Eo,b0 as Qi,b2 as Hi,A as me,C as Lt,F as Ae,a4 as Be,aM as He,ah as Ie,at as _t,bP as tt,bQ as Qt,f as fo,H as Lo,v as Et,aB as Ts,i as De,bR as Mi,bS as it,am as ts,a0 as ut,aD as Ka,bT as Vt,p as It,D as Xt,B as jt,bU as ft,bV as Ui,bW as et,G as Da,bX as cl,af as zi,ag as Ni,g as Tt,au as Fo,bY as Xa,a6 as Ki,bZ as Di,bk as Xi,b_ as At,ad as Gi,b$ as xs,az as Yi,c0 as el,c1 as Jl,al as Fs,c2 as qi,c3 as Wi,c4 as Zi,aw as Ji,ac as Ga,ak as ea,a7 as er,a8 as Ya,a9 as tr,c5 as qa,b1 as eo,bx as or,aV as ta,aW as oa,c6 as sr,aZ as lr,aK as Xo,c7 as ar,c8 as Dt,c9 as nr,ca as sa,cb as ir,b3 as Wa,cc as rr,aH as Je,bv as st,cd as St,b7 as cr,aN as ur,b5 as dr,bH as fr}from"./vue-vendor-BgjGt3mC.js";import{an as vr,k as $o,$ as Xs,a2 as la,al as pr,_ as ot,ao as Ue,ap as Me,aq as ct,a as Mt,ar as lt,f as oo,i as Os,j as Vs,F as os,O as ss,a5 as Ls,v as Za,r as mr,E as ge,as as dt,b as ls,e as ho,d as Ja,at as en,au as gr,av as hr,aj as ul,aw as yr,ax as tn,ay as kr,a7 as br,az as on,aA as sn,aB as ln,h as Cr,s as _r,c as wr,a8 as an,a4 as Ir,aC as Tr}from"./index-D7mwCrnB.js";import{E as nn}from"./el-card-zedNbdDm.js";import{g as xr,b as rn,c as cn,d as Fr,e as We,s as Sr,f as Er,h as $r,i as dl,p as Rr,j as Pr,k as Or,l as Vr,m as Lr,n as Br,o as Ar,q as jr,S as Qr,r as un,u as Hr,v as Mr,w as Ur}from"./novel-D3HUUZc0.js";import{a as zr}from"./axios-xsH4HHeE.js";import{E as fl}from"./el-color-picker-GWbJeV9b.js";import"./jszip-C7-yN4-L.js";import{S as Nr,E as Kr,T as Dr,y as Xr,l as Gr,a as Yr,d as dn}from"./quill-BeGMbSWh.js";import{o as qo,q as tl,r as aa,u as yo,v as qr,w as fn,x as na,y as vn,z as pn,A as mn,B as Gs,C as ia,D as vl}from"./lodash-BmZg10rb.js";import{v as gn}from"./el-loading-B11eFGmQ.js";import{E as Wr}from"./el-drawer-hvleCpc-.js";/* empty css                          */import{E as Zr}from"./el-pagination-C-0ZFUJb.js";import{E as hn}from"./index-BZMJx0qS.js";import"./remark-CBsncvHK.js";import"./position-CrPvG4RE.js";const yn=["primary","success","info","warning","error"],Jr=Pi({customClass:{type:String,default:""},dangerouslyUseHTMLString:Boolean,duration:{type:Number,default:4500},icon:{type:Wl},id:{type:String,default:""},message:{type:Ds([String,Object,Function]),default:""},offset:{type:Number,default:0},onClick:{type:Ds(Function),default:()=>{}},onClose:{type:Ds(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...yn,""],default:""},zIndex:Number,closeIcon:{type:Wl,default:Oi}}),ec={destroy:()=>!0},tc=de({name:"ElNotification"}),oc=de({...tc,props:Jr,emits:ec,setup(e,{expose:o}){const t=e,{ns:s,zIndex:a}=vr("notification"),{nextZIndex:c,currentZIndex:i}=a,u=E(!1);let p;const y=M(()=>{const C=t.type;return C&&Zl[t.type]?s.m(C):""}),_=M(()=>t.type&&Zl[t.type]||t.icon),v=M(()=>t.position.endsWith("right")?"right":"left"),$=M(()=>t.position.startsWith("top")?"top":"bottom"),S=M(()=>{var C;return{[$.value]:`${t.offset}px`,zIndex:(C=t.zIndex)!=null?C:i.value}});function m(){t.duration>0&&({stop:p}=Bi(()=>{u.value&&T()},t.duration))}function r(){p==null||p()}function T(){u.value=!1}function b({code:C}){C===Xs.delete||C===Xs.backspace?r():C===Xs.esc?u.value&&T():m()}return Le(()=>{m(),c(),u.value=!0}),Li(document,"keydown",b),o({visible:u,close:T}),(C,d)=>(f(),se(Yt,{name:n(s).b("fade"),onBeforeLeave:C.onClose,onAfterLeave:k=>C.$emit("destroy"),persisted:""},{default:V(()=>[qe(l("div",{id:C.id,class:N([n(s).b(),C.customClass,n(v)]),style:ye(n(S)),role:"alert",onMouseenter:r,onMouseleave:m,onClick:C.onClick},[n(_)?(f(),se(n($o),{key:0,class:N([n(s).e("icon"),n(y)])},{default:V(()=>[(f(),se(nt(n(_))))]),_:1},8,["class"])):X("v-if",!0),l("div",{class:N(n(s).e("group"))},[l("h2",{class:N(n(s).e("title")),textContent:ie(C.title)},null,10,["textContent"]),qe(l("div",{class:N(n(s).e("content")),style:ye(C.title?void 0:{margin:0})},[Te(C.$slots,"default",{},()=>[C.dangerouslyUseHTMLString?(f(),I(Ee,{key:1},[X(" Caution here, message could've been compromised, never use user's input as message "),l("p",{innerHTML:C.message},null,8,["innerHTML"])],2112)):(f(),I("p",{key:0},ie(C.message),1))])],6),[[pt,C.message]]),C.showClose?(f(),se(n($o),{key:0,class:N(n(s).e("closeBtn")),onClick:Re(T,["stop"])},{default:V(()=>[(f(),se(nt(C.closeIcon)))]),_:1},8,["class","onClick"])):X("v-if",!0)],2)],46,["id","onClick"]),[[pt,u.value]])]),_:3},8,["name","onBeforeLeave","onAfterLeave"]))}});var sc=Vi(oc,[["__file","notification.vue"]]);const Ss={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},ol=16;let lc=1;const Ro=function(e={},o){if(!Ai)return{close:()=>{}};(Js(e)||uo(e))&&(e={message:e});const t=e.position||"top-right";let s=e.offset||0;Ss[t].forEach(({vm:_})=>{var v;s+=(((v=_.el)==null?void 0:v.offsetHeight)||0)+ol}),s+=ol;const a=`notification_${lc++}`,c=e.onClose,i={...e,offset:s,id:a,onClose:()=>{ac(a,t,c)}};let u=document.body;la(e.appendTo)?u=e.appendTo:Js(e.appendTo)&&(u=document.querySelector(e.appendTo)),la(u)||(u=document.body);const p=document.createElement("div"),y=w(sc,i,ji(i.message)?i.message:uo(i.message)?()=>i.message:null);return y.appContext=pr(o)?Ro._context:o,y.props.onDestroy=()=>{Eo(null,p)},Eo(y,p),Ss[t].push({vm:y}),u.appendChild(p.firstElementChild),{close:()=>{y.component.exposed.visible.value=!1}}};yn.forEach(e=>{Ro[e]=(o={},t)=>((Js(o)||uo(o))&&(o={message:o}),Ro({...o,type:e},t))});function ac(e,o,t){const s=Ss[o],a=s.findIndex(({vm:y})=>{var _;return((_=y.component)==null?void 0:_.props.id)===e});if(a===-1)return;const{vm:c}=s[a];if(!c)return;t==null||t(c);const i=c.el.offsetHeight,u=o.split("-")[0];s.splice(a,1);const p=s.length;if(!(p<1))for(let y=a;y<p;y++){const{el:_,component:v}=s[y].vm,$=Number.parseInt(_.style[u],10)-i-ol;v.props.offset=$}}function nc(){for(const e of Object.values(Ss))e.forEach(({vm:o})=>{o.component.exposed.visible.value=!1})}Ro.closeAll=nc;Ro._context=null;const ra=Qi(Ro,"$notify"),ic=E([{label:"任务列表",value:"historyTask"},{label:"模拟阅读",value:"createTask"},{label:"解压视频",value:"createVideo"},{label:"小说库",value:"novel"},{label:"视频库",value:"video-category",children:[{label:"解压视频库",value:"video"},{label:"首帧库",value:"firstFrames"},{label:"尾帧库",value:"lastFrames"},{label:"带文字视频库",value:"textVideo"}]},{label:"图片库",value:"image-category",children:[{label:"背景图库",value:"background"},{label:"贴图库",value:"stickers"},{label:"带文字图片库",value:"textImage"}]},{label:"音乐库",value:"music"}]);E([{label:"任务列表",value:"historyTask"},{label:"模拟阅读",value:"createTask"},{label:"解压视频",value:"createVideo"},{label:"解压视频库",value:"video"},{label:"背景图库",value:"background"},{label:"小说库",value:"novel"},{label:"首帧库",value:"firstFrames"},{label:"尾帧库",value:"lastFrames"},{label:"贴图库",value:"stickers"},{label:"音乐库",value:"music"},{label:"带文字图片库",value:"textImage"},{label:"带文字视频库",value:"textVideo"}]);const rc=E([{label:"任务列表",value:"historyTask"},{label:"创建任务",value:"createShortPlayTask"},{label:"尾帧库",value:"shortPlayLastFrames"},{label:"贴图库",value:"shortPlayStickers"}]),so=Hi("novel",{state:()=>({taskGenerateParams:{},checkedData:{},isFromHistoryTask:!1}),getters:{},actions:{setTaskGenerateParams(e){this.taskGenerateParams=e},setCheckedData(e){this.checkedData=e},setIsFromHistoryTask(e){this.isFromHistoryTask=e}}}),cc={__name:"resizeArea",props:{left:{type:Number,default:0},right:{type:Number,default:1},top:{type:Number,default:0},bottom:{type:Number,default:1},resizable:{type:Boolean,default:!1}},emits:["resize","stopResize"],setup(e,{emit:o}){const t=E(null),s=o,a=e;let c=!1,i="",u=0,p=0,y=0,_=0,v=0,$=0;const S=()=>{const C=t.value.parentElement.getBoundingClientRect(),d=C.width*(a.right-a.left),k=C.height*(a.bottom-a.top),g=C.width*a.left,h=C.height*a.top;t.value.style.width=`${d}px`,t.value.style.height=`${k}px`,t.value.style.left=`${g}px`,t.value.style.top=`${h}px`};me(()=>[a.left,a.right,a.top,a.bottom],()=>{Ae(()=>{S()})},{immediate:!0});const m=(C,d)=>{a.resizable&&(c=!0,i=d,u=C.clientX,p=C.clientY,y=t.value.offsetWidth,_=t.value.offsetHeight,v=t.value.offsetLeft,$=t.value.offsetTop,document.addEventListener("mousemove",r),document.addEventListener("mouseup",T))},r=C=>{if(!c)return;const d=C.clientX-u,k=C.clientY-p,g=t.value.parentElement.getBoundingClientRect(),h=50,x=50;let R=y,j=_,F=v,B=$;i==="top-left"?(R=y-d,j=_-k,F=v+d,B=$+k,F<0&&(F=0,R=y+v),B<0&&(B=0,j=_+$),R<h&&(R=h,F=v+y-h),j<x&&(j=x,B=$+_-x)):i==="top-right"?(R=y+d,j=_-k,B=$+k,B<0&&(B=0,j=_+$),R<h&&(R=h),j<x&&(j=x,B=$+_-x),F+R>g.width&&(R=g.width-F)):i==="bottom-left"?(R=y-d,j=_+k,F=v+d,F<0&&(F=0,R=y+v),R<h&&(R=h,F=v+y-h),j<x&&(j=x),B+j>g.height&&(j=g.height-B)):i==="bottom-right"&&(R=y+d,j=_+k,R<h&&(R=h),j<x&&(j=x),F+R>g.width&&(R=g.width-F),B+j>g.height&&(j=g.height-B)),t.value.style.width=`${R}px`,t.value.style.height=`${j}px`,t.value.style.left=`${F}px`,t.value.style.top=`${B}px`;const Y=(F/g.width).toFixed(3),D=((F+R)/g.width).toFixed(3),Z=(B/g.height).toFixed(3),Q=((B+j)/g.height).toFixed(3);s("resize",{left:Y,right:D,top:Z,bottom:Q})},T=()=>{c=!1,s("stopResize"),document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",T)},b=()=>{S()};return Le(()=>{window.addEventListener("resize",b)}),Lt(()=>{document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",T),window.removeEventListener("resize",b)}),(C,d)=>(f(),I("div",{class:"resizeArea",ref_key:"resizeArea",ref:t},[Te(C.$slots,"default",{},void 0,!0),l("div",{class:N(["resize-handle top-left",{hidden:!e.resizable}]),onMousedown:d[0]||(d[0]=k=>m(k,"top-left"))},null,34),l("div",{class:N(["resize-handle top-right",{hidden:!e.resizable}]),onMousedown:d[1]||(d[1]=k=>m(k,"top-right"))},null,34),l("div",{class:N(["resize-handle bottom-left",{hidden:!e.resizable}]),onMousedown:d[2]||(d[2]=k=>m(k,"bottom-left"))},null,34),l("div",{class:N(["resize-handle bottom-right",{hidden:!e.resizable}]),onMousedown:d[3]||(d[3]=k=>m(k,"bottom-right"))},null,34)],512))}},uc=ot(cc,[["__scopeId","data-v-22353dc6"]]),dc={__name:"innerArea",props:{left:{type:Number,default:.05},right:{type:Number,default:.95},top:{type:Number,default:.05},bottom:{type:Number,default:.95},needMask:{type:Boolean,default:!1}},setup(e){const o=E(null),t=e;Le(()=>{Ae(()=>{s()})});const s=()=>{const c=o.value.parentElement.getBoundingClientRect(),i=c.width*(t.right-t.left),u=c.height*(t.bottom-t.top),p=c.width*t.left,y=c.height*t.top;o.value.style.width=`${i}px`,o.value.style.height=`${u}px`,o.value.style.left=`${p}px`,o.value.style.top=`${y}px`};me(()=>[t.left,t.right,t.top,t.bottom],()=>{s()});const a=()=>{s()};return Le(()=>{window.addEventListener("resize",a)}),Lt(()=>{window.removeEventListener("resize",a)}),(c,i)=>(f(),I("div",{class:N(["innerArea",{needMask:e.needMask}]),ref_key:"innerArea",ref:o},[Te(c.$slots,"default",{},void 0,!0)],2))}},ca=ot(dc,[["__scopeId","data-v-de1d3109"]]),fc={class:"right-side"},vc={class:"preview-container"},pc={class:"preview-frame preview-frame-first"},mc=["src"],gc={class:"switch-operate"},hc={class:"switch-container"},yc={class:"counter"},kc={class:"preview-frame preview-frame-main"},bc=["src"],Cc={key:1,class:"imagePreview"},_c=["src"],wc={class:"imagePreview"},Ic=["src"],Tc={class:"switch-operate"},xc={class:"switch-container"},Fc={class:"counter"},Sc={class:"preview-frame preview-frame-last"},Ec=["src"],$c=["src"],Rc={key:0,class:"switch-operate"},Pc={class:"switch-container"},Oc={class:"counter"},Vc={key:1,class:"switch-operate"},Lc={class:"switch-container"},Bc={class:"counter"},Ac={class:"create-button-right"},jc={__name:"PreviewSection",props:{formData:{type:Object,required:!0},checkedData:{type:Object,required:!0},fontFamilyOptions:{type:Array,required:!0},renderPreviewFirstFrameUrl:{type:String,required:!0},renderPreviewBackgroundUrl:{type:String,required:!0},renderPreviewLastFrameUrl:{type:String,required:!0},renderPreviewStickerUrl:{type:String,required:!0},renderPreviewTextImageUrl:{type:String,required:!0},renderPreviewTextVideoUrl:{type:String,required:!0},renderPreviewBackgroundPosition:{type:Object,required:!0},renderPreviewBackgroundNeedMask:{type:Boolean,default:!1},renderPreviewBackgroundTextFill:{type:Array,default:()=>[0,0,0,1]},currentFirstFrameIndex:{type:Number,required:!0},currentLastFrameIndex:{type:Number,required:!0},currentBackgroundIndex:{type:Number,required:!0},currentTextVideoIndex:{type:Number,required:!0},createVideoDisabled:{type:Boolean,default:!1},videoFontZoom:{type:Number,default:4},firstAndLastVideoZoom:{type:Number,default:6},count:{type:Number,default:1},groupCount:{type:Number,default:0}},emits:["switchToPrevious","switchToNext","stopResize","generateVideo"],setup(e,{emit:o}){const t=e,s=o,a="/api/",c=E(null),i=E(null),u=E(null),p=Be({left:.05,right:.95,top:.05,bottom:.95}),y=Be({top:0,bottom:1,left:0,right:1}),_=()=>{try{const k=document.querySelector(".resizeArea"),g=document.getElementById("novelContent");if(!g||!k||!g.scrollHeight)return 0;const h=k.offsetHeight,x=g.scrollHeight,F=(t.formData.scrollStart-.8)*h+x;return isNaN(F)||F<=0?x:F}catch(k){return console.error("计算滚动距离错误:",k),0}},v=()=>{Ae(()=>{const k=document.getElementById("novelContent");if(k)try{let g=k.style.animation;g&&g!=="none"&&(k.style.animation="none"),k.offsetWidth;const x=k.querySelectorAll("p");(()=>{x.forEach((ae,ue)=>{ae.style.textIndent=`${t.formData.firstLineIndent}em`,ue!==0&&ue!==x.length-1&&(ae.style.margin=`${Ue(t.formData.paragraphSpacing/t.videoFontZoom/2*Me())}rem 0`)}),k.style.fontSize=`${Ue(t.formData.novelFontSize/t.videoFontZoom)*Me()}rem`,k.style.lineHeight=t.formData.lineHeight,k.style.letterSpacing=`${Ue(t.formData.letterSpacing/t.videoFontZoom)*Me()}rem`})();const j=_();if(!j)return;let F=document.querySelector(".preview-styles");F||(F=document.createElement("div"),F.className="preview-styles",F.style.display="none",document.body.appendChild(F));let B=F.querySelector("style");const Y=`
        @keyframes slideUp {
          0% {
          transform: translateY(0);
          }

       100% {
          transform: translateY(-${j}px);
       }
        }
      `;if(!B||B.innerHTML!==Y){for(;F.firstChild;)F.removeChild(F.firstChild);B=document.createElement("style"),B.innerHTML=Y,F.appendChild(B)}const Z=t.formData.novelFontSize/t.videoFontZoom*Me()*t.formData.lineHeight,P=((ae,ue=.5,oe=5)=>{const H=oe-ue,re=(t.formData.scrollSpeed-1)/9;return(ue+re*H)*ae})(Z),O=`${j/P}s`,U=`${t.formData.scrollDelay}s`;k.style.animation=`slideUp ${O} linear ${U} infinite`}catch(g){console.error("设置动画错误:",g)}})},$=(k,g)=>{let h=null;return function(){h&&clearTimeout(h),h=setTimeout(()=>{k.apply(this,arguments)},g)}},S=$(v,300),m=()=>{var g;const k=document.getElementById("novelContent");k&&(t.checkedData.checkedNovel.length?(k.innerHTML='<p class="loading-content">加载小说内容中...</p>',zr.get(a+((g=t.checkedData.checkedNovel[0])==null?void 0:g.file_url)).then(h=>{const R=(h==null?void 0:h.data).replaceAll("color: rgb(51, 51, 51);","");k.innerHTML=R,Ae(()=>{S()})}).catch(h=>{k.innerHTML='<p class="error-content">小说加载失败</p>',console.error("小说获取失败",h)})):(k.innerHTML="",k.innerHTML='<p class="empty-content">请先选择小说来预览内容</p>'))};Le(()=>{[c,u].forEach(g=>{g.value.style.width=`${Ue(720/t.firstAndLastVideoZoom)*Me()}rem`,g.value.style.minWidth=`${Ue(720/t.firstAndLastVideoZoom)*Me()}rem`,g.value.style.height=`${Ue(1280/t.firstAndLastVideoZoom)*Me()}rem`}),i.value.style.width=`${Ue(720/t.videoFontZoom)*Me()}rem`,i.value.style.minWidth=`${Ue(720/t.videoFontZoom)*Me()}rem`,i.value.style.height=`${Ue(1280/t.videoFontZoom)*Me()}rem`,m(),window.addEventListener("resize",S)}),Lt(()=>{window.removeEventListener("resize",S)}),me(()=>t.checkedData.checkedNovel,k=>{if(k.length)m();else{const g=document.getElementById("novelContent");g&&(g.innerHTML="")}});const r=$(()=>{const k=document.getElementById("novelContent");k!=null&&k.offsetHeight&&t.checkedData.checkedNovel.length&&S()},100);me([()=>t.formData.scrollStart,()=>t.formData.scrollDelay,()=>t.formData.scrollSpeed],r,{flush:"post"}),me([()=>t.formData.fontFamily,()=>t.formData.novelFontSize,()=>t.formData.lineHeight,()=>t.formData.letterSpacing,()=>t.formData.paragraphSpacing,()=>t.formData.firstLineIndent,()=>t.formData.scrollStart,()=>t.formData.scrollDelay,()=>t.formData.scrollSpeed],()=>{const k=document.getElementById("novelContent");k!=null&&k.offsetHeight&&v()}),me(()=>t.renderPreviewBackgroundPosition,k=>{const g=k.bottom-k.top,h=k.right-k.left,x=parseFloat(k.left)+.05*h,R=parseFloat(k.right)-.05*h,j=parseFloat(k.top)+.05*g,F=parseFloat(k.bottom)-.05*g;Object.assign(p,{left:x,right:R,top:j,bottom:F});const B=parseFloat(k.left)-.05*h,Y=parseFloat(k.right)+.05*h,D=parseFloat(k.top)-.05*g,Z=parseFloat(k.bottom)+.05*g;Object.assign(y,{left:B,right:Y,top:D,bottom:Z})},{deep:!0,immediate:!0});const T=k=>{s("switchToPrevious",k)},b=k=>{s("switchToNext",k)},C=()=>{s("stopResize")},d=()=>{s("generateVideo")};return(k,g)=>{const h=Mt;return f(),I("div",fc,[l("div",vc,[l("div",pc,[g[8]||(g[8]=l("div",{class:"frame-title"},"首帧视频预览",-1)),l("div",{class:"frame-content",ref_key:"firstPreview",ref:c},[e.checkedData.checkedFirstFrames.length?(f(),I("img",{key:0,src:n(a)+e.renderPreviewFirstFrameUrl,alt:"",class:"videoPreview"},null,8,mc)):X("",!0),(f(!0),I(Ee,null,He(e.formData.firstFrameVideo,x=>{var R;return f(),I("div",{class:"firstFrameText",key:x.id,style:ye({color:x.fill,backgroundColor:x.background_color,fontSize:`${n(Ue)(x.font_size/t.firstAndLastVideoZoom)*n(Me)()}rem`,webkitTextStroke:`${n(Ue)(x.stroke_width/t.firstAndLastVideoZoom)*n(Me)()}rem ${x.stroke_fill}`,top:`${x.y*100}%`,fontFamily:`${(R=e.fontFamilyOptions.find(j=>j.id===x.font_id))==null?void 0:R.name.split(".").slice(0,-1).join(".")}`})},ie(x.text),5)}),128))],512),l("div",gc,[l("div",hc,[l("div",{onClick:g[0]||(g[0]=x=>T("firstFrame")),class:"previous-btn"}),l("div",yc,ie(`${e.currentFirstFrameIndex+1}/${e.checkedData.checkedFirstFrames.length}`),1),l("div",{onClick:g[1]||(g[1]=x=>b("firstFrame")),class:"next-btn"})])])]),l("div",kc,[g[9]||(g[9]=l("div",{class:"frame-title"},"正片预览",-1)),l("div",{class:"frame-content",ref_key:"mainPreview",ref:i},[w(uc,{onStopResize:C,left:e.renderPreviewBackgroundPosition.left,right:e.renderPreviewBackgroundPosition.right,top:e.renderPreviewBackgroundPosition.top,bottom:e.renderPreviewBackgroundPosition.bottom},null,8,["left","right","top","bottom"]),w(ca,{left:p.left,right:p.right,top:p.top,bottom:p.bottom},{default:V(()=>{var x;return[l("div",{class:"textPreview",id:"novelContent",style:ye({fontSize:`${n(Ue)(e.formData.novelFontSize/t.videoFontZoom)*n(Me)()}rem`,fontFamily:`${(x=e.fontFamilyOptions.find(R=>R.id===e.formData.fontFamily))==null?void 0:x.name.split(".").slice(0,-1).join(".")}`,lineHeight:e.formData.lineHeight,letterSpacing:`${n(Ue)(e.formData.letterSpacing/t.videoFontZoom)*n(Me)()}rem`,top:`${e.formData.scrollStart*100}%`,color:n(ct)(e.renderPreviewBackgroundTextFill||[0,0,0,1])})},null,4)]}),_:1},8,["left","right","top","bottom"]),e.renderPreviewBackgroundNeedMask?(f(),se(ca,{key:0,left:y.left,right:y.right,top:y.top,bottom:y.bottom,needMask:""},null,8,["left","right","top","bottom"])):X("",!0),(f(!0),I(Ee,null,He(e.checkedData.checkedBackgroundList,x=>(f(),I("div",{class:"imagePreview",key:x.id},[e.checkedData.checkedBackgroundList.length?(f(),I("img",{key:0,src:n(a)+e.renderPreviewBackgroundUrl,alt:"",class:"image"},null,8,bc)):X("",!0)]))),128)),e.checkedData.checkedStickers.length?(f(),I("div",Cc,[l("img",{src:n(a)+e.renderPreviewStickerUrl,class:"image"},null,8,_c)])):X("",!0),l("div",wc,[e.checkedData.checkedTextImages.length?(f(),I("img",{key:0,src:n(a)+e.renderPreviewTextImageUrl,class:"image"},null,8,Ic)):X("",!0)])],512),l("div",Tc,[l("div",xc,[l("div",{onClick:g[2]||(g[2]=x=>T("background")),class:"previous-btn"}),l("div",Fc,ie(`${e.currentBackgroundIndex+1}/${e.checkedData.checkedBackgroundList.length}`),1),l("div",{onClick:g[3]||(g[3]=x=>b("background")),class:"next-btn"})])])]),l("div",Sc,[g[10]||(g[10]=l("div",{class:"frame-title"},"尾帧视频预览",-1)),l("div",{class:"frame-content",ref_key:"lastPreview",ref:u},[e.checkedData.checkedLastFrames.length?(f(),I("img",{key:0,src:n(a)+e.renderPreviewLastFrameUrl,alt:"",class:"videoPreview"},null,8,Ec)):X("",!0),e.checkedData.checkedTextVideos.length?(f(),I("img",{key:1,src:n(a)+e.renderPreviewTextVideoUrl,class:"videoPreview"},null,8,$c)):X("",!0)],512),e.checkedData.checkedTextVideos.length?X("",!0):(f(),I("div",Rc,[l("div",Pc,[l("div",{onClick:g[4]||(g[4]=x=>T("lastFrame")),class:"previous-btn"}),l("div",Oc,ie(`${e.currentLastFrameIndex+1}/${e.checkedData.checkedLastFrames.length}`),1),l("div",{onClick:g[5]||(g[5]=x=>b("lastFrame")),class:"next-btn"})])])),e.checkedData.checkedTextVideos.length?(f(),I("div",Vc,[l("div",Lc,[l("div",{onClick:g[6]||(g[6]=x=>T("textVideo")),class:"previous-btn"}),l("div",Bc,ie(`${e.currentTextVideoIndex+1}/${e.checkedData.checkedTextVideos.length}`),1),l("div",{onClick:g[7]||(g[7]=x=>b("textVideo")),class:"next-btn"})])])):X("",!0)])]),l("div",Ac,[w(h,{type:"primary",onClick:d,loading:e.createVideoDisabled},{default:V(()=>[Ie(ie(`创建任务 （共${e.groupCount===0?e.count:e.count*e.groupCount}条）`),1)]),_:1},8,["loading"])])])}}},Qc=ot(jc,[["__scopeId","data-v-01228cb2"]]),Hc={class:"right-side"},Mc={class:"preview-container"},Uc={class:"preview-frame preview-frame-first"},zc={class:"preview-frame preview-frame-main"},Nc={key:0,class:"imagePreview"},Kc=["src"],Dc={key:1,class:"imagePreview"},Xc=["src"],Gc={class:"switch-operate"},Yc={class:"switch-container"},qc={class:"counter"},Wc={class:"preview-frame preview-frame-last"},Zc=["src"],Jc={class:"create-button-right"},eu={__name:"ShortPlayPreviewSection",props:{formData:{type:Object,required:!0},checkedData:{type:Object,required:!0},fontFamilyOptions:{type:Array,required:!0},renderPreviewShortPlayLastFrameUrl:{type:String,required:!0},renderPreviewShortPlayStickerUrl:{type:String,required:!0},createVideoDisabled:{type:Boolean,default:!1},videoFontZoom:{type:Number,default:4},firstAndLastVideoZoom:{type:Number,default:6},count:{type:Number,default:1},selectedVideoNameInfo:{type:Object,default:()=>({})},currentShortPlayStickerIndex:{type:Number,required:!0},renderPreviewShortPlayUrl:{type:String,required:!0}},emits:["switchToPrevious","switchToNext","stopResize","generateVideo"],setup(e,{emit:o}){const t=e,s=o,a="/api/",c=E(null),i=E(null),u=E(null);Le(()=>{[c,u].forEach($=>{$.value.style.width=`${Ue(720/t.firstAndLastVideoZoom)*Me()}rem`,$.value.style.minWidth=`${Ue(720/t.firstAndLastVideoZoom)*Me()}rem`,$.value.style.height=`${Ue(1280/t.firstAndLastVideoZoom)*Me()}rem`}),i.value.style.width=`${Ue(720/t.videoFontZoom)*Me()}rem`,i.value.style.minWidth=`${Ue(720/t.videoFontZoom)*Me()}rem`,i.value.style.height=`${Ue(1280/t.videoFontZoom)*Me()}rem`}),me(()=>t.checkedData.checkedNovel,v=>{if(!v.length){const $=document.getElementById("novelContent");$&&($.innerHTML="")}});const p=v=>{s("switchToPrevious",v)},y=v=>{s("switchToNext",v)},_=()=>{s("generateVideo")};return(v,$)=>{var m;const S=Mt;return f(),I("div",Hc,[l("div",Mc,[qe(l("div",Uc,[$[2]||($[2]=l("div",{class:"frame-title"},"首帧视频预览",-1)),l("div",{class:"frame-content",ref_key:"firstPreview",ref:c},null,512)],512),[[pt,!1]]),l("div",zc,[$[3]||($[3]=l("div",{class:"frame-title"},"正片预览",-1)),l("div",{class:"frame-content",ref_key:"mainPreview",ref:i},[l("div",{class:"firstFrameText",style:ye({color:e.selectedVideoNameInfo.fill,backgroundColor:e.selectedVideoNameInfo.background_color,fontSize:`${n(Ue)(e.selectedVideoNameInfo.font_size/t.firstAndLastVideoZoom)*n(Me)()}rem`,webkitTextStroke:`${n(Ue)(e.selectedVideoNameInfo.stroke_width/t.firstAndLastVideoZoom)*n(Me)()}rem ${e.selectedVideoNameInfo.stroke_fill}`,top:`${e.selectedVideoNameInfo.y*100}%`,fontFamily:`${(m=e.fontFamilyOptions.find(r=>r.id===e.selectedVideoNameInfo.font_id))==null?void 0:m.name.split(".").slice(0,-1).join(".")}`})},ie(e.selectedVideoNameInfo.text),5),e.checkedData.checkedShortPlay.length?(f(),I("div",Nc,[l("img",{src:n(a)+e.renderPreviewShortPlayUrl,class:"image"},null,8,Kc)])):X("",!0),e.checkedData.checkedShortPlayStickers.length?(f(),I("div",Dc,[l("img",{src:n(a)+e.renderPreviewShortPlayStickerUrl,class:"image"},null,8,Xc)])):X("",!0)],512),l("div",Gc,[l("div",Yc,[l("div",{onClick:$[0]||($[0]=r=>p("shortPlayStickers")),class:"previous-btn"}),l("div",qc,ie(`${e.currentShortPlayStickerIndex+1}/${e.checkedData.checkedShortPlayStickers.length}`),1),l("div",{onClick:$[1]||($[1]=r=>y("shortPlayStickers")),class:"next-btn"})])])]),l("div",Wc,[$[4]||($[4]=l("div",{class:"frame-title"},"尾帧视频预览",-1)),l("div",{class:"frame-content",ref_key:"lastPreview",ref:u},[e.checkedData.checkedShortPlayLastFrames.length?(f(),I("img",{key:0,src:n(a)+e.renderPreviewShortPlayLastFrameUrl,alt:"",class:"videoPreview"},null,8,Zc)):X("",!0)],512)])]),l("div",Jc,[w(S,{type:"primary",onClick:_,loading:e.createVideoDisabled},{default:V(()=>[Ie(ie(`创建任务 （共${e.count}条）`),1)]),_:1},8,["loading"])])])}}},tu=ot(eu,[["__scopeId","data-v-39a59970"]]),ou={class:"first-frame-settings"},su={class:"titles-container-wrapper"},lu={class:"titles-scroll-area"},au={class:"title-input-wrapper"},nu=["onClick"],iu={class:"title-tools"},ru={class:"style-panel"},cu={class:"style-section"},uu={class:"style-section"},du={class:"flex-row"},fu={class:"flex-col flex-1"},vu={class:"flex-col flex-1 ml-2"},pu={class:"style-section"},mu={class:"color-pickers"},gu={class:"color-picker-item"},hu={class:"color-picker-item"},yu={class:"color-picker-item"},ku={class:"style-section"},bu={class:"flex-row"},Cu={class:"flex-col flex-1"},_u={class:"style-section"},wu={class:"apply-global-options"},Iu={class:"apply-options"},Tu={key:0,class:"add-title-row"},xu={__name:"FirstFrameSettings",props:{formData:Object,checkedData:Object,fontFamilyOptions:Array,source:{type:String,default:"novel"}},emits:["update:formData","update:selectedVideoNameInfo"],setup(e,{emit:o}){const t=e,s=o,a=E(void 0),c=Be({...t.formData}),i=Be({font:!1,fontSize:!1,stroke:!1,colors:!1,position:!1}),u=M(()=>i.font||i.fontSize||i.stroke||i.colors||i.position),p=()=>{s("update:formData",c)},y=C=>{if(p(),t.source===lt.SHORT_PLAY){const d=c.firstFrameVideo.findIndex(k=>k===C);b(C,d)}},_=C=>{p()},v=C=>{p()},$=(C,d,k)=>{C[d]=k,p()},S=C=>{p()},m=(C,d)=>{c.firstFrameVideo.forEach((k,g)=>{g!==d&&(i.font&&(k.font_id=C.font_id),i.fontSize&&(k.font_size=C.font_size),i.stroke&&(k.stroke_width=C.stroke_width,k.stroke_fill=C.stroke_fill),i.colors&&(k.fill=C.fill,k.background_color=C.background_color,k.firstFrameColorMode=C.firstFrameColorMode),i.position&&(k.y=C.y))}),Object.keys(i).forEach(k=>{i[k]=!1}),p()};me(()=>t.formData,C=>{Object.assign(c,C)},{deep:!0});const r=()=>{var d;const C={key:Date.now(),text:"",font_id:t.fontFamilyOptions.length&&(((d=t.fontFamilyOptions.find(k=>k.name.split(".").slice(0,-1).join(".")==="方正黑体简体"))==null?void 0:d.id)||t.fontFamilyOptions[0].id),font_size:35,stroke_width:2,firstFrameColorMode:!1,fill:"rgba(255, 255, 255, 1)",background_color:"rgba(255, 255, 0, 1)",stroke_fill:"rgba(0, 0, 0, 1)",y:t.source===lt.NOVEL?.2:.8};if(c.firstFrameVideo.push(C),p(),t.source===lt.SHORT_PLAY){const k=c.firstFrameVideo.length-1;b(C,k)}},T=C=>{const d=c.firstFrameVideo.indexOf(C);d!==-1&&(d===a.value&&t.source===lt.SHORT_PLAY?(a.value=void 0,s("update:selectedVideoNameInfo",{})):a.value!==void 0&&d<a.value&&t.source===lt.SHORT_PLAY&&a.value--,c.firstFrameVideo.splice(d,1),p())},b=(C,d)=>{a.value=d,s("update:selectedVideoNameInfo",C)};return(C,d)=>{const k=oo,g=Vs,h=Os,x=os,R=fl,j=ss,F=Ls,B=Mt,Y=Za;return f(),I("div",ou,[l("div",su,[l("div",lu,[(f(!0),I(Ee,null,He(c.firstFrameVideo,(D,Z)=>(f(),I("div",{key:D.key,class:"title-row"},[l("div",au,[e.source===n(lt).SHORT_PLAY?(f(),I("span",{key:0,class:N(["preview-btn",{active:a.value===Z}]),onClick:Q=>b(D,Z)},"预览",10,nu)):X("",!0),w(k,{modelValue:D.text,"onUpdate:modelValue":Q=>D.text=Q,placeholder:"请输入标题",onInput:Q=>y(D),class:"title-input"},null,8,["modelValue","onUpdate:modelValue","onInput"])]),l("div",iu,[w(Y,{placement:"bottom",width:"320",trigger:"click","popper-class":"custom-popover"},{reference:V(()=>d[4]||(d[4]=[l("div",{class:"tool-btn",title:"标题样式"},[l("svg",{class:"icon-svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[l("path",{d:"M12 20h9"}),l("path",{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"})])],-1)])),default:V(()=>[l("div",ru,[l("div",cu,[d[5]||(d[5]=l("div",{class:"style-section-header"},[l("svg",{class:"icon-svg section-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[l("text",{x:"5",y:"19",style:{"font-size":"17px","font-weight":"400"}},"A")]),l("span",null,"字体")],-1)),w(h,{modelValue:D.font_id,"onUpdate:modelValue":Q=>D.font_id=Q,placeholder:"选择字体",style:{width:"100%"},onChange:p,filterable:"",size:"small",teleported:!1},{default:V(()=>[(f(!0),I(Ee,null,He(e.fontFamilyOptions,Q=>(f(),se(g,{key:Q.id,label:Q.name,value:Q.id},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),l("div",uu,[l("div",du,[l("div",fu,[d[6]||(d[6]=l("div",{class:"style-section-header"},[l("svg",{class:"icon-svg section-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[l("text",{x:"7",y:"17",style:{"font-size":"14px","font-weight":"400"}},"T")]),l("span",null,"字号")],-1)),w(x,{modelValue:D.font_size,"onUpdate:modelValue":Q=>D.font_size=Q,min:1,max:100,onChange:p,onInput:Q=>_(D),style:{width:"100%"},size:"small"},null,8,["modelValue","onUpdate:modelValue","onInput"])]),l("div",vu,[d[7]||(d[7]=l("div",{class:"style-section-header"},[l("svg",{class:"icon-svg section-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[l("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),l("path",{d:"M15 3h6v6"}),l("path",{d:"M10 14L21 3"})]),l("span",null,"描边宽度")],-1)),w(x,{modelValue:D.stroke_width,"onUpdate:modelValue":Q=>D.stroke_width=Q,min:1,max:20,step:1,onInput:Q=>v(D),onChange:p,style:{width:"100%"},size:"small"},null,8,["modelValue","onUpdate:modelValue","onInput"])])])]),l("div",pu,[d[11]||(d[11]=l("div",{class:"style-section-header"},[l("svg",{class:"icon-svg section-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[l("circle",{cx:"12",cy:"12",r:"10"}),l("path",{d:"M8 12a4 4 0 0 1 8 0"})]),l("span",null,"颜色")],-1)),l("div",mu,[l("div",gu,[d[8]||(d[8]=l("span",null,"字体色",-1)),w(R,{modelValue:D.fill,"onUpdate:modelValue":Q=>D.fill=Q,"show-alpha":"",onActiveChange:Q=>$(D,"fill",Q),onChange:p,size:"small",teleported:!1},null,8,["modelValue","onUpdate:modelValue","onActiveChange"])]),l("div",hu,[d[9]||(d[9]=l("span",null,"背景色",-1)),w(R,{modelValue:D.background_color,"onUpdate:modelValue":Q=>D.background_color=Q,"show-alpha":"",onActiveChange:Q=>$(D,"background_color",Q),onChange:p,size:"small",teleported:!1},null,8,["modelValue","onUpdate:modelValue","onActiveChange"])]),l("div",yu,[d[10]||(d[10]=l("span",null,"描边色",-1)),w(R,{modelValue:D.stroke_fill,"onUpdate:modelValue":Q=>D.stroke_fill=Q,"show-alpha":"",onActiveChange:Q=>$(D,"stroke_fill",Q),onChange:p,size:"small",teleported:!1},null,8,["modelValue","onUpdate:modelValue","onActiveChange"])])])]),l("div",ku,[l("div",bu,[l("div",Cu,[d[12]||(d[12]=l("div",{class:"style-section-header"},[l("svg",{class:"icon-svg section-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[l("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),l("polyline",{points:"19 12 12 19 5 12"})]),l("span",null,"顶部距离")],-1)),w(j,{modelValue:D.y,"onUpdate:modelValue":Q=>D.y=Q,min:0,max:1,step:.001,onInput:Q=>S(D),onChange:p,style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue","onInput"])])])]),l("div",_u,[d[14]||(d[14]=l("div",{class:"style-section-header"},[l("svg",{class:"icon-svg section-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[l("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),l("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"})]),l("span",null,"应用于全局")],-1)),l("div",wu,[l("div",Iu,[w(F,{modelValue:i.font,"onUpdate:modelValue":d[0]||(d[0]=Q=>i.font=Q),label:"字体",border:"",size:"small"},null,8,["modelValue"]),w(F,{modelValue:i.fontSize,"onUpdate:modelValue":d[1]||(d[1]=Q=>i.fontSize=Q),label:"字号",border:"",size:"small"},null,8,["modelValue"]),w(F,{modelValue:i.stroke,"onUpdate:modelValue":d[2]||(d[2]=Q=>i.stroke=Q),label:"描边",border:"",size:"small"},null,8,["modelValue"]),w(F,{modelValue:i.colors,"onUpdate:modelValue":d[3]||(d[3]=Q=>i.colors=Q),label:"颜色",border:"",size:"small"},null,8,["modelValue"])]),w(B,{onClick:Q=>m(D,Z),type:"primary",size:"small",class:"apply-btn",disabled:!u.value},{default:V(()=>d[13]||(d[13]=[Ie(" 应用选中项到所有标题 ")])),_:2,__:[13]},1032,["onClick","disabled"])])])])]),_:2},1024),w(B,{type:"text",onClick:Re(Q=>T(D),["prevent"]),class:"delete-btn",size:"small"},{default:V(()=>d[15]||(d[15]=[l("svg",{class:"icon-svg delete-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[l("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])),_:2,__:[15]},1032,["onClick"])])]))),128))]),(e.source===n(lt).NOVEL?c.firstFrameVideo.length<5:c.firstFrameVideo.length<e.formData.count)?(f(),I("div",Tu,[w(B,{type:"primary",onClick:Re(r,["prevent"]),class:"add-title-btn"},{default:V(()=>d[16]||(d[16]=[l("svg",{class:"icon-svg plus-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[l("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),l("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1),Ie(" 添加新标题 ")])),_:1,__:[16]})])):X("",!0)])])}}},ua=ot(xu,[["__scopeId","data-v-53cb6e90"]]);function Fu(e,o,t,s,a,c,i,u,p,y){const _=so(),v=E(""),$=E(""),S=E(""),m=E(""),r=E(""),T=E(""),b=E(""),C=E(""),d=E(""),k=E(""),g=E(""),h=E(""),x=E(""),R=E(""),j=E(""),F=E(""),B=E(""),Y=E(""),D=Be({left:0,right:1,top:0,bottom:1}),Z=E(!1),Q=E([255,255,255,1]);return{renderPreviewFirstFrameUrl:v,renderPreviewBackgroundUrl:$,renderPreviewLastFrameUrl:S,renderPreviewStickerUrl:m,renderPreviewTextImageUrl:r,renderPreviewTextVideoUrl:T,renderPreviewShortPlayUrl:b,renderPreviewShortPlayStickerUrl:C,renderPreviewShortPlayLastFrameUrl:d,initializeTaskData:()=>{var U,ae,ue,oe,H,re,G,L,ne,fe,A,K,J,ce,pe,ve,he,Pe,_e,W,Fe,$e,be,Ce,te;const{taskGenerateParams:O}=_;if(!(!Object.keys(O).length||O.category!=="ReadingSimu"&&O.category!=="ShortFilm"))if(O.category==="ReadingSimu"){e.taskName=O.name||"",e.fontFamily=O.novel.font_id,e.novelFontSize=O.novel.font_size,e.lineHeight=O.novel.line_height,e.paragraphSpacing=O.novel.paragraph_spacing,e.firstLineIndent=O.novel.first_line_indent,e.letterSpacing=O.novel.character_spacing,e.scrollStart=O.novel.scroll_start_position,e.scrollDelay=O.novel.scroll_delay,e.scrollSpeed=O.novel.scroll_speed,e.volume=((U=O.background_music)==null?void 0:U.volume)||.5,e.count=O.generate_count,e.groupCount=O.group_count||0,e.pre_video_volume=O.pre_video.volume||.5,o.checkedNovel=O.materials.filter(le=>le.category==="小说"),o.checkedFirstFrames=O.materials.filter(le=>le.category==="首帧视频"),o.checkedBackgroundList=O.materials.filter(le=>le.category==="背景图片");const q=O.materials.filter(le=>le.category==="背景音乐").map(le=>({id:le.id,is_public:le.is_public,name:le.name,file_id:le.file_id,file_url:le.file_url,duration:le.duration,tags:le.tags,create_time:le.create_time}));o.checkedMusic=q,e.groupCount===0&&(o.checkedStickers=O.materials.filter(le=>le.category==="贴片"),o.checkedLastFrames=O.materials.filter(le=>le.category==="尾帧视频"),o.checkedTextImages=O.materials.filter(le=>le.category==="模板图片"),o.checkedTextVideos=O.materials.filter(le=>le.category==="模板视频"),u.value=((ae=O.template_image)==null?void 0:ae.text)||"",p.value=((ue=O.template_video)==null?void 0:ue.text)||""),v.value=((oe=o.checkedFirstFrames[0])==null?void 0:oe.key_frame_url)||"",$.value=((H=o.checkedBackgroundList[0])==null?void 0:H.file_url)||"",S.value=((re=o.checkedLastFrames[0])==null?void 0:re.key_frame_url)||"",m.value=((G=o.checkedStickers[0])==null?void 0:G.file_url)||"",r.value=((L=o.checkedTextImages[0])==null?void 0:L.file_url)||"",T.value=((ne=o.checkedTextVideos[0])==null?void 0:ne.key_frame_url)||"",k.value=((fe=o.checkedFirstFrames[0])==null?void 0:fe.id)||0,g.value=((A=o.checkedBackgroundList[0])==null?void 0:A.id)||0,h.value=((K=o.checkedLastFrames[0])==null?void 0:K.id)||0,x.value=((J=o.checkedStickers[0])==null?void 0:J.id)||0,R.value=((ce=o.checkedTextImages[0])==null?void 0:ce.id)||0,j.value=((pe=o.checkedTextVideos[0])==null?void 0:pe.id)||0,Object.assign(D,(ve=o.checkedBackgroundList[0])==null?void 0:ve.border),Z.value=(he=o.checkedBackgroundList[0])==null?void 0:he.need_mask,Q.value=(Pe=o.checkedBackgroundList[0])==null?void 0:Pe.text_fill,e.firstFrameVideo=O.pre_video_titles.map(le=>({font_id:le.font_id,text:le.text,font_size:le.font_size,stroke_width:le.stroke_width,fill:ct(le.fill),background_color:ct(le.background_color),stroke_fill:ct(le.stroke_fill),y:le.y,firstFrameColorMode:le.title_color_random})),e.musicStartPosition=(_e=O.background_music)==null?void 0:_e.start_position;const z={};O.materials.forEach(le=>{z[le.id]=le}),e.groupCount>0?(i.groupStickers=O.material_group.map(le=>{if(le.sticker_id===void 0||le.sticker_id===null)return[];{const Ve=z[le.sticker_id];return Ve?[Ve]:[]}}),i.groupLastFrames=O.material_group.map(le=>{if(le.post_video_id===void 0||le.post_video_id===null)return[];{const Ve=z[le.post_video_id];return Ve?[Ve]:[]}}),i.groupTextImages=O.material_group.map(le=>{if(le.template_image_id===void 0||le.template_image_id===null)return[];{const Ve=z[le.template_image_id];return Ve?[Ve]:[]}}),i.groupTextVideos=O.material_group.map(le=>{if(le.template_video_id===void 0||le.template_video_id===null)return[];{const Ve=z[le.template_video_id];return Ve?[Ve]:[]}}),i.groupTextImageTexts=O.material_group.map(le=>le.template_image_text||""),i.groupTextVideoTexts=O.material_group.map(le=>le.template_video_text||""),i.groupNames=O.material_group.map((le,Ve)=>le.group_name||`组合 ${Ve+1}`),o.checkedStickers=[],o.checkedLastFrames=[],o.checkedTextImages=[],o.checkedTextVideos=[],u.value="",p.value=""):(i.groupStickers=[],i.groupLastFrames=[],i.groupTextImages=[],i.groupTextVideos=[],i.groupTextImageTexts=[],i.groupTextVideoTexts=[],i.groupNames=[]),o.checkedFirstFrames.length&&(t.value=0),o.checkedBackgroundList.length&&(a.value=0),o.checkedLastFrames.length&&(s.value=0),o.checkedTextVideos.length&&(c.value=0)}else O.category==="ShortFilm"&&(e.taskName=O.name||"",e.count=O.generate_count,o.checkedShortPlay=O.materials.filter(ee=>ee.category==="短剧视频"),o.checkedShortPlayStickers=O.materials.filter(ee=>ee.category==="短剧贴图"),o.checkedShortPlayLastFrames=O.materials.filter(ee=>ee.category==="短剧尾帧"),e.firstFrameVideo=O.main_titles.map(ee=>({font_id:ee.font_id,text:ee.text,font_size:ee.font_size,stroke_width:ee.stroke_width,fill:ct(ee.fill),background_color:ct(ee.background_color),stroke_fill:ct(ee.stroke_fill),y:ee.y,firstFrameColorMode:ee.title_color_random})),b.value=((W=o.checkedShortPlay[0])==null?void 0:W.key_frame_url)||"",C.value=((Fe=o.checkedShortPlayStickers[0])==null?void 0:Fe.file_url)||"",d.value=(($e=o.checkedShortPlayLastFrames[0])==null?void 0:$e.key_frame_url)||"",F.value=((be=o.checkedShortPlay[0])==null?void 0:be.id)||0,B.value=((Ce=o.checkedShortPlayStickers[0])==null?void 0:Ce.id)||0,Y.value=((te=o.checkedShortPlayLastFrames[0])==null?void 0:te.id)||0,o.checkedShortPlayStickers.length&&(y.value=0))},renderPreviewBackgroundPosition:D,renderPreviewBackgroundNeedMask:Z,renderPreviewBackgroundTextFill:Q,renderPreviewFirstFrameId:k,renderPreviewBackgroundId:g,renderPreviewLastFrameId:h,renderPreviewStickerId:x,renderPreviewTextImageId:R,renderPreviewTextVideoId:j,renderPreviewShortPlayId:F,renderPreviewShortPlayStickerId:B,renderPreviewShortPlayLastFrameId:Y}}const Su=async e=>mr({url:"/short_film/task/create",method:"post",data:e});function Eu(e,o,t,s,a,c,i,u,p,y,_,v,$,S,m,r){const T=E(!1),b=M(()=>m===lt.NOVEL);let C=null;const d=Z=>{C=Z},k=(Z,Q,P)=>{o.checkedBackgroundList.length?P():P(new Error("请选择背景图"))},g=Be({taskName:[{required:!0,message:"任务名称必填",trigger:"blur"}],fontFamily:[{required:!0,message:"请选择字体",trigger:"change"}],novelFontSize:[{required:!0,trigger:"change"}],lineHeight:[{required:!0,trigger:"change"}],letterSpacing:[{required:!0,trigger:"change"}],paragraphSpacing:[{required:!0,trigger:"change"}],firstLineIndent:[{required:!0,trigger:"change"}],count:[{required:!0,trigger:"change"}],background:[{validator:k,trigger:"change"}]}),h=M(()=>e.groupCount===2||e.groupCount===3),x=async Z=>{if(!Z)return;const Q=Y();if(Q.length>0){ge.error(Q.join("、"));return}if(b.value)await Z.validate(async(P,O)=>{var U,ae;if(P){T.value=!0;const ue=e.volume;localStorage.setItem("readFormDataMusicVolume",JSON.stringify(ue));const oe=G=>{var L,ne;return[...((L=G==null?void 0:G.shared)==null?void 0:L.map(fe=>parseInt(fe.value)))||[],...((ne=G==null?void 0:G.personal)==null?void 0:ne.map(fe=>parseInt(fe.value)))||[]]};let H=[];h.value&&(H=Array.from({length:e.groupCount},(G,L)=>{var fe,A,K,J,ce,pe,ve,he,Pe;const ne=((fe=a.groupNames)==null?void 0:fe[L])||`组合 ${L+1}`;return{sticker_id:((K=(A=a.groupStickers[L])==null?void 0:A[0])==null?void 0:K.id)||void 0,post_video_id:((ce=(J=a.groupLastFrames[L])==null?void 0:J[0])==null?void 0:ce.id)||void 0,template_image_id:((ve=(pe=a.groupTextImages[L])==null?void 0:pe[0])==null?void 0:ve.id)||void 0,template_image_text:a.groupTextImageTexts[L]||"",template_video_id:((Pe=(he=a.groupTextVideos[L])==null?void 0:he[0])==null?void 0:Pe.id)||void 0,template_video_text:a.groupTextVideoTexts[L]||"",group_name:ne}}));const re={name:e.taskName,novel:{text_id:(U=o.checkedNovel[0])==null?void 0:U.id,audio_file_id:(ae=o.checkedNovel[0])==null?void 0:ae.audio_id,font_id:e.fontFamily,font_size:e.novelFontSize,line_height:e.lineHeight,character_spacing:e.letterSpacing,paragraph_spacing:e.paragraphSpacing,first_line_indent:e.firstLineIndent,scroll_start_position:e.scrollStart,scroll_delay:e.scrollDelay,scroll_speed:e.scrollSpeed},generate_count:e.count,group_count:e.groupCount,background_image:{id_list:o.checkedBackgroundList.map(G=>G.id),tag_id_list:c.background?[]:oe(t.backgroundTag),start_date:s.background.start_date||"",end_date:s.background.end_date||""},background_music:{id_list:o.checkedMusic.map(G=>G.id),start_position:e.musicStartPosition,volume:e.volume,tag_id_list:c.music?[]:oe(t.musicTag),start_date:s.music.start_date||"",end_date:s.music.end_date||""},sticker:{id_list:h.value?[]:o.checkedStickers.map(G=>G.id),tag_id_list:h.value?[]:c.stickers?[]:oe(t.stickersTags),start_date:h.value?"":s.stickers.start_date||"",end_date:h.value?"":s.stickers.end_date||""},pre_video:{id_list:o.checkedFirstFrames.map(G=>G.id),tag_id_list:c.firstFrames?[]:oe(t.firstFramesTags),start_date:s.firstFrames.start_date||"",end_date:s.firstFrames.end_date||"",volume:e.pre_video_volume},pre_video_titles:o.checkedFirstFrames.length?e.firstFrameVideo.map(G=>({text:G.text||"",font_id:G.font_id,font_size:G.font_size,stroke_width:G.stroke_width,fill:dt(G.fill),background_color:dt(G.background_color),stroke_fill:dt(G.stroke_fill),y:G.y,title_color_random:G.firstFrameColorMode})):[],post_video:{id_list:h.value?[]:o.checkedLastFrames.map(G=>G.id),tag_id_list:h.value?[]:c.lastFrames?[]:oe(t.lastFrameTag),start_date:h.value?"":s.lastFrames.start_date||"",end_date:h.value?"":s.lastFrames.end_date||""},material_group:H,template_image:{id_list:h.value?[]:o.checkedTextImages.map(G=>G.id),tag_id_list:h.value?[]:c.textImage?[]:oe(t.textImageTags),text:i.value,start_date:h.value?"":s.textImage.start_date||"",end_date:h.value?"":s.textImage.end_date||""},template_video:{id_list:h.value?[]:o.checkedTextVideos.map(G=>G.id),tag_id_list:h.value?[]:c.textVideo?[]:oe(t.textVideoTags),text:u.value,start_date:h.value?"":s.textVideo.start_date||"",end_date:h.value?"":s.textVideo.end_date||""}};try{const G=await xr(re);if(G.code===0)ge.success("已加入任务列表"),Z.resetFields(),D(),T.value=!1,p.emit("jumpToHistoryTask"),p.emit("refreshHistoryList");else throw G.code===10020?ge.error(G.message):ge.error("视频生成失败，请重试"),T.value=!1,new Error(G.message)}catch{ge.error("视频生成失败，请重试"),T.value=!1}}else ge.error("表单信息不完整")});else{T.value=!0;const P={name:e.taskName,generate_count:e.count,main_titles:e.firstFrameVideo.map(O=>({text:O.text||"",font_id:O.font_id,font_size:O.font_size,fill:dt(O.fill),stroke_fill:dt(O.stroke_fill),stroke_width:O.stroke_width,background_color:dt(O.background_color),y:O.y})),main_video_id:o.checkedShortPlay.map(O=>O.id)[0],sticker_ids:o.checkedShortPlayStickers.map(O=>O.id),post_video_id:o.checkedShortPlayLastFrames.map(O=>O.id)[0]};try{const O=await Su(P);O.code===0?(ge.success("已加入任务列表"),Z.resetFields(),D(),T.value=!1,p.emit("jumpToHistoryTask"),p.emit("refreshHistoryList")):(O.code===10020?ge.error(O.message):ge.error("视频生成失败，请重试"),T.value=!1)}catch{ge.error("视频生成失败，请重试"),T.value=!1}}},R=Z=>a.groupStickers[Z-1]||[],j=Z=>a.groupLastFrames[Z-1]||[],F=Z=>a.groupTextImages[Z-1]||[],B=Z=>a.groupTextVideos[Z-1]||[],Y=()=>{const Z=[];if(e.taskName.trim()||Z.push("请输入任务名称"),!o.checkedNovel.length&&b.value&&Z.push("请选择小说"),!o.checkedBackgroundList.length&&b.value&&Z.push("请选择背景图"),b.value||(o.checkedShortPlay.length||Z.push("请选择短剧素材"),o.checkedShortPlayLastFrames.length||Z.push("请选择尾帧"),o.checkedShortPlayStickers.length||Z.push("请选择贴图"),e.firstFrameVideo.length||Z.push("请添加标题")),e.groupCount>1)for(let Q=1;Q<=e.groupCount;Q++){const P=R(Q),O=F(Q),U=j(Q),ae=B(Q),ue=P.length>0||O.length>0,oe=U.length>0||ae.length>0;e.groupCount===2&&(ue||Z.push(`组合${Q}请选择贴图`),oe||Z.push(`组合${Q}请选择尾帧`)),e.groupCount===3&&(ue||Z.push(`组合${Q}请选择贴图`),oe||Z.push(`组合${Q}请选择尾帧`))}return Z},D=()=>{var Q;p.emit("resetNovelAllChecked"),Object.assign(e,{taskName:"",fontFamily:((Q=y.value.find(P=>P.name.split(".").slice(0,-1).join(".")==="方正黑体简体"))==null?void 0:Q.id)||y.value[0].id,novelFontSize:35,lineHeight:1.5,letterSpacing:0,paragraphSpacing:56,firstLineIndent:2,backgroundColor:"rgba(255, 255, 255, 0)",roundedCorners:!0,scrollStart:0,scrollDelay:0,scrollSpeed:2.5,volume:1,count:1,groupCount:0,firstFrameVideo:[],firstFrameKeepAudio:!0,selectedAudio:"",musicStartPosition:"首帧",pre_video_volume:1});for(const P in o)Object.prototype.hasOwnProperty.call(o,P)&&(o[P]=[]);for(const P in t)Object.prototype.hasOwnProperty.call(t,P)&&(t[P]={shared:[],personal:[]});for(const P in s)s[P].start_date="",s[P].end_date="";for(const P in _)_[P]=[];for(const P in v)v[P]="";for(const P in c)c[P]=!0;for(const P in a)a[P]=[];$(),S(),C&&C();const Z=document.getElementById("novelContent");Z&&(Z.innerHTML=""),r.value={}};return{rules:g,validateBackground:k,validateAllRequiredFields:Y,generateVideo:x,createVideoDisabled:T,isGroupModeActive:h,getGroupSelectedStickers:R,getGroupSelectedLastFrames:j,getGroupSelectedTextImages:F,getGroupSelectedTextVideos:B,resetAll:D,setLoadConfigFn:d}}function $u(e,o,t,s,a,c,i,u,p,y,_,v,$,S,m,r,T,b,C,d,k,g,h,x,R,j,F,B,Y,D,Z,Q,P,O,U,ae,ue,oe,H,re,G,L,ne){const fe=E(!1),A=E(!1),K={video:"解压视频",background:"背景图片",novel:"小说",firstFrames:"首帧视频",lastFrames:"尾帧视频",stickers:"贴图",music:"背景音乐",textImage:"模板图片",textVideo:"模板视频",shortPlayVideo:"短剧视频",shortPlayLastFrames:"短剧尾帧",shortPlayStickers:"短剧贴图"},J=be=>{const Ce=K[be]||null;return Ce==="贴图"?"贴片":Ce},ce={};for(const be in K){const Ce=K[be];ce[Ce]=be}const pe=be=>be==="贴片"?"stickers":ce[be]||null,ve=be=>{const Ce={firstFrames:"checkedFirstFrames",lastFrames:"checkedLastFrames",music:"checkedMusic",textImage:"checkedTextImages",textVideo:"checkedTextVideos",background:"checkedBackgroundList",stickers:"checkedStickers",shortPlayVideo:"checkedShortPlay",shortPlayLastFrames:"checkedShortPlayLastFrames",shortPlayStickers:"checkedShortPlayStickers"};if(u.value>0)return 1;let te;return be==="shortPlayVideo"||be==="shortPlayLastFrames"?te=1:te=e.count-o[Ce[be]].length,te},he=be=>{var q,z,le,Ve,we,je,mt,$t,Ut,bo,Co,ze,xe;let Ce,te;if(typeof be=="object"&&be!==null)Ce=be.type,te=be.groupIndex;else if(Ce=be,p.value&&(Ce==="stickers"||Ce==="lastFrames"||Ce==="textImage"||Ce==="textVideo")){ge.warning(`组合模式下，请在各个组合中上传${Ce==="stickers"||Ce==="textImage"?"贴图":"尾帧"}`);return}if(typeof te<"u"){const at=te-1;if(Ce==="stickers"||Ce==="textImage"){if((q=a.groupStickers[at])!=null&&q.length||(z=a.groupTextImages[at])!=null&&z.length){ge.warning(`组合${te}的贴图数量已达上限`);return}}else if((Ce==="lastFrames"||Ce==="textVideo")&&((le=a.groupLastFrames[at])!=null&&le.length||(Ve=a.groupTextVideos[at])!=null&&Ve.length)){ge.warning(`组合${te}的尾帧数量已达上限`);return}u.value=te}else{if({novel:o.checkedNovel.length,firstFrames:e.count===((we=o.checkedFirstFrames)==null?void 0:we.length),lastFrames:e.count===((je=o.checkedLastFrames)==null?void 0:je.length),music:e.count===((mt=o.checkedMusic)==null?void 0:mt.length),textImage:e.count===(($t=o.checkedTextImages)==null?void 0:$t.length),textVideo:e.count===((Ut=o.checkedTextVideos)==null?void 0:Ut.length),background:e.count===((bo=o.checkedBackgroundList)==null?void 0:bo.length),stickers:e.count===((Co=o.checkedStickers)==null?void 0:Co.length),shortPlayLastFrames:(ze=o.checkedShortPlayLastFrames)==null?void 0:ze.length,shortPlayStickers:e.count===((xe=o.checkedShortPlayStickers)==null?void 0:xe.length)}[Ce])return;u.value=0}i.value=Ce;let ee={type:Ce,title:""};if(Ce=="novel"){if(o.checkedNovel.length)return;ee.title="添加小说",_.value.init(ee,!0,[],J(Ce))}else ee.title=`添加${K[Ce]}`,y.value.init(ee,!0,J(Ce),ve(Ce),!1)},Pe=(be,Ce)=>{let te;te=Ce?be.data.list:[be.data];const ee={background:{dataKey:"checkedBackgroundList",indexRef:Q,urlRef:S,idRef:h,extraUpdate:z=>{Object.assign(re,z.border),G.value=z.need_mask,L.value=z.text_fill}},firstFrames:{dataKey:"checkedFirstFrames",indexRef:Z,urlRef:$,idRef:g},music:{dataKey:"checkedMusic"},lastFrames:{dataKey:"checkedLastFrames",indexRef:P,urlRef:m,idRef:x},stickers:{dataKey:"checkedStickers",indexRef:O,urlRef:r,idRef:R},novel:{dataKey:"checkedNovel"},textImage:{dataKey:"checkedTextImages",indexRef:U,urlRef:T,idRef:j},textVideo:{dataKey:"checkedTextVideos",indexRef:ae,urlRef:b,idRef:F},shortPlayVideo:{dataKey:"checkedShortPlay",indexRef:oe,urlRef:C,idRef:B},shortPlayStickers:{dataKey:"checkedShortPlayStickers",indexRef:ue,urlRef:d,idRef:Y},shortPlayLastFrames:{dataKey:"checkedShortPlayLastFrames",indexRef:H,urlRef:k,idRef:D}},q=pe(Ce);if(u.value>0){const z=u.value-1;q==="stickers"?(a.groupStickers[z]||(a.groupStickers[z]=[]),a.groupStickers[z]=[...a.groupStickers[z],...te]):q==="textImage"?(a.groupTextImages[z]||(a.groupTextImages[z]=[]),a.groupTextImages[z]=[...a.groupTextImages[z],...te],a.groupTextImageTexts[z]||(a.groupTextImageTexts[z]="")):q==="lastFrames"?(a.groupLastFrames[z]||(a.groupLastFrames[z]=[]),a.groupLastFrames[z]=[...a.groupLastFrames[z],...te]):q==="textVideo"&&(a.groupTextVideos[z]||(a.groupTextVideos[z]=[]),a.groupTextVideos[z]=[...a.groupTextVideos[z],...te],a.groupTextVideoTexts[z]||(a.groupTextVideoTexts[z]=""))}else{const z=ee[q||"novel"];if(z){if(z.dataKey==="checkedShortPlay"&&(o[z.dataKey]=[]),o[z.dataKey]=[...o[z.dataKey],...te],z.indexRef!==void 0){z.indexRef.value=o[z.dataKey].length-1;const le=o[z.dataKey][z.indexRef.value];z.urlRef&&z.idRef&&(z.urlRef.value=le.key_frame_url||le.file_url,z.idRef.value=le.id),z.extraUpdate&&z.extraUpdate(le)}else z.extraUpdate&&z.extraUpdate();if(["novel","background"].includes(i.value)){const le=z.dataKey==="checkedNovel"?"novel":"background";v.value.validateField(le)}}}},_e=async(be,Ce)=>{const{uploadType:te}=be;let ee=new FormData;be.fileData.length>=1&&be.fileData.forEach(le=>{ee.append("file",le)}),ee.append("category",te),ee.append("is_public",be.is_public),be.tags.length>=1&&be.tags.forEach(le=>{ee.append("tag_ids",le)}),fe.value=!0;const z=await cn(te==="短剧视频"||te==="短剧贴图"||te==="短剧尾帧",ee,Ce);if(z.code===0)Pe(z,te),y.value.init("",!1,J(i.value)),ge.success("新增成功!"),fe.value=!1,i.value="";else throw fe.value=!1,i.value="",new Error(z.message)},W=async be=>{fe.value=!0;try{const Ce=await rn(be);if(Ce.code===0)Pe(Ce),_.value.init("",!1,[],J(i.value)),ge.success("新增成功!"),fe.value=!1,i.value="";else throw ge.error("新增失败!"),fe.value=!1,i.value="",new Error(Ce.message)}catch(Ce){ge.error(Ce.message||"新增失败"),fe.value=!1,i.value=""}},Fe=M(()=>i.value==="stickers"||i.value==="textImage"||i.value==="lastFrames"||i.value==="textVideo"),$e=M(()=>p.value?!1:i.value==="stickers"||i.value==="textImage"?o.checkedStickers.length||o.checkedTextImages.length:i.value==="lastFrames"||i.value==="textVideo"?o.checkedLastFrames.length||o.checkedTextVideos.length:!1);return{uploadLoading:fe,isGroupSelection:A,uploadMaterial:he,handleSubmitFormRes:_e,handleSubmitNovelRes:W,propUploadTypeDisabled:$e,TypeToCategory:J,categoryToType:pe,addUploadCheckedList:Pe,propUploadTypeChange:Fe}}function Ru(e,o,t,s,a,c,i,u,p,y,_,v,$,S,m,r,T,b,C,d,k,g,h,x,R,j,F,B,Y,D,Z,Q,P,O,U,ae,ue,oe){const H=E(!1),re=E(""),G=E(""),L=E({}),ne=E(!1),fe=E(0),A=W=>{K(W)},K=(W,Fe=!1)=>{if(!Fe&&ae.value&&(W==="stickers"||W==="lastFrames"||W==="textImage"||W==="textVideo")){ge.warning(`组合模式下，请在各个组合中选择${W==="stickers"||W==="textImage"?"贴图":"尾帧"}`);return}if(G.value=W,W==="stickers"&&o.checkedTextImages.length||W==="textImage"&&o.checkedStickers.length||W==="lastFrames"&&o.checkedTextVideos.length||W==="textVideo"&&o.checkedLastFrames.length)return;const $e={novel:"选择小说",firstFrames:"选择首帧视频",background:"选择背景图",lastFrames:"选择尾帧",music:"选择背景音乐",stickers:"选择贴图",textImage:"选择搜索框",textVideo:"选择尾帧搜索框",shortPlayVideo:"选择短剧素材",shortPlayStickers:"选择短剧贴图",shortPlayLastFrames:"选择短剧尾帧"};re.value=$e[W]||"选择素材";const be={novel:t.novelTags,firstFrames:t.firstFramesTags,background:t.backgroundTag,music:t.musicTag,stickers:t.stickersTags,textImage:t.textImageTags,lastFrames:t.lastFrameTag,textVideo:t.textVideoTags,shortPlayVideo:t.textVideoTags,shortPlayStickers:t.shortPlayStickersTag,shortPlayLastFrames:t.shortPlayLastFrameTag};L.value=be[W]||{},H.value=!0},J=(W,Fe)=>{fe.value=Fe,G.value=W,H.value=!0,ne.value=!0};return{selectDialogVisible:H,dialogTitle:re,tabType:G,tagsObject:L,isGroupSelection:ne,currentGroupIndex:fe,handleMaterialSelect:A,selectMaterial:K,selectGroupMaterial:J,handleSelectGroupMaterial:({type:W,groupIndex:Fe})=>{J(W,Fe)},getCheckedListByType:W=>{var Fe;if(ne.value){const $e={stickers:"Stickers",lastFrames:"LastFrames",textImage:"TextImages",textVideo:"TextVideos"},be=fe.value-1;if((Fe=ue[`group${$e[W]}`])!=null&&Fe.length)return ue[`group${$e[W]}`][be]||[]}else return{novel:o.checkedNovel,firstFrames:o.checkedFirstFrames,background:o.checkedBackgroundList,music:o.checkedMusic,stickers:o.checkedStickers,textImage:o.checkedTextImages,lastFrames:o.checkedLastFrames,textVideo:o.checkedTextVideos,shortPlayVideo:o.checkedShortPlayVideo,shortPlayStickers:o.checkedShortPlayStickers,shortPlayLastFrames:o.checkedShortPlayLastFrames}[W]||[];return[]},getComponentListByType:W=>({novel:a.novelComponentList,firstFrames:a.firstFramesComponentList,background:a.backgroundComponentList,music:a.musicComponentList,stickers:a.stickersComponentList,textImage:a.textImagesComponentList,lastFrames:a.lastFramesComponentList,textVideo:a.textVideosComponentList,shortPlayVideo:a.shortPlayVideoComponentList,shortPlayStickers:a.shortPlayStickersComponentList,shortPlayLastFrames:a.shortPlayLastFramesComponentList})[W]||[],getActiveTabByType:W=>({novel:c.novelActiveTab,firstFrames:c.firstFramesActiveTab,background:c.backgroundActiveTab,music:c.musicActiveTab,stickers:c.stickersActiveTab,textImage:c.textImagesActiveTab,lastFrames:c.lastFramesActiveTab,textVideo:c.textVideosActiveTab,shortPlayVideo:c.shortPlayVideoActiveTab,shortPlayStickers:c.shortPlayStickersActiveTab,shortPlayLastFrames:c.shortPlayLastFramesActiveTab})[W]||"",transferCheckedList:(W,Fe,$e,be,Ce,te,ee,q,z)=>{if(H.value=!1,be&&(s[be].start_date=te,s[be].end_date=ee),ne.value){const we=fe.value-1;be==="stickers"?(ue.groupStickers[we]=W,ue.groupTextImages[we]=[]):be==="lastFrames"?(ue.groupLastFrames[we]=W,ue.groupTextVideos[we]=[]):be==="textImage"?(ue.groupTextImages[we]=W,ue.groupStickers[we]=[]):be==="textVideo"&&(ue.groupTextVideos[we]=W,ue.groupLastFrames[we]=[]),ne.value=!1;return}const Ve={novel:()=>{o.checkedNovel=W,t.novelTags=Fe,a.novelComponentList=Ce,c.novelActiveTab=$e,i.novel=z,oe.value&&oe.value.validateField("novel")},background:()=>{var we,je,mt,$t,Ut;o.checkedBackgroundList=W,Object.assign(P,(we=o.checkedBackgroundList[0])==null?void 0:we.border),O.value=(je=o.checkedBackgroundList[0])==null?void 0:je.need_mask,U.value=(mt=o.checkedBackgroundList[0])==null?void 0:mt.text_fill,y.value=($t=o.checkedBackgroundList[0])==null?void 0:$t.file_url,_.value=(Ut=o.checkedBackgroundList[0])==null?void 0:Ut.id,F.value=0,t.backgroundTag=Fe,a.backgroundComponentList=Ce,c.backgroundActiveTab=$e,i.background=z,oe.value&&oe.value.validateField("background")},firstFrames:()=>{var we,je;o.checkedFirstFrames=W,u.value=(we=o.checkedFirstFrames[0])==null?void 0:we.key_frame_url,p.value=(je=o.checkedFirstFrames[0])==null?void 0:je.id,j.value=0,t.firstFramesTags=Fe,a.firstFramesComponentList=Ce,c.firstFramesActiveTab=$e,i.firstFrames=z},lastFrames:()=>{var we,je;o.checkedTextVideos.splice(0,o.checkedTextVideos.length),t.textVideoTags={shared:[],personal:[]},a.textVideosComponentList=[],c.textVideosActiveTab="",b.value="",C.value="",Z.value=-1,o.checkedLastFrames=W,v.value=(we=o.checkedLastFrames[0])==null?void 0:we.key_frame_url,$.value=(je=o.checkedLastFrames[0])==null?void 0:je.id,B.value=0,t.lastFrameTag=Fe,a.lastFramesComponentList=Ce,c.lastFramesActiveTab=$e,i.lastFrames=z},stickers:()=>{var we,je;o.checkedTextImages.splice(0,o.checkedTextImages.length),t.textImageTags={shared:[],personal:[]},a.textImagesComponentList=[],c.textImagesActiveTab="",r.value="",T.value="",D.value=-1,o.checkedStickers=W,S.value=(we=o.checkedStickers[0])==null?void 0:we.file_url,m.value=(je=o.checkedStickers[0])==null?void 0:je.id,Y.value=0,t.stickersTags=Fe,a.stickersComponentList=Ce,c.stickersActiveTab=$e,i.stickers=z},music:()=>{e.selectedAudio="",o.checkedMusic=W,t.musicTag=Fe,a.musicComponentList=Ce,c.musicActiveTab=$e,i.music=z},textImage:()=>{var we,je;o.checkedStickers.splice(0,o.checkedStickers.length),t.stickersTags={shared:[],personal:[]},a.stickersComponentList=[],c.stickersActiveTab="",S.value="",m.value="",Y.value=-1,o.checkedTextImages=W,r.value=(we=o.checkedTextImages[0])==null?void 0:we.file_url,T.value=(je=o.checkedTextImages[0])==null?void 0:je.id,D.value=0,t.textImageTags=Fe,a.textImagesComponentList=Ce,c.textImagesActiveTab=$e,i.textImage=z},textVideo:()=>{var we,je;o.checkedLastFrames.splice(0,o.checkedLastFrames.length),t.lastFrameTag={shared:[],personal:[]},a.lastFramesComponentList=[],c.lastFramesActiveTab="",v.value="",$.value="",B.value=-1,o.checkedTextVideos=W,b.value=(we=o.checkedTextVideos[0])==null?void 0:we.key_frame_url,C.value=(je=o.checkedTextVideos[0])==null?void 0:je.id,Z.value=0,t.textVideoTags=Fe,a.textVideosComponentList=Ce,c.textVideosActiveTab=$e,i.textVideo=z},shortPlayVideo:()=>{var we,je;o.checkedShortPlayVideo=W,d.value=(we=o.checkedShortPlay[0])==null?void 0:we.file_url,k.value=(je=o.checkedShortPlay[0])==null?void 0:je.id,t.shortPlayTag=Fe,a.shortPlayComponentList=Ce,c.shortPlayActiveTab=$e,i.shortPlay=z},shortPlayStickers:()=>{var we,je;o.checkedShortPlayStickers=W,g.value=(we=o.checkedShortPlayStickers[0])==null?void 0:we.file_url,h.value=(je=o.checkedShortPlayStickers[0])==null?void 0:je.id,Q.value=0,t.shortPlayStickersTag=Fe,a.shortPlayStickersComponentList=Ce,c.shortPlayStickersActiveTab=$e,i.shortPlayStickers=z},shortPlayLastFrames:()=>{var we,je;o.checkedShortPlayLastFrames=W,x.value=(we=o.checkedShortPlayLastFrames[0])==null?void 0:we.key_frame_url,R.value=(je=o.checkedShortPlayLastFrames[0])==null?void 0:je.id,t.shortPlayLastFrameTag=Fe,a.shortPlayLastFramesComponentList=Ce,c.shortPlayLastFramesActiveTab=$e,i.shortPlayLastFrames=z}}[be];Ve&&Ve()},handleCloseDialog:()=>{H.value=!1,ne.value=!1}}}function Pu(e,o,t){return me(()=>e.checkedFirstFrames,s=>{s.length===0&&(o.currentFirstFrameIndex.value=-1)},{deep:!0}),me(()=>e.checkedLastFrames,s=>{s.length===0&&(o.currentLastFrameIndex.value=-1)},{deep:!0}),me(()=>e.checkedBackgroundList,s=>{s.length===0&&(o.currentBackgroundIndex.value=-1)},{deep:!0}),me(()=>e.checkedStickers,s=>{s.length===0&&(o.currentStickerIndex.value=-1)},{deep:!0}),me(()=>e.checkedTextImages,s=>{s.length===0&&(o.currentTextImageIndex.value=-1)},{deep:!0}),me(()=>e.checkedTextVideos,s=>{s.length===0&&(o.currentTextVideoIndex.value=-1)},{deep:!0}),me(()=>e.checkedNovel,s=>{if(s.length>0&&!t.mainSearchBoxText.value&&!t.endSearchBoxText.value){const a=s[0].name;t.mainSearchBoxText.value=a,t.endSearchBoxText.value=a}},{deep:!0,immediate:!0}),me(()=>e.checkedShortPlayStickers,s=>{s.length===0&&(o.currentShortPlayStickerIndex.value=-1)},{deep:!0}),{}}const kn=async e=>{var c;const{baseUrl:o,fontFamilyOptions:t,formData:s}=e,a=await Fr(!1,{category:"字体",is_public:!0,page:1,pagesize:200});if(a.code===0)return t.value=a.data.list,a.data.list.forEach(i=>{const u=`
          @font-face {
            font-family:'${i.name.split(".").slice(0,-1).join(".")}';
            src: url('${o}${i.file_url}') format('truetype');
          }
        `,p=document.createElement("style");p.type="text/css",p.innerHTML=u,document.head.appendChild(p)}),s&&t.value.length&&!s.fontFamily&&(s.fontFamily=((c=t.value.find(i=>i.name.split(".").slice(0,-1).join(".")==="方正黑体简体"))==null?void 0:c.id)||t.value[0].id),a.data.list;throw new Error(a.message)},Ou={class:"dialog-footer"},Vu={__name:"SaveMainContentSectionDialog",props:{dialogVisible:{type:Boolean,default:!1},formData:{type:Object,default:()=>({})}},emits:["update:dialogVisible","confirm","load"],setup(e,{emit:o}){const t=e,s=o,a=M({get:()=>t.dialogVisible,set:v=>s("update:dialogVisible",v)}),c=E(),i=Be({configName:""}),u={configName:[{required:!0,message:"请输入配置名称",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}]},p=()=>{var v;a.value=!1,(v=c.value)==null||v.resetFields()},y=()=>{var v;a.value=!1,(v=c.value)==null||v.resetFields()},_=()=>{var v;(v=c.value)==null||v.validate($=>{var S;if($){let m=JSON.parse(localStorage.getItem("mainTextConfigs")||"[]");const r=Date.now().toString(),T={id:r,configName:i.configName,fontFamily:t.formData.fontFamily,novelFontSize:t.formData.novelFontSize,lineHeight:t.formData.lineHeight,letterSpacing:t.formData.letterSpacing,paragraphSpacing:t.formData.paragraphSpacing,firstLineIndent:t.formData.firstLineIndent,scrollStart:t.formData.scrollStart,scrollDelay:t.formData.scrollDelay,scrollSpeed:t.formData.scrollSpeed};m.push(T),localStorage.setItem("mainTextConfigs",JSON.stringify(m)),s("confirm",{config:T,id:r}),(S=c.value)==null||S.resetFields(),a.value=!1}else return!1})};return(v,$)=>{const S=oo,m=ho,r=ls,T=Mt,b=Ja;return f(),se(b,{modelValue:a.value,"onUpdate:modelValue":$[2]||($[2]=C=>a.value=C),title:"保存正文配置",width:"400","before-close":p},{footer:V(()=>[l("div",Ou,[w(T,{onClick:y},{default:V(()=>$[3]||($[3]=[Ie("取消")])),_:1,__:[3]}),w(T,{type:"primary",onClick:_},{default:V(()=>$[4]||($[4]=[Ie("保存")])),_:1,__:[4]})])]),default:V(()=>[w(r,{model:i,"label-width":"auto",rules:u,ref_key:"formRef",ref:c,onSubmit:$[1]||($[1]=Re(()=>{},["prevent"]))},{default:V(()=>[w(m,{label:"配置名称",prop:"configName"},{default:V(()=>[w(S,{modelValue:i.configName,"onUpdate:modelValue":$[0]||($[0]=C=>i.configName=C),placeholder:"请输入配置名称",onKeyup:_t(_,["enter"])},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}},Lu=ot(Vu,[["__scopeId","data-v-fca0487b"]]),Bu={class:"main-collapse-icon"},Au={key:0},ju={key:1},Qu={class:"settings-container"},Hu={class:"config-actions"},Mu={class:"config-select-wrapper"},Uu={class:"setting-block"},zu={class:"form-group"},Nu={class:"form-row"},Ku={class:"form-column"},Du={class:"form-column"},Xu={class:"form-row"},Gu={class:"form-column"},Yu={class:"form-column"},qu={class:"form-group"},Wu={class:"setting-block"},Zu={class:"form-group"},Ju={class:"form-row"},ed={class:"form-column"},td={class:"form-column"},od={__name:"MainContentSection",props:{formData:{type:Object,required:!0},fontFamilyOptions:{type:Array,required:!0},firstLineIndentOptions:{type:Array,default:()=>[{value:0,label:"无"},{value:1,label:"一个字符"},{value:2,label:"两个字符"}]},scrollPositions:{type:Array,default:()=>[{label:"顶部",value:0},{label:"1/4",value:.25},{label:"中间",value:.5},{label:"3/4",value:.75},{label:"底部",value:1}]},showTextConfig:{type:Boolean,required:!0}},emits:["update:showTextConfig","update:formData"],setup(e,{expose:o,emit:t}){const s=so(),a=e,c=t,i=E(!1),u=E(!1),p=E(!1),y=E([]),_=E(""),v=()=>{c("update:showTextConfig",!a.showTextConfig)},$=()=>{i.value=!i.value},S=()=>{u.value=!u.value},m=g=>g.split(".").slice(0,-1).join("."),r=(g,h)=>{const x={...a.formData};x[g]=h,c("update:formData",x),k()},T=()=>{p.value=!0},b=g=>{C(),g&&g.id&&(_.value=g.id),ge.success("正文配置已保存")},C=()=>{try{const g=JSON.parse(localStorage.getItem("mainTextConfigs")||"[]");if(y.value=g,g.length>0){const h=g[g.length-1];_.value=h.id||h.configName,d()}}catch(g){console.error("加载配置失败",g),y.value=[]}},d=()=>{if(!_.value){const h=localStorage.getItem("mainTextConfigs");if(h){const x=JSON.parse(h);c("update:formData",{...a.formData,...x})}return}const g=y.value.find(h=>h.id===_.value);if(g){const h={...a.formData,fontFamily:g.fontFamily,novelFontSize:g.novelFontSize,lineHeight:g.lineHeight,letterSpacing:g.letterSpacing,paragraphSpacing:g.paragraphSpacing,firstLineIndent:g.firstLineIndent,scrollStart:g.scrollStart,scrollDelay:g.scrollDelay,scrollSpeed:g.scrollSpeed};c("update:formData",h)}else ge.warning("未找到所选配置")},k=()=>{_.value&&(_.value="")};return Le(()=>{C(),s.isFromHistoryTask&&(_.value=""),s.setIsFromHistoryTask(!1)}),Lt(()=>{We.off("jumpToNovelTask")}),o({loadSavedConfigs:C}),(g,h)=>{const x=Vs,R=Os,j=os;return f(),I(Ee,null,[l("div",{class:N(["main-section",{"main-section-active":e.showTextConfig}])},[l("div",{class:"main-header",onClick:v},[h[11]||(h[11]=l("h3",null,"正文",-1)),l("div",Bu,[e.showTextConfig?(f(),I("span",Au,"−")):(f(),I("span",ju,"+"))])]),l("div",{class:N(["main-content",{hidden:!e.showTextConfig}])},[l("div",Qu,[l("div",Hu,[l("button",{class:"config-action-btn",onClick:T},"保存配置"),l("div",Mu,[w(R,{modelValue:_.value,"onUpdate:modelValue":h[0]||(h[0]=F=>_.value=F),placeholder:"请选择配置",onChange:d,style:{width:"150px",height:"32px"}},{default:V(()=>[(f(!0),I(Ee,null,He(y.value,F=>(f(),se(x,{key:F.id||F.configName,label:F.configName,value:F.id||F.configName},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),l("div",Uu,[l("div",{class:"setting-header",onClick:$},[h[12]||(h[12]=l("div",{class:"setting-title"},"文字样式",-1)),l("div",{class:N(["setting-collapse-icon",{collapsed:!i.value}])},"▼",2)]),l("div",{class:N(["setting-content",{hidden:!i.value}])},[l("div",zu,[h[13]||(h[13]=l("label",null,"字体",-1)),w(R,{"model-value":e.formData.fontFamily,"onUpdate:modelValue":h[1]||(h[1]=F=>r("fontFamily",F)),placeholder:"选择字体",filterable:"",class:"full-width-select"},{default:V(()=>[(f(!0),I(Ee,null,He(e.fontFamilyOptions,F=>(f(),se(x,{key:F.id,label:m(F.name),value:F.id},null,8,["label","value"]))),128))]),_:1},8,["model-value"])]),l("div",Nu,[l("div",Ku,[h[14]||(h[14]=l("label",null,"字号",-1)),w(j,{"model-value":e.formData.novelFontSize,"onUpdate:modelValue":h[2]||(h[2]=F=>r("novelFontSize",F)),min:1,max:100,label:"字号"},null,8,["model-value"])]),l("div",Du,[h[15]||(h[15]=l("label",null,"行高",-1)),w(j,{"model-value":e.formData.lineHeight,"onUpdate:modelValue":h[3]||(h[3]=F=>r("lineHeight",F)),min:1,max:3,step:"0.1",label:"行高"},null,8,["model-value"])])]),l("div",Xu,[l("div",Gu,[h[16]||(h[16]=l("label",null,"字符间距",-1)),w(j,{"model-value":e.formData.letterSpacing,"onUpdate:modelValue":h[4]||(h[4]=F=>r("letterSpacing",F)),min:-10,max:10,step:"1",label:"字符间距"},null,8,["model-value"])]),l("div",Yu,[h[17]||(h[17]=l("label",null,"段落间距",-1)),w(j,{"model-value":e.formData.paragraphSpacing,"onUpdate:modelValue":h[5]||(h[5]=F=>r("paragraphSpacing",F)),min:0,max:100,label:"段落间距"},null,8,["model-value"])])]),l("div",qu,[h[18]||(h[18]=l("label",null,"首行缩进",-1)),w(R,{"model-value":e.formData.firstLineIndent,"onUpdate:modelValue":h[6]||(h[6]=F=>r("firstLineIndent",F)),placeholder:"首行缩进",class:"full-width-select"},{default:V(()=>[(f(!0),I(Ee,null,He(e.firstLineIndentOptions,F=>(f(),se(x,{key:F.value,label:F.label,value:F.value},null,8,["label","value"]))),128))]),_:1},8,["model-value"])])],2)]),l("div",Wu,[l("div",{class:"setting-header",onClick:S},[h[19]||(h[19]=l("div",{class:"setting-title"},"滚动设置",-1)),l("div",{class:N(["setting-collapse-icon",{collapsed:!u.value}])},"▼",2)]),l("div",{class:N(["setting-content",{hidden:!u.value}])},[l("div",Zu,[h[20]||(h[20]=l("label",null,"开始位置",-1)),w(R,{"model-value":e.formData.scrollStart,"onUpdate:modelValue":h[7]||(h[7]=F=>r("scrollStart",F)),placeholder:"请选择开始位置",class:"full-width-select"},{default:V(()=>[(f(!0),I(Ee,null,He(e.scrollPositions,F=>(f(),se(x,{key:F.value,label:F.label,value:F.value},null,8,["label","value"]))),128))]),_:1},8,["model-value"])]),l("div",Ju,[l("div",ed,[h[21]||(h[21]=l("label",null,"延迟",-1)),w(j,{"model-value":e.formData.scrollDelay,"onUpdate:modelValue":h[8]||(h[8]=F=>r("scrollDelay",F)),min:0,max:5,step:"0.5",placeholder:"请选择延迟"},null,8,["model-value"])]),l("div",td,[h[22]||(h[22]=l("label",null,"速度",-1)),w(j,{"model-value":e.formData.scrollSpeed,"onUpdate:modelValue":h[9]||(h[9]=F=>r("scrollSpeed",F)),min:1,max:10,placeholder:"请选择速度",step:.1},null,8,["model-value"])])])],2)])])],2)],2),w(Lu,{dialogVisible:p.value,"onUpdate:dialogVisible":h[10]||(h[10]=F=>p.value=F),formData:e.formData,onConfirm:b},null,8,["dialogVisible","formData"])],64)}}},sd=ot(od,[["__scopeId","data-v-65784bdd"]]),bn=Symbol(),Go="el",ld="is-",no=(e,o,t,s,a)=>{let c=`${e}-${o}`;return t&&(c+=`-${t}`),s&&(c+=`__${s}`),a&&(c+=`--${a}`),c},Cn=Symbol("namespaceContextKey"),pl=e=>{const o=e||(Tt()?De(Cn,E(Go)):E(Go));return M(()=>n(o)||Go)},Ge=(e,o)=>{const t=pl(o);return{namespace:t,b:(r="")=>no(t.value,e,r,"",""),e:r=>r?no(t.value,e,"",r,""):"",m:r=>r?no(t.value,e,"","",r):"",be:(r,T)=>r&&T?no(t.value,e,r,T,""):"",em:(r,T)=>r&&T?no(t.value,e,"",r,T):"",bm:(r,T)=>r&&T?no(t.value,e,r,"",T):"",bem:(r,T,b)=>r&&T&&b?no(t.value,e,r,T,b):"",is:(r,...T)=>{const b=T.length>=1?T[0]:!0;return r&&b?`${ld}${r}`:""},cssVar:r=>{const T={};for(const b in r)r[b]&&(T[`--${t.value}-${b}`]=r[b]);return T},cssVarName:r=>`--${t.value}-${r}`,cssVarBlock:r=>{const T={};for(const b in r)r[b]&&(T[`--${t.value}-${e}-${b}`]=r[b]);return T},cssVarBlockName:r=>`--${t.value}-${e}-${r}`}},Wo=e=>e===void 0,Ht=e=>typeof e=="boolean",vt=e=>typeof e=="number",Ot=e=>typeof Element>"u"?!1:e instanceof Element,sl=e=>yo(e),ad=e=>it(e)?!Number.isNaN(Number(e)):!1;class nd extends Error{constructor(o){super(o),this.name="ElementPlusError"}}function as(e,o){throw new nd(`[${e}] ${o}`)}const da={current:0},fa=E(0),_n=2e3,va=Symbol("elZIndexContextKey"),wn=Symbol("zIndexContextKey"),Bs=e=>{const o=Tt()?De(va,da):da,t=e||(Tt()?De(wn,void 0):void 0),s=M(()=>{const i=n(t);return vt(i)?i:_n}),a=M(()=>s.value+fa.value),c=()=>(o.current++,fa.value=o.current,a.value);return!et&&De(va),{initialZIndex:s,currentZIndex:a,nextZIndex:c}};var id={name:"en",el:{breadcrumb:{label:"Breadcrumb"},colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color.",alphaLabel:"pick alpha value"},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},mention:{loading:"Loading"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",page:"Page",prev:"Go to previous page",next:"Go to next page",currentPage:"page {pager}",prevPages:"Previous {pager} pages",nextPages:"Next {pager} pages",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tour:{next:"Next",previous:"Previous",finish:"Finish"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"},carousel:{leftArrow:"Carousel arrow left",rightArrow:"Carousel arrow right",indicator:"Carousel switch to index {index}"}}};const rd=e=>(o,t)=>cd(o,t,n(e)),cd=(e,o,t)=>fn(t,e,e).replace(/\{(\w+)\}/g,(s,a)=>{var c;return`${(c=o==null?void 0:o[a])!=null?c:`{${a}}`}`}),ud=e=>{const o=M(()=>n(e).name),t=fo(e)?e:E(e);return{lang:o,locale:t,t:rd(e)}},In=Symbol("localeContextKey"),ns=e=>{const o=e||De(In,E());return ud(M(()=>o.value||id))},Tn="__epPropKey",ke=e=>e,dd=e=>Qt(e)&&!!e[Tn],As=(e,o)=>{if(!Qt(e)||dd(e))return e;const{values:t,required:s,default:a,type:c,validator:i}=e,p={type:c,required:!!s,validator:t||i?y=>{let _=!1,v=[];if(t&&(v=Array.from(t),xs(e,"default")&&v.push(a),_||(_=v.includes(y))),i&&(_||(_=i(y))),!_&&v.length>0){const $=[...new Set(v)].map(S=>JSON.stringify(S)).join(", ");Zi(`Invalid prop: validation failed${o?` for prop "${o}"`:""}. Expected one of [${$}], got value ${JSON.stringify(y)}.`)}return _}:void 0,[Tn]:!0};return xs(e,"default")&&(p.default=a),p},Ke=e=>qo(Object.entries(e).map(([o,t])=>[o,As(t,o)])),is=["","default","small","large"],rs=As({type:String,values:is,required:!1}),xn=Symbol("size"),fd=()=>{const e=De(xn,{});return M(()=>n(e.size)||"")},vd=Symbol("emptyValuesContextKey"),pd=Ke({emptyValues:Array,valueOnClear:{type:[String,Number,Boolean,Function],default:void 0,validator:e=>ft(e)?!e():!e}}),ll=e=>Object.keys(e),md=e=>Object.entries(e),Ys=(e,o,t)=>({get value(){return fn(e,o,t)},set value(s){qr(e,o,s)}}),Es=E();function js(e,o=void 0){const t=Tt()?De(bn,Es):Es;return e?M(()=>{var s,a;return(a=(s=t.value)==null?void 0:s[e])!=null?a:o}):t}function ml(e,o){const t=js(),s=Ge(e,M(()=>{var u;return((u=t.value)==null?void 0:u.namespace)||Go})),a=ns(M(()=>{var u;return(u=t.value)==null?void 0:u.locale})),c=Bs(M(()=>{var u;return((u=t.value)==null?void 0:u.zIndex)||_n})),i=M(()=>{var u;return n(o)||((u=t.value)==null?void 0:u.size)||""});return gd(M(()=>n(t)||{})),{ns:s,locale:a,zIndex:c,size:i}}const gd=(e,o,t=!1)=>{var s;const a=!!Tt(),c=a?js():void 0,i=(s=void 0)!=null?s:a?It:void 0;if(!i)return;const u=M(()=>{const p=n(e);return c!=null&&c.value?hd(c.value,p):p});return i(bn,u),i(In,M(()=>u.value.locale)),i(Cn,M(()=>u.value.namespace)),i(wn,M(()=>u.value.zIndex)),i(xn,{size:M(()=>u.value.size||"")}),i(vd,M(()=>({emptyValues:u.value.emptyValues,valueOnClear:u.value.valueOnClear}))),(t||!Es.value)&&(Es.value=u.value),u},hd=(e,o)=>{const t=[...new Set([...ll(e),...ll(o)])],s={};for(const a of t)s[a]=o[a]!==void 0?o[a]:e[a];return s},Gt="update:modelValue",Zo="change",pa="input";var Ye=(e,o)=>{const t=e.__vccOpts||e;for(const[s,a]of o)t[s]=a;return t};const Fn=(e="")=>e.split(" ").filter(o=>!!o.trim()),ma=(e,o)=>{if(!e||!o)return!1;if(o.includes(" "))throw new Error("className should not contain space.");return e.classList.contains(o)},al=(e,o)=>{!e||!o.trim()||e.classList.add(...Fn(o))},Jo=(e,o)=>{!e||!o.trim()||e.classList.remove(...Fn(o))},io=(e,o)=>{var t;if(!et||!e||!o)return"";let s=qi(o);s==="float"&&(s="cssFloat");try{const a=e.style[s];if(a)return a;const c=(t=document.defaultView)==null?void 0:t.getComputedStyle(e,"");return c?c[s]:""}catch{return e.style[s]}};function to(e,o="px"){if(!e)return"";if(vt(e)||ad(e))return`${e}${o}`;if(it(e))return e}const yd=(e,o)=>{if(!et)return!1;const t={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(o)],s=io(e,t);return["scroll","auto","overlay"].some(a=>s.includes(a))},kd=(e,o)=>{if(!et)return;let t=e;for(;t;){if([window,document,document.documentElement].includes(t))return window;if(yd(t,o))return t;t=t.parentNode}return t};let ms;const bd=e=>{var o;if(!et)return 0;if(ms!==void 0)return ms;const t=document.createElement("div");t.className=`${e}-scrollbar__wrap`,t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const s=t.offsetWidth;t.style.overflow="scroll";const a=document.createElement("div");a.style.width="100%",t.appendChild(a);const c=a.offsetWidth;return(o=t.parentNode)==null||o.removeChild(t),ms=s-c,ms},yt=(e,o)=>{if(e.install=t=>{for(const s of[e,...Object.values(o??{})])t.component(s.name,s)},o)for(const[t,s]of Object.entries(o))e[t]=s;return e},Cd=(e,o)=>(e.install=t=>{e._context=t._context,t.config.globalProperties[o]=e},e),Qs=e=>(e.install=tt,e),_d=Ke({size:{type:ke([Number,String])},color:{type:String}}),wd=de({name:"ElIcon",inheritAttrs:!1}),Id=de({...wd,props:_d,setup(e){const o=e,t=Ge("icon"),s=M(()=>{const{size:a,color:c}=o;return!a&&!c?{}:{fontSize:Wo(a)?void 0:to(a),"--color":c}});return(a,c)=>(f(),I("i",Et({class:n(t).b(),style:n(s)},a.$attrs),[Te(a.$slots,"default")],16))}});var Td=Ye(Id,[["__file","icon.vue"]]);const Ne=yt(Td);/*! Element Plus Icons Vue v2.3.1 */var xd=de({name:"ArrowLeft",__name:"arrow-left",setup(e){return(o,t)=>(f(),I("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[l("path",{fill:"currentColor",d:"M609.408 149.376 277.76 489.6a32 32 0 0 0 0 44.672l331.648 340.352a29.12 29.12 0 0 0 41.728 0 30.592 30.592 0 0 0 0-42.752L339.264 511.936l311.872-319.872a30.592 30.592 0 0 0 0-42.688 29.12 29.12 0 0 0-41.728 0z"})]))}}),Fd=xd,Sd=de({name:"ArrowRight",__name:"arrow-right",setup(e){return(o,t)=>(f(),I("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[l("path",{fill:"currentColor",d:"M340.864 149.312a30.592 30.592 0 0 0 0 42.752L652.736 512 340.864 831.872a30.592 30.592 0 0 0 0 42.752 29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"})]))}}),Ed=Sd,$d=de({name:"Check",__name:"check",setup(e){return(o,t)=>(f(),I("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[l("path",{fill:"currentColor",d:"M406.656 706.944 195.84 496.256a32 32 0 1 0-45.248 45.248l256 256 512-512a32 32 0 0 0-45.248-45.248L406.592 706.944z"})]))}}),Sn=$d,Rd=de({name:"CircleCheck",__name:"circle-check",setup(e){return(o,t)=>(f(),I("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[l("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),l("path",{fill:"currentColor",d:"M745.344 361.344a32 32 0 0 1 45.312 45.312l-288 288a32 32 0 0 1-45.312 0l-160-160a32 32 0 1 1 45.312-45.312L480 626.752l265.344-265.408z"})]))}}),gl=Rd,Pd=de({name:"CircleCloseFilled",__name:"circle-close-filled",setup(e){return(o,t)=>(f(),I("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[l("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 393.664L407.936 353.6a38.4 38.4 0 1 0-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1 0 54.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1 0 54.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 1 0-54.336-54.336z"})]))}}),En=Pd,Od=de({name:"CircleClose",__name:"circle-close",setup(e){return(o,t)=>(f(),I("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[l("path",{fill:"currentColor",d:"m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248z"}),l("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"})]))}}),hl=Od,Vd=de({name:"Close",__name:"close",setup(e){return(o,t)=>(f(),I("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[l("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"})]))}}),ht=Vd,Ld=de({name:"Delete",__name:"delete",setup(e){return(o,t)=>(f(),I("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[l("path",{fill:"currentColor",d:"M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32zm448-64v-64H416v64zM224 896h576V256H224zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32m192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32"})]))}}),$n=Ld,Bd=de({name:"Document",__name:"document",setup(e){return(o,t)=>(f(),I("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[l("path",{fill:"currentColor",d:"M832 384H576V128H192v768h640zm-26.496-64L640 154.496V320zM160 64h480l256 256v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32m160 448h384v64H320zm0-192h160v64H320zm0 384h384v64H320z"})]))}}),Ad=Bd,jd=de({name:"FullScreen",__name:"full-screen",setup(e){return(o,t)=>(f(),I("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[l("path",{fill:"currentColor",d:"m160 96.064 192 .192a32 32 0 0 1 0 64l-192-.192V352a32 32 0 0 1-64 0V96h64zm0 831.872V928H96V672a32 32 0 1 1 64 0v191.936l192-.192a32 32 0 1 1 0 64zM864 96.064V96h64v256a32 32 0 1 1-64 0V160.064l-192 .192a32 32 0 1 1 0-64l192-.192zm0 831.872-192-.192a32 32 0 0 1 0-64l192 .192V672a32 32 0 1 1 64 0v256h-64z"})]))}}),Qd=jd,Hd=de({name:"Hide",__name:"hide",setup(e){return(o,t)=>(f(),I("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[l("path",{fill:"currentColor",d:"M876.8 156.8c0-9.6-3.2-16-9.6-22.4-6.4-6.4-12.8-9.6-22.4-9.6-9.6 0-16 3.2-22.4 9.6L736 220.8c-64-32-137.6-51.2-224-60.8-160 16-288 73.6-377.6 176C44.8 438.4 0 496 0 512s48 73.6 134.4 176c22.4 25.6 44.8 48 73.6 67.2l-86.4 89.6c-6.4 6.4-9.6 12.8-9.6 22.4 0 9.6 3.2 16 9.6 22.4 6.4 6.4 12.8 9.6 22.4 9.6 9.6 0 16-3.2 22.4-9.6l704-710.4c3.2-6.4 6.4-12.8 6.4-22.4Zm-646.4 528c-76.8-70.4-128-128-153.6-172.8 28.8-48 80-105.6 153.6-172.8C304 272 400 230.4 512 224c64 3.2 124.8 19.2 176 44.8l-54.4 54.4C598.4 300.8 560 288 512 288c-64 0-115.2 22.4-160 64s-64 96-64 160c0 48 12.8 89.6 35.2 124.8L256 707.2c-9.6-6.4-19.2-16-25.6-22.4Zm140.8-96c-12.8-22.4-19.2-48-19.2-76.8 0-44.8 16-83.2 48-112 32-28.8 67.2-48 112-48 28.8 0 54.4 6.4 73.6 19.2zM889.599 336c-12.8-16-28.8-28.8-41.6-41.6l-48 48c73.6 67.2 124.8 124.8 150.4 169.6-28.8 48-80 105.6-153.6 172.8-73.6 67.2-172.8 108.8-284.8 115.2-51.2-3.2-99.2-12.8-140.8-28.8l-48 48c57.6 22.4 118.4 38.4 188.8 44.8 160-16 288-73.6 377.6-176C979.199 585.6 1024 528 1024 512s-48.001-73.6-134.401-176Z"}),l("path",{fill:"currentColor",d:"M511.998 672c-12.8 0-25.6-3.2-38.4-6.4l-51.2 51.2c28.8 12.8 57.6 19.2 89.6 19.2 64 0 115.2-22.4 160-64 41.6-41.6 64-96 64-160 0-32-6.4-64-19.2-89.6l-51.2 51.2c3.2 12.8 6.4 25.6 6.4 38.4 0 44.8-16 83.2-48 112-32 28.8-67.2 48-112 48Z"})]))}}),Md=Hd,Ud=de({name:"InfoFilled",__name:"info-filled",setup(e){return(o,t)=>(f(),I("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[l("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896.064A448 448 0 0 1 512 64m67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344M590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.992 12.992 0 0 1-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 0 1 7.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"})]))}}),Rn=Ud,zd=de({name:"Loading",__name:"loading",setup(e){return(o,t)=>(f(),I("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[l("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32m0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32m448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32m-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32M195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0m-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"})]))}}),$s=zd,Nd=de({name:"Plus",__name:"plus",setup(e){return(o,t)=>(f(),I("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[l("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64z"})]))}}),ga=Nd,Kd=de({name:"RefreshLeft",__name:"refresh-left",setup(e){return(o,t)=>(f(),I("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[l("path",{fill:"currentColor",d:"M289.088 296.704h92.992a32 32 0 0 1 0 64H232.96a32 32 0 0 1-32-32V179.712a32 32 0 0 1 64 0v50.56a384 384 0 0 1 643.84 282.88 384 384 0 0 1-383.936 384 384 384 0 0 1-384-384h64a320 320 0 1 0 640 0 320 320 0 0 0-555.712-216.448z"})]))}}),Dd=Kd,Xd=de({name:"RefreshRight",__name:"refresh-right",setup(e){return(o,t)=>(f(),I("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[l("path",{fill:"currentColor",d:"M784.512 230.272v-50.56a32 32 0 1 1 64 0v149.056a32 32 0 0 1-32 32H667.52a32 32 0 1 1 0-64h92.992A320 320 0 1 0 524.8 833.152a320 320 0 0 0 320-320h64a384 384 0 0 1-384 384 384 384 0 0 1-384-384 384 384 0 0 1 643.712-282.88z"})]))}}),Gd=Xd,Yd=de({name:"ScaleToOriginal",__name:"scale-to-original",setup(e){return(o,t)=>(f(),I("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[l("path",{fill:"currentColor",d:"M813.176 180.706a60.235 60.235 0 0 1 60.236 60.235v481.883a60.235 60.235 0 0 1-60.236 60.235H210.824a60.235 60.235 0 0 1-60.236-60.235V240.94a60.235 60.235 0 0 1 60.236-60.235h602.352zm0-60.235H210.824A120.47 120.47 0 0 0 90.353 240.94v481.883a120.47 120.47 0 0 0 120.47 120.47h602.353a120.47 120.47 0 0 0 120.471-120.47V240.94a120.47 120.47 0 0 0-120.47-120.47zm-120.47 180.705a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 0 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118zm-361.412 0a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 1 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118M512 361.412a30.118 30.118 0 0 0-30.118 30.117v30.118a30.118 30.118 0 0 0 60.236 0V391.53A30.118 30.118 0 0 0 512 361.412M512 512a30.118 30.118 0 0 0-30.118 30.118v30.117a30.118 30.118 0 0 0 60.236 0v-30.117A30.118 30.118 0 0 0 512 512"})]))}}),qd=Yd,Wd=de({name:"Search",__name:"search",setup(e){return(o,t)=>(f(),I("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[l("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704"})]))}}),Zd=Wd,Jd=de({name:"SuccessFilled",__name:"success-filled",setup(e){return(o,t)=>(f(),I("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[l("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336z"})]))}}),Pn=Jd,ef=de({name:"View",__name:"view",setup(e){return(o,t)=>(f(),I("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[l("path",{fill:"currentColor",d:"M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352m0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288zm0 64a224 224 0 1 1 0 448 224 224 0 0 1 0-448m0 64a160.192 160.192 0 0 0-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160"})]))}}),tf=ef,of=de({name:"WarningFilled",__name:"warning-filled",setup(e){return(o,t)=>(f(),I("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[l("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 192a58.432 58.432 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.432 58.432 0 0 0 512 256m0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4"})]))}}),yl=of,sf=de({name:"ZoomIn",__name:"zoom-in",setup(e){return(o,t)=>(f(),I("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[l("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704m-32-384v-96a32 32 0 0 1 64 0v96h96a32 32 0 0 1 0 64h-96v96a32 32 0 0 1-64 0v-96h-96a32 32 0 0 1 0-64z"})]))}}),On=sf,lf=de({name:"ZoomOut",__name:"zoom-out",setup(e){return(o,t)=>(f(),I("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[l("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704M352 448h256a32 32 0 0 1 0 64H352a32 32 0 0 1 0-64"})]))}}),af=lf;const Po=ke([String,Object,Function]),nf={Close:ht},Vn={Close:ht,SuccessFilled:Pn,InfoFilled:Rn,WarningFilled:yl,CircleCloseFilled:En},Rs={success:Pn,warning:yl,error:En,info:Rn},rf={validating:$s,success:gl,error:hl},cf=()=>et&&/firefox/i.test(window.navigator.userAgent);let kt;const uf={height:"0",visibility:"hidden",overflow:cf()?"":"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},df=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function ff(e){const o=window.getComputedStyle(e),t=o.getPropertyValue("box-sizing"),s=Number.parseFloat(o.getPropertyValue("padding-bottom"))+Number.parseFloat(o.getPropertyValue("padding-top")),a=Number.parseFloat(o.getPropertyValue("border-bottom-width"))+Number.parseFloat(o.getPropertyValue("border-top-width"));return{contextStyle:df.map(i=>[i,o.getPropertyValue(i)]),paddingSize:s,borderSize:a,boxSizing:t}}function ha(e,o=1,t){var s;kt||(kt=document.createElement("textarea"),document.body.appendChild(kt));const{paddingSize:a,borderSize:c,boxSizing:i,contextStyle:u}=ff(e);u.forEach(([v,$])=>kt==null?void 0:kt.style.setProperty(v,$)),Object.entries(uf).forEach(([v,$])=>kt==null?void 0:kt.style.setProperty(v,$,"important")),kt.value=e.value||e.placeholder||"";let p=kt.scrollHeight;const y={};i==="border-box"?p=p+c:i==="content-box"&&(p=p-a),kt.value="";const _=kt.scrollHeight-a;if(vt(o)){let v=_*o;i==="border-box"&&(v=v+a+c),p=Math.max(v,p),y.minHeight=`${v}px`}if(vt(t)){let v=_*t;i==="border-box"&&(v=v+a+c),p=Math.min(v,p)}return y.height=`${p}px`,(s=kt.parentNode)==null||s.removeChild(kt),kt=void 0,y}const vo=e=>e,vf=Ke({ariaLabel:String,ariaOrientation:{type:String,values:["horizontal","vertical","undefined"]},ariaControls:String}),cs=e=>pn(vf,e),pf=Ke({id:{type:String,default:void 0},size:rs,disabled:Boolean,modelValue:{type:ke([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:ke([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,showPassword:Boolean,showWordLimit:Boolean,suffixIcon:{type:Po},prefixIcon:{type:Po},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:ke([Object,Array,String]),default:()=>vo({})},autofocus:Boolean,rows:{type:Number,default:2},...cs(["ariaLabel"])}),mf={[Gt]:e=>it(e),input:e=>it(e),change:e=>it(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent},gf=["class","style"],hf=/^on[A-Z]/,Ln=(e={})=>{const{excludeListeners:o=!1,excludeKeys:t}=e,s=M(()=>((t==null?void 0:t.value)||[]).concat(gf)),a=Tt();return a?M(()=>{var c;return qo(Object.entries((c=a.proxy)==null?void 0:c.$attrs).filter(([i])=>!s.value.includes(i)&&!(o&&hf.test(i))))}):M(()=>({}))},Bo=Symbol("formContextKey"),po=Symbol("formItemContextKey"),ya={prefix:Math.floor(Math.random()*1e4),current:0},yf=Symbol("elIdInjection"),Bn=()=>Tt()?De(yf,ya):ya,mo=e=>{const o=Bn(),t=pl();return Xa(()=>n(e)||`${t.value}-id-${o.prefix}-${o.current++}`)},us=()=>{const e=De(Bo,void 0),o=De(po,void 0);return{form:e,formItem:o}},kl=(e,{formItemContext:o,disableIdGeneration:t,disableIdManagement:s})=>{t||(t=E(!1)),s||(s=E(!1));const a=E();let c;const i=M(()=>{var u;return!!(!(e.label||e.ariaLabel)&&o&&o.inputIds&&((u=o.inputIds)==null?void 0:u.length)<=1)});return Le(()=>{c=me([jt(e,"id"),t],([u,p])=>{const y=u??(p?void 0:mo().value);y!==a.value&&(o!=null&&o.removeInputId&&(a.value&&o.removeInputId(a.value),!(s!=null&&s.value)&&!p&&y&&o.addInputId(y)),a.value=y)},{immediate:!0})}),Lt(()=>{c&&c(),o!=null&&o.removeInputId&&a.value&&o.removeInputId(a.value)}),{isLabeledByFormItem:i,inputId:a}},bl=e=>{const o=Tt();return M(()=>{var t,s;return(s=(t=o==null?void 0:o.proxy)==null?void 0:t.$props)==null?void 0:s[e]})},go=(e,o={})=>{const t=E(void 0),s=o.prop?t:bl("size"),a=o.global?t:fd(),c=o.form?{size:void 0}:De(Bo,void 0),i=o.formItem?{size:void 0}:De(po,void 0);return M(()=>s.value||n(e)||(i==null?void 0:i.size)||(c==null?void 0:c.size)||a.value||"")},lo=e=>{const o=bl("disabled"),t=De(Bo,void 0);return M(()=>o.value||n(e)||(t==null?void 0:t.disabled)||!1)};function kf(e,{beforeFocus:o,afterFocus:t,beforeBlur:s,afterBlur:a}={}){const c=Tt(),{emit:i}=c,u=Xt(),p=bl("disabled"),y=E(!1),_=S=>{ft(o)&&o(S)||y.value||(y.value=!0,i("focus",S),t==null||t())},v=S=>{var m;ft(s)&&s(S)||S.relatedTarget&&((m=u.value)!=null&&m.contains(S.relatedTarget))||(y.value=!1,i("blur",S),a==null||a())},$=()=>{var S,m;(S=u.value)!=null&&S.contains(document.activeElement)&&u.value!==document.activeElement||p.value||(m=e.value)==null||m.focus()};return me([u,p],([S,m])=>{S&&(m?S.removeAttribute("tabindex"):S.setAttribute("tabindex","-1"))}),At(u,"focus",_,!0),At(u,"blur",v,!0),At(u,"click",$,!0),{isFocused:y,wrapperRef:u,handleFocus:_,handleBlur:v}}const bf=e=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(e);function Cf({afterComposition:e,emit:o}){const t=E(!1),s=u=>{o==null||o("compositionstart",u),t.value=!0},a=u=>{var p;o==null||o("compositionupdate",u);const y=(p=u.target)==null?void 0:p.value,_=y[y.length-1]||"";t.value=!bf(_)},c=u=>{o==null||o("compositionend",u),t.value&&(t.value=!1,Ae(()=>e(u)))};return{isComposing:t,handleComposition:u=>{u.type==="compositionend"?c(u):a(u)},handleCompositionStart:s,handleCompositionUpdate:a,handleCompositionEnd:c}}function _f(e){let o;function t(){if(e.value==null)return;const{selectionStart:a,selectionEnd:c,value:i}=e.value;if(a==null||c==null)return;const u=i.slice(0,Math.max(0,a)),p=i.slice(Math.max(0,c));o={selectionStart:a,selectionEnd:c,value:i,beforeTxt:u,afterTxt:p}}function s(){if(e.value==null||o==null)return;const{value:a}=e.value,{beforeTxt:c,afterTxt:i,selectionStart:u}=o;if(c==null||i==null||u==null)return;let p=a.length;if(a.endsWith(i))p=a.length-i.length;else if(a.startsWith(c))p=c.length;else{const y=c[u-1],_=a.indexOf(y,u-1);_!==-1&&(p=_+1)}e.value.setSelectionRange(p,p)}return[t,s]}const wf="ElInput",If=de({name:wf,inheritAttrs:!1}),Tf=de({...If,props:pf,emits:mf,setup(e,{expose:o,emit:t}){const s=e,a=Da(),c=Ln(),i=Lo(),u=M(()=>[s.type==="textarea"?r.b():m.b(),m.m($.value),m.is("disabled",S.value),m.is("exceed",H.value),{[m.b("group")]:i.prepend||i.append,[m.m("prefix")]:i.prefix||s.prefixIcon,[m.m("suffix")]:i.suffix||s.suffixIcon||s.clearable||s.showPassword,[m.bm("suffix","password-clear")]:U.value&&ae.value,[m.b("hidden")]:s.type==="hidden"},a.class]),p=M(()=>[m.e("wrapper"),m.is("focus",R.value)]),{form:y,formItem:_}=us(),{inputId:v}=kl(s,{formItemContext:_}),$=go(),S=lo(),m=Ge("input"),r=Ge("textarea"),T=Xt(),b=Xt(),C=E(!1),d=E(!1),k=E(),g=Xt(s.inputStyle),h=M(()=>T.value||b.value),{wrapperRef:x,isFocused:R,handleFocus:j,handleBlur:F}=kf(h,{beforeFocus(){return S.value},afterBlur(){var q;s.validateEvent&&((q=_==null?void 0:_.validate)==null||q.call(_,"blur").catch(z=>void 0))}}),B=M(()=>{var q;return(q=y==null?void 0:y.statusIcon)!=null?q:!1}),Y=M(()=>(_==null?void 0:_.validateState)||""),D=M(()=>Y.value&&rf[Y.value]),Z=M(()=>d.value?tf:Md),Q=M(()=>[a.style]),P=M(()=>[s.inputStyle,g.value,{resize:s.resize}]),O=M(()=>yo(s.modelValue)?"":String(s.modelValue)),U=M(()=>s.clearable&&!S.value&&!s.readonly&&!!O.value&&(R.value||C.value)),ae=M(()=>s.showPassword&&!S.value&&!!O.value&&(!!O.value||R.value)),ue=M(()=>s.showWordLimit&&!!s.maxlength&&(s.type==="text"||s.type==="textarea")&&!S.value&&!s.readonly&&!s.showPassword),oe=M(()=>O.value.length),H=M(()=>!!ue.value&&oe.value>Number(s.maxlength)),re=M(()=>!!i.suffix||!!s.suffixIcon||U.value||s.showPassword||ue.value||!!Y.value&&B.value),[G,L]=_f(T);cl(b,q=>{if(A(),!ue.value||s.resize!=="both")return;const z=q[0],{width:le}=z.contentRect;k.value={right:`calc(100% - ${le+15+6}px)`}});const ne=()=>{const{type:q,autosize:z}=s;if(!(!et||q!=="textarea"||!b.value))if(z){const le=Qt(z)?z.minRows:void 0,Ve=Qt(z)?z.maxRows:void 0,we=ha(b.value,le,Ve);g.value={overflowY:"hidden",...we},Ae(()=>{b.value.offsetHeight,g.value=we})}else g.value={minHeight:ha(b.value).minHeight}},A=(q=>{let z=!1;return()=>{var le;if(z||!s.autosize)return;((le=b.value)==null?void 0:le.offsetParent)===null||(q(),z=!0)}})(ne),K=()=>{const q=h.value,z=s.formatter?s.formatter(O.value):O.value;!q||q.value===z||(q.value=z)},J=async q=>{G();let{value:z}=q.target;if(s.formatter&&s.parser&&(z=s.parser(z)),!pe.value){if(z===O.value){K();return}t(Gt,z),t(pa,z),await Ae(),K(),L()}},ce=q=>{let{value:z}=q.target;s.formatter&&s.parser&&(z=s.parser(z)),t(Zo,z)},{isComposing:pe,handleCompositionStart:ve,handleCompositionUpdate:he,handleCompositionEnd:Pe}=Cf({emit:t,afterComposition:J}),_e=()=>{G(),d.value=!d.value,setTimeout(L)},W=()=>{var q;return(q=h.value)==null?void 0:q.focus()},Fe=()=>{var q;return(q=h.value)==null?void 0:q.blur()},$e=q=>{C.value=!1,t("mouseleave",q)},be=q=>{C.value=!0,t("mouseenter",q)},Ce=q=>{t("keydown",q)},te=()=>{var q;(q=h.value)==null||q.select()},ee=()=>{t(Gt,""),t(Zo,""),t("clear"),t(pa,"")};return me(()=>s.modelValue,()=>{var q;Ae(()=>ne()),s.validateEvent&&((q=_==null?void 0:_.validate)==null||q.call(_,"change").catch(z=>void 0))}),me(O,()=>K()),me(()=>s.type,async()=>{await Ae(),K(),ne()}),Le(()=>{!s.formatter&&s.parser,K(),Ae(ne)}),o({input:T,textarea:b,ref:h,textareaStyle:P,autosize:jt(s,"autosize"),isComposing:pe,focus:W,blur:Fe,select:te,clear:ee,resizeTextarea:ne}),(q,z)=>(f(),I("div",{class:N([n(u),{[n(m).bm("group","append")]:q.$slots.append,[n(m).bm("group","prepend")]:q.$slots.prepend}]),style:ye(n(Q)),onMouseenter:be,onMouseleave:$e},[X(" input "),q.type!=="textarea"?(f(),I(Ee,{key:0},[X(" prepend slot "),q.$slots.prepend?(f(),I("div",{key:0,class:N(n(m).be("group","prepend"))},[Te(q.$slots,"prepend")],2)):X("v-if",!0),l("div",{ref_key:"wrapperRef",ref:x,class:N(n(p))},[X(" prefix slot "),q.$slots.prefix||q.prefixIcon?(f(),I("span",{key:0,class:N(n(m).e("prefix"))},[l("span",{class:N(n(m).e("prefix-inner"))},[Te(q.$slots,"prefix"),q.prefixIcon?(f(),se(n(Ne),{key:0,class:N(n(m).e("icon"))},{default:V(()=>[(f(),se(nt(q.prefixIcon)))]),_:1},8,["class"])):X("v-if",!0)],2)],2)):X("v-if",!0),l("input",Et({id:n(v),ref_key:"input",ref:T,class:n(m).e("inner")},n(c),{minlength:q.minlength,maxlength:q.maxlength,type:q.showPassword?d.value?"text":"password":q.type,disabled:n(S),readonly:q.readonly,autocomplete:q.autocomplete,tabindex:q.tabindex,"aria-label":q.ariaLabel,placeholder:q.placeholder,style:q.inputStyle,form:q.form,autofocus:q.autofocus,role:q.containerRole,onCompositionstart:n(ve),onCompositionupdate:n(he),onCompositionend:n(Pe),onInput:J,onChange:ce,onKeydown:Ce}),null,16,["id","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","role","onCompositionstart","onCompositionupdate","onCompositionend"]),X(" suffix slot "),n(re)?(f(),I("span",{key:1,class:N(n(m).e("suffix"))},[l("span",{class:N(n(m).e("suffix-inner"))},[!n(U)||!n(ae)||!n(ue)?(f(),I(Ee,{key:0},[Te(q.$slots,"suffix"),q.suffixIcon?(f(),se(n(Ne),{key:0,class:N(n(m).e("icon"))},{default:V(()=>[(f(),se(nt(q.suffixIcon)))]),_:1},8,["class"])):X("v-if",!0)],64)):X("v-if",!0),n(U)?(f(),se(n(Ne),{key:1,class:N([n(m).e("icon"),n(m).e("clear")]),onMousedown:Re(n(tt),["prevent"]),onClick:ee},{default:V(()=>[w(n(hl))]),_:1},8,["class","onMousedown"])):X("v-if",!0),n(ae)?(f(),se(n(Ne),{key:2,class:N([n(m).e("icon"),n(m).e("password")]),onClick:_e},{default:V(()=>[(f(),se(nt(n(Z))))]),_:1},8,["class"])):X("v-if",!0),n(ue)?(f(),I("span",{key:3,class:N(n(m).e("count"))},[l("span",{class:N(n(m).e("count-inner"))},ie(n(oe))+" / "+ie(q.maxlength),3)],2)):X("v-if",!0),n(Y)&&n(D)&&n(B)?(f(),se(n(Ne),{key:4,class:N([n(m).e("icon"),n(m).e("validateIcon"),n(m).is("loading",n(Y)==="validating")])},{default:V(()=>[(f(),se(nt(n(D))))]),_:1},8,["class"])):X("v-if",!0)],2)],2)):X("v-if",!0)],2),X(" append slot "),q.$slots.append?(f(),I("div",{key:1,class:N(n(m).be("group","append"))},[Te(q.$slots,"append")],2)):X("v-if",!0)],64)):(f(),I(Ee,{key:1},[X(" textarea "),l("textarea",Et({id:n(v),ref_key:"textarea",ref:b,class:[n(r).e("inner"),n(m).is("focus",n(R))]},n(c),{minlength:q.minlength,maxlength:q.maxlength,tabindex:q.tabindex,disabled:n(S),readonly:q.readonly,autocomplete:q.autocomplete,style:n(P),"aria-label":q.ariaLabel,placeholder:q.placeholder,form:q.form,autofocus:q.autofocus,rows:q.rows,role:q.containerRole,onCompositionstart:n(ve),onCompositionupdate:n(he),onCompositionend:n(Pe),onInput:J,onFocus:n(j),onBlur:n(F),onChange:ce,onKeydown:Ce}),null,16,["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","role","onCompositionstart","onCompositionupdate","onCompositionend","onFocus","onBlur"]),n(ue)?(f(),I("span",{key:0,style:ye(k.value),class:N(n(m).e("count"))},ie(n(oe))+" / "+ie(q.maxlength),7)):X("v-if",!0)],64))],38))}});var xf=Ye(Tf,[["__file","input.vue"]]);const Hs=yt(xf),Cl=Symbol("popper"),An=Symbol("popperContent"),Ff=["dialog","grid","group","listbox","menu","navigation","tooltip","tree"],jn=Ke({role:{type:String,values:Ff,default:"tooltip"}}),Sf=de({name:"ElPopper",inheritAttrs:!1}),Ef=de({...Sf,props:jn,setup(e,{expose:o}){const t=e,s=E(),a=E(),c=E(),i=E(),u=M(()=>t.role),p={triggerRef:s,popperInstanceRef:a,contentRef:c,referenceRef:i,role:u};return o(p),It(Cl,p),(y,_)=>Te(y.$slots,"default")}});var $f=Ye(Ef,[["__file","popper.vue"]]);const Rf=de({name:"ElPopperArrow",inheritAttrs:!1}),Pf=de({...Rf,setup(e,{expose:o}){const t=Ge("popper"),{arrowRef:s,arrowStyle:a}=De(An,void 0);return ut(()=>{s.value=void 0}),o({arrowRef:s}),(c,i)=>(f(),I("span",{ref_key:"arrowRef",ref:s,class:N(n(t).e("arrow")),style:ye(n(a)),"data-popper-arrow":""},null,6))}});var Of=Ye(Pf,[["__file","arrow.vue"]]);const Qn=Ke({virtualRef:{type:ke(Object)},virtualTriggering:Boolean,onMouseenter:{type:ke(Function)},onMouseleave:{type:ke(Function)},onClick:{type:ke(Function)},onKeydown:{type:ke(Function)},onFocus:{type:ke(Function)},onBlur:{type:ke(Function)},onContextmenu:{type:ke(Function)},id:String,open:Boolean}),Hn=Symbol("elForwardRef"),Vf=e=>{It(Hn,{setForwardRef:t=>{e.value=t}})},Lf=e=>({mounted(o){e(o)},updated(o){e(o)},unmounted(){e(null)}}),Bf='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',Af=e=>getComputedStyle(e).position==="fixed"?!1:e.offsetParent!==null,ka=e=>Array.from(e.querySelectorAll(Bf)).filter(o=>Ps(o)&&Af(o)),Ps=e=>{if(e.tabIndex>0||e.tabIndex===0&&e.getAttribute("tabIndex")!==null)return!0;if(e.tabIndex<0||e.hasAttribute("disabled")||e.getAttribute("aria-disabled")==="true")return!1;switch(e.nodeName){case"A":return!!e.href&&e.rel!=="ignore";case"INPUT":return!(e.type==="hidden"||e.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},jf="ElOnlyChild",Qf=de({name:jf,setup(e,{slots:o,attrs:t}){var s;const a=De(Hn),c=Lf((s=a==null?void 0:a.setForwardRef)!=null?s:tt);return()=>{var i;const u=(i=o.default)==null?void 0:i.call(o,t);if(!u||u.length>1)return null;const p=Mn(u);return p?qe(er(p,t),[[c]]):null}}});function Mn(e){if(!e)return null;const o=e;for(const t of o){if(Qt(t))switch(t.type){case tr:continue;case Ya:case"svg":return ba(t);case Ee:return Mn(t.children);default:return t}return ba(t)}return null}function ba(e){const o=Ge("only-child");return w("span",{class:o.e("content")},[e])}const Hf=de({name:"ElPopperTrigger",inheritAttrs:!1}),Mf=de({...Hf,props:Qn,setup(e,{expose:o}){const t=e,{role:s,triggerRef:a}=De(Cl,void 0);Vf(a);const c=M(()=>u.value?t.id:void 0),i=M(()=>{if(s&&s.value==="tooltip")return t.open&&t.id?t.id:void 0}),u=M(()=>{if(s&&s.value!=="tooltip")return s.value}),p=M(()=>u.value?`${t.open}`:void 0);let y;const _=["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"];return Le(()=>{me(()=>t.virtualRef,v=>{v&&(a.value=qa(v))},{immediate:!0}),me(a,(v,$)=>{y==null||y(),y=void 0,Ot(v)&&(_.forEach(S=>{var m;const r=t[S];r&&(v.addEventListener(S.slice(2).toLowerCase(),r),(m=$==null?void 0:$.removeEventListener)==null||m.call($,S.slice(2).toLowerCase(),r))}),Ps(v)&&(y=me([c,i,u,p],S=>{["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach((m,r)=>{yo(S[r])?v.removeAttribute(m):v.setAttribute(m,S[r])})},{immediate:!0}))),Ot($)&&Ps($)&&["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach(S=>$.removeAttribute(S))},{immediate:!0})}),ut(()=>{if(y==null||y(),y=void 0,a.value&&Ot(a.value)){const v=a.value;_.forEach($=>{const S=t[$];S&&v.removeEventListener($.slice(2).toLowerCase(),S)}),a.value=void 0}}),o({triggerRef:a}),(v,$)=>v.virtualTriggering?X("v-if",!0):(f(),se(n(Qf),Et({key:0},v.$attrs,{"aria-controls":n(c),"aria-describedby":n(i),"aria-expanded":n(p),"aria-haspopup":n(u)}),{default:V(()=>[Te(v.$slots,"default")]),_:3},16,["aria-controls","aria-describedby","aria-expanded","aria-haspopup"]))}});var Uf=Ye(Mf,[["__file","trigger.vue"]]);const qs="focus-trap.focus-after-trapped",Ws="focus-trap.focus-after-released",zf="focus-trap.focusout-prevented",Ca={cancelable:!0,bubbles:!1},Nf={cancelable:!0,bubbles:!1},_a="focusAfterTrapped",wa="focusAfterReleased",Un=Symbol("elFocusTrap"),_l=E(),Ms=E(0),wl=E(0);let gs=0;const zn=e=>{const o=[],t=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0||s===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)o.push(t.currentNode);return o},Ia=(e,o)=>{for(const t of e)if(!Kf(t,o))return t},Kf=(e,o)=>{if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(o&&e===o)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1},Df=e=>{const o=zn(e),t=Ia(o,e),s=Ia(o.reverse(),e);return[t,s]},Xf=e=>e instanceof HTMLInputElement&&"select"in e,Nt=(e,o)=>{if(e&&e.focus){const t=document.activeElement;let s=!1;Ot(e)&&!Ps(e)&&!e.getAttribute("tabindex")&&(e.setAttribute("tabindex","-1"),s=!0),e.focus({preventScroll:!0}),wl.value=window.performance.now(),e!==t&&Xf(e)&&o&&e.select(),Ot(e)&&s&&e.removeAttribute("tabindex")}};function Ta(e,o){const t=[...e],s=e.indexOf(o);return s!==-1&&t.splice(s,1),t}const Gf=()=>{let e=[];return{push:s=>{const a=e[0];a&&s!==a&&a.pause(),e=Ta(e,s),e.unshift(s)},remove:s=>{var a,c;e=Ta(e,s),(c=(a=e[0])==null?void 0:a.resume)==null||c.call(a)}}},Yf=(e,o=!1)=>{const t=document.activeElement;for(const s of e)if(Nt(s,o),document.activeElement!==t)return},xa=Gf(),qf=()=>Ms.value>wl.value,hs=()=>{_l.value="pointer",Ms.value=window.performance.now()},Fa=()=>{_l.value="keyboard",Ms.value=window.performance.now()},Wf=()=>(Le(()=>{gs===0&&(document.addEventListener("mousedown",hs),document.addEventListener("touchstart",hs),document.addEventListener("keydown",Fa)),gs++}),ut(()=>{gs--,gs<=0&&(document.removeEventListener("mousedown",hs),document.removeEventListener("touchstart",hs),document.removeEventListener("keydown",Fa))}),{focusReason:_l,lastUserFocusTimestamp:Ms,lastAutomatedFocusTimestamp:wl}),ys=e=>new CustomEvent(zf,{...Nf,detail:e}),Ct={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",numpadEnter:"NumpadEnter"};let So=[];const Sa=e=>{e.code===Ct.esc&&So.forEach(o=>o(e))},Zf=e=>{Le(()=>{So.length===0&&document.addEventListener("keydown",Sa),et&&So.push(e)}),ut(()=>{So=So.filter(o=>o!==e),So.length===0&&et&&document.removeEventListener("keydown",Sa)})},Jf=de({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[_a,wa,"focusin","focusout","focusout-prevented","release-requested"],setup(e,{emit:o}){const t=E();let s,a;const{focusReason:c}=Wf();Zf(m=>{e.trapped&&!i.paused&&o("release-requested",m)});const i={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},u=m=>{if(!e.loop&&!e.trapped||i.paused)return;const{code:r,altKey:T,ctrlKey:b,metaKey:C,currentTarget:d,shiftKey:k}=m,{loop:g}=e,h=r===Ct.tab&&!T&&!b&&!C,x=document.activeElement;if(h&&x){const R=d,[j,F]=Df(R);if(j&&F){if(!k&&x===F){const Y=ys({focusReason:c.value});o("focusout-prevented",Y),Y.defaultPrevented||(m.preventDefault(),g&&Nt(j,!0))}else if(k&&[j,R].includes(x)){const Y=ys({focusReason:c.value});o("focusout-prevented",Y),Y.defaultPrevented||(m.preventDefault(),g&&Nt(F,!0))}}else if(x===R){const Y=ys({focusReason:c.value});o("focusout-prevented",Y),Y.defaultPrevented||m.preventDefault()}}};It(Un,{focusTrapRef:t,onKeydown:u}),me(()=>e.focusTrapEl,m=>{m&&(t.value=m)},{immediate:!0}),me([t],([m],[r])=>{m&&(m.addEventListener("keydown",u),m.addEventListener("focusin",_),m.addEventListener("focusout",v)),r&&(r.removeEventListener("keydown",u),r.removeEventListener("focusin",_),r.removeEventListener("focusout",v))});const p=m=>{o(_a,m)},y=m=>o(wa,m),_=m=>{const r=n(t);if(!r)return;const T=m.target,b=m.relatedTarget,C=T&&r.contains(T);e.trapped||b&&r.contains(b)||(s=b),C&&o("focusin",m),!i.paused&&e.trapped&&(C?a=T:Nt(a,!0))},v=m=>{const r=n(t);if(!(i.paused||!r))if(e.trapped){const T=m.relatedTarget;!yo(T)&&!r.contains(T)&&setTimeout(()=>{if(!i.paused&&e.trapped){const b=ys({focusReason:c.value});o("focusout-prevented",b),b.defaultPrevented||Nt(a,!0)}},0)}else{const T=m.target;T&&r.contains(T)||o("focusout",m)}};async function $(){await Ae();const m=n(t);if(m){xa.push(i);const r=m.contains(document.activeElement)?s:document.activeElement;if(s=r,!m.contains(r)){const b=new Event(qs,Ca);m.addEventListener(qs,p),m.dispatchEvent(b),b.defaultPrevented||Ae(()=>{let C=e.focusStartEl;it(C)||(Nt(C),document.activeElement!==C&&(C="first")),C==="first"&&Yf(zn(m),!0),(document.activeElement===r||C==="container")&&Nt(m)})}}}function S(){const m=n(t);if(m){m.removeEventListener(qs,p);const r=new CustomEvent(Ws,{...Ca,detail:{focusReason:c.value}});m.addEventListener(Ws,y),m.dispatchEvent(r),!r.defaultPrevented&&(c.value=="keyboard"||!qf()||m.contains(document.activeElement))&&Nt(s??document.body),m.removeEventListener(Ws,y),xa.remove(i)}}return Le(()=>{e.trapped&&$(),me(()=>e.trapped,m=>{m?$():S()})}),ut(()=>{e.trapped&&S(),t.value&&(t.value.removeEventListener("keydown",u),t.value.removeEventListener("focusin",_),t.value.removeEventListener("focusout",v),t.value=void 0)}),{onKeydown:u}}});function ev(e,o,t,s,a,c){return Te(e.$slots,"default",{handleKeydown:e.onKeydown})}var Us=Ye(Jf,[["render",ev],["__file","focus-trap.vue"]]);const Nn=Ke({arrowOffset:{type:Number,default:5}}),tv=["fixed","absolute"],ov=Ke({boundariesPadding:{type:Number,default:0},fallbackPlacements:{type:ke(Array),default:void 0},gpuAcceleration:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:String,values:Kr,default:"bottom"},popperOptions:{type:ke(Object),default:()=>({})},strategy:{type:String,values:tv,default:"absolute"}}),Kn=Ke({...ov,...Nn,id:String,style:{type:ke([String,Array,Object])},className:{type:ke([String,Array,Object])},effect:{type:ke(String),default:"dark"},visible:Boolean,enterable:{type:Boolean,default:!0},pure:Boolean,focusOnShow:{type:Boolean,default:!1},trapping:{type:Boolean,default:!1},popperClass:{type:ke([String,Array,Object])},popperStyle:{type:ke([String,Array,Object])},referenceEl:{type:ke(Object)},triggerTargetEl:{type:ke(Object)},stopPopperMouseEvent:{type:Boolean,default:!0},virtualTriggering:Boolean,zIndex:Number,...cs(["ariaLabel"])}),sv={mouseenter:e=>e instanceof MouseEvent,mouseleave:e=>e instanceof MouseEvent,focus:()=>!0,blur:()=>!0,close:()=>!0},lv=(e,o)=>{const t=E(!1),s=E();return{focusStartRef:s,trapped:t,onFocusAfterReleased:y=>{var _;((_=y.detail)==null?void 0:_.focusReason)!=="pointer"&&(s.value="first",o("blur"))},onFocusAfterTrapped:()=>{o("focus")},onFocusInTrap:y=>{e.visible&&!t.value&&(y.target&&(s.value=y.target),t.value=!0)},onFocusoutPrevented:y=>{e.trapping||(y.detail.focusReason==="pointer"&&y.preventDefault(),t.value=!1)},onReleaseRequested:()=>{t.value=!1,o("close")}}},av=(e,o=[])=>{const{placement:t,strategy:s,popperOptions:a}=e,c={placement:t,strategy:s,...a,modifiers:[...iv(e),...o]};return rv(c,a==null?void 0:a.modifiers),c},nv=e=>{if(et)return qa(e)};function iv(e){const{offset:o,gpuAcceleration:t,fallbackPlacements:s}=e;return[{name:"offset",options:{offset:[0,o??12]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5,fallbackPlacements:s}},{name:"computeStyles",options:{gpuAcceleration:t}}]}function rv(e,o){o&&(e.modifiers=[...e.modifiers,...o??[]])}const cv=(e,o,t={})=>{const s={name:"updateState",enabled:!0,phase:"write",fn:({state:p})=>{const y=uv(p);Object.assign(i.value,y)},requires:["computeStyles"]},a=M(()=>{const{onFirstUpdate:p,placement:y,strategy:_,modifiers:v}=n(t);return{onFirstUpdate:p,placement:y||"bottom",strategy:_||"absolute",modifiers:[...v||[],s,{name:"applyStyles",enabled:!1}]}}),c=Xt(),i=E({styles:{popper:{position:n(a).strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),u=()=>{c.value&&(c.value.destroy(),c.value=void 0)};return me(a,p=>{const y=n(c);y&&y.setOptions(p)},{deep:!0}),me([e,o],([p,y])=>{u(),!(!p||!y)&&(c.value=Xr(p,y,n(a)))}),ut(()=>{u()}),{state:M(()=>{var p;return{...((p=n(c))==null?void 0:p.state)||{}}}),styles:M(()=>n(i).styles),attributes:M(()=>n(i).attributes),update:()=>{var p;return(p=n(c))==null?void 0:p.update()},forceUpdate:()=>{var p;return(p=n(c))==null?void 0:p.forceUpdate()},instanceRef:M(()=>n(c))}};function uv(e){const o=Object.keys(e.elements),t=qo(o.map(a=>[a,e.styles[a]||{}])),s=qo(o.map(a=>[a,e.attributes[a]]));return{styles:t,attributes:s}}const dv=0,fv=e=>{const{popperInstanceRef:o,contentRef:t,triggerRef:s,role:a}=De(Cl,void 0),c=E(),i=M(()=>e.arrowOffset),u=M(()=>({name:"eventListeners",enabled:!!e.visible})),p=M(()=>{var b;const C=n(c),d=(b=n(i))!=null?b:dv;return{name:"arrow",enabled:!mn(C),options:{element:C,padding:d}}}),y=M(()=>({onFirstUpdate:()=>{m()},...av(e,[n(p),n(u)])})),_=M(()=>nv(e.referenceEl)||n(s)),{attributes:v,state:$,styles:S,update:m,forceUpdate:r,instanceRef:T}=cv(_,t,y);return me(T,b=>o.value=b,{flush:"sync"}),Le(()=>{me(()=>{var b;return(b=n(_))==null?void 0:b.getBoundingClientRect()},()=>{m()})}),{attributes:v,arrowRef:c,contentRef:t,instanceRef:T,state:$,styles:S,role:a,forceUpdate:r,update:m}},vv=(e,{attributes:o,styles:t,role:s})=>{const{nextZIndex:a}=Bs(),c=Ge("popper"),i=M(()=>n(o).popper),u=E(vt(e.zIndex)?e.zIndex:a()),p=M(()=>[c.b(),c.is("pure",e.pure),c.is(e.effect),e.popperClass]),y=M(()=>[{zIndex:n(u)},n(t).popper,e.popperStyle||{}]),_=M(()=>s.value==="dialog"?"false":void 0),v=M(()=>n(t).arrow||{});return{ariaModal:_,arrowStyle:v,contentAttrs:i,contentClass:p,contentStyle:y,contentZIndex:u,updateZIndex:()=>{u.value=vt(e.zIndex)?e.zIndex:a()}}},pv=de({name:"ElPopperContent"}),mv=de({...pv,props:Kn,emits:sv,setup(e,{expose:o,emit:t}){const s=e,{focusStartRef:a,trapped:c,onFocusAfterReleased:i,onFocusAfterTrapped:u,onFocusInTrap:p,onFocusoutPrevented:y,onReleaseRequested:_}=lv(s,t),{attributes:v,arrowRef:$,contentRef:S,styles:m,instanceRef:r,role:T,update:b}=fv(s),{ariaModal:C,arrowStyle:d,contentAttrs:k,contentClass:g,contentStyle:h,updateZIndex:x}=vv(s,{styles:m,attributes:v,role:T}),R=De(po,void 0);It(An,{arrowStyle:d,arrowRef:$}),R&&It(po,{...R,addInputId:tt,removeInputId:tt});let j;const F=(Y=!0)=>{b(),Y&&x()},B=()=>{F(!1),s.visible&&s.focusOnShow?c.value=!0:s.visible===!1&&(c.value=!1)};return Le(()=>{me(()=>s.triggerTargetEl,(Y,D)=>{j==null||j(),j=void 0;const Z=n(Y||S.value),Q=n(D||S.value);Ot(Z)&&(j=me([T,()=>s.ariaLabel,C,()=>s.id],P=>{["role","aria-label","aria-modal","id"].forEach((O,U)=>{yo(P[U])?Z.removeAttribute(O):Z.setAttribute(O,P[U])})},{immediate:!0})),Q!==Z&&Ot(Q)&&["role","aria-label","aria-modal","id"].forEach(P=>{Q.removeAttribute(P)})},{immediate:!0}),me(()=>s.visible,B,{immediate:!0})}),ut(()=>{j==null||j(),j=void 0}),o({popperContentRef:S,popperInstanceRef:r,updatePopper:F,contentStyle:h}),(Y,D)=>(f(),I("div",Et({ref_key:"contentRef",ref:S},n(k),{style:n(h),class:n(g),tabindex:"-1",onMouseenter:Z=>Y.$emit("mouseenter",Z),onMouseleave:Z=>Y.$emit("mouseleave",Z)}),[w(n(Us),{trapped:n(c),"trap-on-focus-in":!0,"focus-trap-el":n(S),"focus-start-el":n(a),onFocusAfterTrapped:n(u),onFocusAfterReleased:n(i),onFocusin:n(p),onFocusoutPrevented:n(y),onReleaseRequested:n(_)},{default:V(()=>[Te(Y.$slots,"default")]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusin","onFocusoutPrevented","onReleaseRequested"])],16,["onMouseenter","onMouseleave"]))}});var gv=Ye(mv,[["__file","content.vue"]]);const hv=yt($f),Il=Symbol("elTooltip");function Ea(){let e;const o=(s,a)=>{t(),e=window.setTimeout(s,a)},t=()=>window.clearTimeout(e);return Wi(()=>t()),{registerTimeout:o,cancelTimeout:t}}const yv=Ke({showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0}}),kv=({showAfter:e,hideAfter:o,autoClose:t,open:s,close:a})=>{const{registerTimeout:c}=Ea(),{registerTimeout:i,cancelTimeout:u}=Ea();return{onOpen:_=>{c(()=>{s(_);const v=n(t);vt(v)&&v>0&&i(()=>{a(_)},v)},n(e))},onClose:_=>{u(),c(()=>{a(_)},n(o))}}},Tl=Ke({to:{type:ke([String,Object]),required:!0},disabled:Boolean}),Dn=Ke({...yv,...Kn,appendTo:{type:Tl.to.type},content:{type:String,default:""},rawContent:Boolean,persistent:Boolean,visible:{type:ke(Boolean),default:null},transition:String,teleported:{type:Boolean,default:!0},disabled:Boolean,...cs(["ariaLabel"])}),Xn=Ke({...Qn,disabled:Boolean,trigger:{type:ke([String,Array]),default:"hover"},triggerKeys:{type:ke(Array),default:()=>[Ct.enter,Ct.numpadEnter,Ct.space]}}),bv=As({type:ke(Boolean),default:null}),Cv=As({type:ke(Function)}),_v=e=>{const o=`update:${e}`,t=`onUpdate:${e}`,s=[o],a={[e]:bv,[t]:Cv};return{useModelToggle:({indicator:i,toggleReason:u,shouldHideWhenRouteChanges:p,shouldProceed:y,onShow:_,onHide:v})=>{const $=Tt(),{emit:S}=$,m=$.props,r=M(()=>ft(m[t])),T=M(()=>m[e]===null),b=x=>{i.value!==!0&&(i.value=!0,u&&(u.value=x),ft(_)&&_(x))},C=x=>{i.value!==!1&&(i.value=!1,u&&(u.value=x),ft(v)&&v(x))},d=x=>{if(m.disabled===!0||ft(y)&&!y())return;const R=r.value&&et;R&&S(o,!0),(T.value||!R)&&b(x)},k=x=>{if(m.disabled===!0||!et)return;const R=r.value&&et;R&&S(o,!1),(T.value||!R)&&C(x)},g=x=>{Ht(x)&&(m.disabled&&x?r.value&&S(o,!1):i.value!==x&&(x?b():C()))},h=()=>{i.value?k():d()};return me(()=>m[e],g),p&&$.appContext.config.globalProperties.$route!==void 0&&me(()=>({...$.proxy.$route}),()=>{p.value&&i.value&&k()}),Le(()=>{g(m[e])}),{hide:k,show:d,toggle:h,hasUpdateHandler:r}},useModelToggleProps:a,useModelToggleEmits:s}},{useModelToggleProps:wv,useModelToggleEmits:Iv,useModelToggle:Tv}=_v("visible"),xv=Ke({...jn,...wv,...Dn,...Xn,...Nn,showArrow:{type:Boolean,default:!0}}),Fv=[...Iv,"before-show","before-hide","show","hide","open","close"],Sv=(e,o)=>Vt(e)?e.includes(o):e===o,xo=(e,o,t)=>s=>{Sv(n(e),o)&&t(s)},Kt=(e,o,{checkForDefaultPrevented:t=!0}={})=>a=>{const c=e==null?void 0:e(a);if(t===!1||!c)return o==null?void 0:o(a)},Ev=de({name:"ElTooltipTrigger"}),$v=de({...Ev,props:Xn,setup(e,{expose:o}){const t=e,s=Ge("tooltip"),{controlled:a,id:c,open:i,onOpen:u,onClose:p,onToggle:y}=De(Il,void 0),_=E(null),v=()=>{if(n(a)||t.disabled)return!0},$=jt(t,"trigger"),S=Kt(v,xo($,"hover",u)),m=Kt(v,xo($,"hover",p)),r=Kt(v,xo($,"click",k=>{k.button===0&&y(k)})),T=Kt(v,xo($,"focus",u)),b=Kt(v,xo($,"focus",p)),C=Kt(v,xo($,"contextmenu",k=>{k.preventDefault(),y(k)})),d=Kt(v,k=>{const{code:g}=k;t.triggerKeys.includes(g)&&(k.preventDefault(),y(k))});return o({triggerRef:_}),(k,g)=>(f(),se(n(Uf),{id:n(c),"virtual-ref":k.virtualRef,open:n(i),"virtual-triggering":k.virtualTriggering,class:N(n(s).e("trigger")),onBlur:n(b),onClick:n(r),onContextmenu:n(C),onFocus:n(T),onMouseenter:n(S),onMouseleave:n(m),onKeydown:n(d)},{default:V(()=>[Te(k.$slots,"default")]),_:3},8,["id","virtual-ref","open","virtual-triggering","class","onBlur","onClick","onContextmenu","onFocus","onMouseenter","onMouseleave","onKeydown"]))}});var Rv=Ye($v,[["__file","trigger.vue"]]);const Pv=de({__name:"teleport",props:Tl,setup(e){return(o,t)=>o.disabled?Te(o.$slots,"default",{key:0}):(f(),se(Ga,{key:1,to:o.to},[Te(o.$slots,"default")],8,["to"]))}});var Ov=Ye(Pv,[["__file","teleport.vue"]]);const xl=yt(Ov),Gn=()=>{const e=pl(),o=Bn(),t=M(()=>`${e.value}-popper-container-${o.prefix}`),s=M(()=>`#${t.value}`);return{id:t,selector:s}},Vv=e=>{const o=document.createElement("div");return o.id=e,document.body.appendChild(o),o},Lv=()=>{const{id:e,selector:o}=Gn();return Gi(()=>{et&&(document.body.querySelector(o.value)||Vv(e.value))}),{id:e,selector:o}},Bv=de({name:"ElTooltipContent",inheritAttrs:!1}),Av=de({...Bv,props:Dn,setup(e,{expose:o}){const t=e,{selector:s}=Gn(),a=Ge("tooltip"),c=E(),i=Xa(()=>{var U;return(U=c.value)==null?void 0:U.popperContentRef});let u;const{controlled:p,id:y,open:_,trigger:v,onClose:$,onOpen:S,onShow:m,onHide:r,onBeforeShow:T,onBeforeHide:b}=De(Il,void 0),C=M(()=>t.transition||`${a.namespace.value}-fade-in-linear`),d=M(()=>t.persistent);ut(()=>{u==null||u()});const k=M(()=>n(d)?!0:n(_)),g=M(()=>t.disabled?!1:n(_)),h=M(()=>t.appendTo||s.value),x=M(()=>{var U;return(U=t.style)!=null?U:{}}),R=E(!0),j=()=>{r(),O()&&Nt(document.body),R.value=!0},F=()=>{if(n(p))return!0},B=Kt(F,()=>{t.enterable&&n(v)==="hover"&&S()}),Y=Kt(F,()=>{n(v)==="hover"&&$()}),D=()=>{var U,ae;(ae=(U=c.value)==null?void 0:U.updatePopper)==null||ae.call(U),T==null||T()},Z=()=>{b==null||b()},Q=()=>{m()},P=()=>{t.virtualTriggering||$()},O=U=>{var ae;const ue=(ae=c.value)==null?void 0:ae.popperContentRef,oe=(U==null?void 0:U.relatedTarget)||document.activeElement;return ue==null?void 0:ue.contains(oe)};return me(()=>n(_),U=>{U?(R.value=!1,u=ar(i,()=>{if(n(p))return;n(v)!=="hover"&&$()})):u==null||u()},{flush:"post"}),me(()=>t.content,()=>{var U,ae;(ae=(U=c.value)==null?void 0:U.updatePopper)==null||ae.call(U)}),o({contentRef:c,isFocusInsideContent:O}),(U,ae)=>(f(),se(n(xl),{disabled:!U.teleported,to:n(h)},{default:V(()=>[w(Yt,{name:n(C),onAfterLeave:j,onBeforeEnter:D,onAfterEnter:Q,onBeforeLeave:Z},{default:V(()=>[n(k)?qe((f(),se(n(gv),Et({key:0,id:n(y),ref_key:"contentRef",ref:c},U.$attrs,{"aria-label":U.ariaLabel,"aria-hidden":R.value,"boundaries-padding":U.boundariesPadding,"fallback-placements":U.fallbackPlacements,"gpu-acceleration":U.gpuAcceleration,offset:U.offset,placement:U.placement,"popper-options":U.popperOptions,"arrow-offset":U.arrowOffset,strategy:U.strategy,effect:U.effect,enterable:U.enterable,pure:U.pure,"popper-class":U.popperClass,"popper-style":[U.popperStyle,n(x)],"reference-el":U.referenceEl,"trigger-target-el":U.triggerTargetEl,visible:n(g),"z-index":U.zIndex,onMouseenter:n(B),onMouseleave:n(Y),onBlur:P,onClose:n($)}),{default:V(()=>[Te(U.$slots,"default")]),_:3},16,["id","aria-label","aria-hidden","boundaries-padding","fallback-placements","gpu-acceleration","offset","placement","popper-options","arrow-offset","strategy","effect","enterable","pure","popper-class","popper-style","reference-el","trigger-target-el","visible","z-index","onMouseenter","onMouseleave","onClose"])),[[pt,n(g)]]):X("v-if",!0)]),_:3},8,["name"])]),_:3},8,["disabled","to"]))}});var jv=Ye(Av,[["__file","content.vue"]]);const Qv=de({name:"ElTooltip"}),Hv=de({...Qv,props:xv,emits:Fv,setup(e,{expose:o,emit:t}){const s=e;Lv();const a=Ge("tooltip"),c=mo(),i=E(),u=E(),p=()=>{var d;const k=n(i);k&&((d=k.popperInstanceRef)==null||d.update())},y=E(!1),_=E(),{show:v,hide:$,hasUpdateHandler:S}=Tv({indicator:y,toggleReason:_}),{onOpen:m,onClose:r}=kv({showAfter:jt(s,"showAfter"),hideAfter:jt(s,"hideAfter"),autoClose:jt(s,"autoClose"),open:v,close:$}),T=M(()=>Ht(s.visible)&&!S.value),b=M(()=>[a.b(),s.popperClass]);It(Il,{controlled:T,id:c,open:zi(y),trigger:jt(s,"trigger"),onOpen:d=>{m(d)},onClose:d=>{r(d)},onToggle:d=>{n(y)?r(d):m(d)},onShow:()=>{t("show",_.value)},onHide:()=>{t("hide",_.value)},onBeforeShow:()=>{t("before-show",_.value)},onBeforeHide:()=>{t("before-hide",_.value)},updatePopper:p}),me(()=>s.disabled,d=>{d&&y.value&&(y.value=!1)});const C=d=>{var k;return(k=u.value)==null?void 0:k.isFocusInsideContent(d)};return Ni(()=>y.value&&$()),o({popperRef:i,contentRef:u,isFocusInsideContent:C,updatePopper:p,onOpen:m,onClose:r,hide:$}),(d,k)=>(f(),se(n(hv),{ref_key:"popperRef",ref:i,role:d.role},{default:V(()=>[w(Rv,{disabled:d.disabled,trigger:d.trigger,"trigger-keys":d.triggerKeys,"virtual-ref":d.virtualRef,"virtual-triggering":d.virtualTriggering},{default:V(()=>[d.$slots.default?Te(d.$slots,"default",{key:0}):X("v-if",!0)]),_:3},8,["disabled","trigger","trigger-keys","virtual-ref","virtual-triggering"]),w(jv,{ref_key:"contentRef",ref:u,"aria-label":d.ariaLabel,"boundaries-padding":d.boundariesPadding,content:d.content,disabled:d.disabled,effect:d.effect,enterable:d.enterable,"fallback-placements":d.fallbackPlacements,"hide-after":d.hideAfter,"gpu-acceleration":d.gpuAcceleration,offset:d.offset,persistent:d.persistent,"popper-class":n(b),"popper-style":d.popperStyle,placement:d.placement,"popper-options":d.popperOptions,"arrow-offset":d.arrowOffset,pure:d.pure,"raw-content":d.rawContent,"reference-el":d.referenceEl,"trigger-target-el":d.triggerTargetEl,"show-after":d.showAfter,strategy:d.strategy,teleported:d.teleported,transition:d.transition,"virtual-triggering":d.virtualTriggering,"z-index":d.zIndex,"append-to":d.appendTo},{default:V(()=>[Te(d.$slots,"content",{},()=>[d.rawContent?(f(),I("span",{key:0,innerHTML:d.content},null,8,["innerHTML"])):(f(),I("span",{key:1},ie(d.content),1))]),d.showArrow?(f(),se(n(Of),{key:0})):X("v-if",!0)]),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","arrow-offset","pure","raw-content","reference-el","trigger-target-el","show-after","strategy","teleported","transition","virtual-triggering","z-index","append-to"])]),_:3},8,["role"]))}});var Mv=Ye(Hv,[["__file","tooltip.vue"]]);const Yn=yt(Mv),Uv=Ke({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"},showZero:{type:Boolean,default:!0},color:String,badgeStyle:{type:ke([String,Object,Array])},offset:{type:ke(Array),default:[0,0]},badgeClass:{type:String}}),zv=de({name:"ElBadge"}),Nv=de({...zv,props:Uv,setup(e,{expose:o}){const t=e,s=Ge("badge"),a=M(()=>t.isDot?"":vt(t.value)&&vt(t.max)?t.max<t.value?`${t.max}+`:`${t.value}`:`${t.value}`),c=M(()=>{var i,u,p,y,_;return[{backgroundColor:t.color,marginRight:to(-((u=(i=t.offset)==null?void 0:i[0])!=null?u:0)),marginTop:to((y=(p=t.offset)==null?void 0:p[1])!=null?y:0)},(_=t.badgeStyle)!=null?_:{}]});return o({content:a}),(i,u)=>(f(),I("div",{class:N(n(s).b())},[Te(i.$slots,"default"),w(Yt,{name:`${n(s).namespace.value}-zoom-in-center`,persisted:""},{default:V(()=>[qe(l("sup",{class:N([n(s).e("content"),n(s).em("content",i.type),n(s).is("fixed",!!i.$slots.default),n(s).is("dot",i.isDot),n(s).is("hide-zero",!i.showZero&&t.value===0),i.badgeClass]),style:ye(n(c))},[Te(i.$slots,"content",{value:n(a)},()=>[Ie(ie(n(a)),1)])],6),[[pt,!i.hidden&&(n(a)||i.isDot||i.$slots.content)]])]),_:3},8,["name"])],2))}});var Kv=Ye(Nv,[["__file","badge.vue"]]);const Dv=yt(Kv),qn=Symbol("buttonGroupContextKey"),Yo=({from:e,replacement:o,scope:t,version:s,ref:a,type:c="API"},i)=>{me(()=>n(i),u=>{},{immediate:!0})},Xv=(e,o)=>{Yo({from:"type.text",replacement:"link",version:"3.0.0",scope:"props",ref:"https://element-plus.org/en-US/component/button.html#button-attributes"},M(()=>e.type==="text"));const t=De(qn,void 0),s=js("button"),{form:a}=us(),c=go(M(()=>t==null?void 0:t.size)),i=lo(),u=E(),p=Lo(),y=M(()=>e.type||(t==null?void 0:t.type)||""),_=M(()=>{var m,r,T;return(T=(r=e.autoInsertSpace)!=null?r:(m=s.value)==null?void 0:m.autoInsertSpace)!=null?T:!1}),v=M(()=>e.tag==="button"?{ariaDisabled:i.value||e.loading,disabled:i.value||e.loading,autofocus:e.autofocus,type:e.nativeType}:{}),$=M(()=>{var m;const r=(m=p.default)==null?void 0:m.call(p);if(_.value&&(r==null?void 0:r.length)===1){const T=r[0];if((T==null?void 0:T.type)===Ya){const b=T.children;return new RegExp("^\\p{Unified_Ideograph}{2}$","u").test(b.trim())}}return!1});return{_disabled:i,_size:c,_type:y,_ref:u,_props:v,shouldAddSpace:$,handleClick:m=>{if(i.value||e.loading){m.stopPropagation();return}e.nativeType==="reset"&&(a==null||a.resetFields()),o("click",m)}}},Gv=["default","primary","success","warning","info","danger","text",""],Yv=["button","submit","reset"],nl=Ke({size:rs,disabled:Boolean,type:{type:String,values:Gv,default:""},icon:{type:Po},nativeType:{type:String,values:Yv,default:"button"},loading:Boolean,loadingIcon:{type:Po,default:()=>$s},plain:Boolean,text:Boolean,link:Boolean,bg:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean,color:String,dark:Boolean,autoInsertSpace:{type:Boolean,default:void 0},tag:{type:ke([String,Object]),default:"button"}}),qv={click:e=>e instanceof MouseEvent};function Zt(e,o=20){return e.mix("#141414",o).toString()}function Wv(e){const o=lo(),t=Ge("button");return M(()=>{let s={},a=e.color;if(a){const c=a.match(/var\((.*?)\)/);c&&(a=window.getComputedStyle(window.document.documentElement).getPropertyValue(c[1]));const i=new Dr(a),u=e.dark?i.tint(20).toString():Zt(i,20);if(e.plain)s=t.cssVarBlock({"bg-color":e.dark?Zt(i,90):i.tint(90).toString(),"text-color":a,"border-color":e.dark?Zt(i,50):i.tint(50).toString(),"hover-text-color":`var(${t.cssVarName("color-white")})`,"hover-bg-color":a,"hover-border-color":a,"active-bg-color":u,"active-text-color":`var(${t.cssVarName("color-white")})`,"active-border-color":u}),o.value&&(s[t.cssVarBlockName("disabled-bg-color")]=e.dark?Zt(i,90):i.tint(90).toString(),s[t.cssVarBlockName("disabled-text-color")]=e.dark?Zt(i,50):i.tint(50).toString(),s[t.cssVarBlockName("disabled-border-color")]=e.dark?Zt(i,80):i.tint(80).toString());else{const p=e.dark?Zt(i,30):i.tint(30).toString(),y=i.isDark()?`var(${t.cssVarName("color-white")})`:`var(${t.cssVarName("color-black")})`;if(s=t.cssVarBlock({"bg-color":a,"text-color":y,"border-color":a,"hover-bg-color":p,"hover-text-color":y,"hover-border-color":p,"active-bg-color":u,"active-border-color":u}),o.value){const _=e.dark?Zt(i,50):i.tint(50).toString();s[t.cssVarBlockName("disabled-bg-color")]=_,s[t.cssVarBlockName("disabled-text-color")]=e.dark?"rgba(255, 255, 255, 0.5)":`var(${t.cssVarName("color-white")})`,s[t.cssVarBlockName("disabled-border-color")]=_}}}return s})}const Zv=de({name:"ElButton"}),Jv=de({...Zv,props:nl,emits:qv,setup(e,{expose:o,emit:t}){const s=e,a=Wv(s),c=Ge("button"),{_ref:i,_size:u,_type:p,_disabled:y,_props:_,shouldAddSpace:v,handleClick:$}=Xv(s,t),S=M(()=>[c.b(),c.m(p.value),c.m(u.value),c.is("disabled",y.value),c.is("loading",s.loading),c.is("plain",s.plain),c.is("round",s.round),c.is("circle",s.circle),c.is("text",s.text),c.is("link",s.link),c.is("has-bg",s.bg)]);return o({ref:i,size:u,type:p,disabled:y,shouldAddSpace:v}),(m,r)=>(f(),se(nt(m.tag),Et({ref_key:"_ref",ref:i},n(_),{class:n(S),style:n(a),onClick:n($)}),{default:V(()=>[m.loading?(f(),I(Ee,{key:0},[m.$slots.loading?Te(m.$slots,"loading",{key:0}):(f(),se(n(Ne),{key:1,class:N(n(c).is("loading"))},{default:V(()=>[(f(),se(nt(m.loadingIcon)))]),_:1},8,["class"]))],64)):m.icon||m.$slots.icon?(f(),se(n(Ne),{key:1},{default:V(()=>[m.icon?(f(),se(nt(m.icon),{key:0})):Te(m.$slots,"icon",{key:1})]),_:3})):X("v-if",!0),m.$slots.default?(f(),I("span",{key:2,class:N({[n(c).em("text","expand")]:n(v)})},[Te(m.$slots,"default")],2)):X("v-if",!0)]),_:3},16,["class","style","onClick"]))}});var ep=Ye(Jv,[["__file","button.vue"]]);const tp={size:nl.size,type:nl.type},op=de({name:"ElButtonGroup"}),sp=de({...op,props:tp,setup(e){const o=e;It(qn,Be({size:jt(o,"size"),type:jt(o,"type")}));const t=Ge("button");return(s,a)=>(f(),I("div",{class:N(n(t).b("group"))},[Te(s.$slots,"default")],2))}});var Wn=Ye(sp,[["__file","button-group.vue"]]);const ao=yt(ep,{ButtonGroup:Wn});Qs(Wn);var _s=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(_s||{});const Zn={modelValue:{type:[Number,String,Boolean],default:void 0},label:{type:[String,Boolean,Number,Object],default:void 0},value:{type:[String,Boolean,Number,Object],default:void 0},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:{type:String,default:void 0},trueValue:{type:[String,Number],default:void 0},falseValue:{type:[String,Number],default:void 0},trueLabel:{type:[String,Number],default:void 0},falseLabel:{type:[String,Number],default:void 0},id:{type:String,default:void 0},border:Boolean,size:rs,tabindex:[String,Number],validateEvent:{type:Boolean,default:!0},...cs(["ariaControls"])},Jn={[Gt]:e=>it(e)||vt(e)||Ht(e),change:e=>it(e)||vt(e)||Ht(e)},Ao=Symbol("checkboxGroupContextKey"),lp=({model:e,isChecked:o})=>{const t=De(Ao,void 0),s=M(()=>{var c,i;const u=(c=t==null?void 0:t.max)==null?void 0:c.value,p=(i=t==null?void 0:t.min)==null?void 0:i.value;return!Wo(u)&&e.value.length>=u&&!o.value||!Wo(p)&&e.value.length<=p&&o.value});return{isDisabled:lo(M(()=>(t==null?void 0:t.disabled.value)||s.value)),isLimitDisabled:s}},ap=(e,{model:o,isLimitExceeded:t,hasOwnLabel:s,isDisabled:a,isLabeledByFormItem:c})=>{const i=De(Ao,void 0),{formItem:u}=us(),{emit:p}=Tt();function y(m){var r,T,b,C;return[!0,e.trueValue,e.trueLabel].includes(m)?(T=(r=e.trueValue)!=null?r:e.trueLabel)!=null?T:!0:(C=(b=e.falseValue)!=null?b:e.falseLabel)!=null?C:!1}function _(m,r){p(Zo,y(m),r)}function v(m){if(t.value)return;const r=m.target;p(Zo,y(r.checked),m)}async function $(m){t.value||!s.value&&!a.value&&c.value&&(m.composedPath().some(b=>b.tagName==="LABEL")||(o.value=y([!1,e.falseValue,e.falseLabel].includes(o.value)),await Ae(),_(o.value,m)))}const S=M(()=>(i==null?void 0:i.validateEvent)||e.validateEvent);return me(()=>e.modelValue,()=>{S.value&&(u==null||u.validate("change").catch(m=>void 0))}),{handleChange:v,onClickRoot:$}},np=e=>{const o=E(!1),{emit:t}=Tt(),s=De(Ao,void 0),a=M(()=>Wo(s)===!1),c=E(!1),i=M({get(){var u,p;return a.value?(u=s==null?void 0:s.modelValue)==null?void 0:u.value:(p=e.modelValue)!=null?p:o.value},set(u){var p,y;a.value&&Vt(u)?(c.value=((p=s==null?void 0:s.max)==null?void 0:p.value)!==void 0&&u.length>(s==null?void 0:s.max.value)&&u.length>i.value.length,c.value===!1&&((y=s==null?void 0:s.changeEvent)==null||y.call(s,u))):(t(Gt,u),o.value=u)}});return{model:i,isGroup:a,isLimitExceeded:c}},ip=(e,o,{model:t})=>{const s=De(Ao,void 0),a=E(!1),c=M(()=>sl(e.value)?e.label:e.value),i=M(()=>{const _=t.value;return Ht(_)?_:Vt(_)?Qt(c.value)?_.map(ea).some(v=>vn(v,c.value)):_.map(ea).includes(c.value):_!=null?_===e.trueValue||_===e.trueLabel:!!_}),u=go(M(()=>{var _;return(_=s==null?void 0:s.size)==null?void 0:_.value}),{prop:!0}),p=go(M(()=>{var _;return(_=s==null?void 0:s.size)==null?void 0:_.value})),y=M(()=>!!o.default||!sl(c.value));return{checkboxButtonSize:u,isChecked:i,isFocused:a,checkboxSize:p,hasOwnLabel:y,actualValue:c}},ei=(e,o)=>{const{formItem:t}=us(),{model:s,isGroup:a,isLimitExceeded:c}=np(e),{isFocused:i,isChecked:u,checkboxButtonSize:p,checkboxSize:y,hasOwnLabel:_,actualValue:v}=ip(e,o,{model:s}),{isDisabled:$}=lp({model:s,isChecked:u}),{inputId:S,isLabeledByFormItem:m}=kl(e,{formItemContext:t,disableIdGeneration:_,disableIdManagement:a}),{handleChange:r,onClickRoot:T}=ap(e,{model:s,isLimitExceeded:c,hasOwnLabel:_,isDisabled:$,isLabeledByFormItem:m});return(()=>{function C(){var d,k;Vt(s.value)&&!s.value.includes(v.value)?s.value.push(v.value):s.value=(k=(d=e.trueValue)!=null?d:e.trueLabel)!=null?k:!0}e.checked&&C()})(),Yo({from:"label act as value",replacement:"value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},M(()=>a.value&&sl(e.value))),Yo({from:"true-label",replacement:"true-value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},M(()=>!!e.trueLabel)),Yo({from:"false-label",replacement:"false-value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},M(()=>!!e.falseLabel)),{inputId:S,isLabeledByFormItem:m,isChecked:u,isDisabled:$,isFocused:i,checkboxButtonSize:p,checkboxSize:y,hasOwnLabel:_,model:s,actualValue:v,handleChange:r,onClickRoot:T}},rp=de({name:"ElCheckbox"}),cp=de({...rp,props:Zn,emits:Jn,setup(e){const o=e,t=Lo(),{inputId:s,isLabeledByFormItem:a,isChecked:c,isDisabled:i,isFocused:u,checkboxSize:p,hasOwnLabel:y,model:_,actualValue:v,handleChange:$,onClickRoot:S}=ei(o,t),m=Ge("checkbox"),r=M(()=>[m.b(),m.m(p.value),m.is("disabled",i.value),m.is("bordered",o.border),m.is("checked",c.value)]),T=M(()=>[m.e("input"),m.is("disabled",i.value),m.is("checked",c.value),m.is("indeterminate",o.indeterminate),m.is("focus",u.value)]);return(b,C)=>(f(),se(nt(!n(y)&&n(a)?"span":"label"),{class:N(n(r)),"aria-controls":b.indeterminate?b.ariaControls:null,onClick:n(S)},{default:V(()=>{var d,k,g,h;return[l("span",{class:N(n(T))},[b.trueValue||b.falseValue||b.trueLabel||b.falseLabel?qe((f(),I("input",{key:0,id:n(s),"onUpdate:modelValue":x=>fo(_)?_.value=x:null,class:N(n(m).e("original")),type:"checkbox",indeterminate:b.indeterminate,name:b.name,tabindex:b.tabindex,disabled:n(i),"true-value":(k=(d=b.trueValue)!=null?d:b.trueLabel)!=null?k:!0,"false-value":(h=(g=b.falseValue)!=null?g:b.falseLabel)!=null?h:!1,onChange:n($),onFocus:x=>u.value=!0,onBlur:x=>u.value=!1,onClick:Re(()=>{},["stop"])},null,42,["id","onUpdate:modelValue","indeterminate","name","tabindex","disabled","true-value","false-value","onChange","onFocus","onBlur","onClick"])),[[Fs,n(_)]]):qe((f(),I("input",{key:1,id:n(s),"onUpdate:modelValue":x=>fo(_)?_.value=x:null,class:N(n(m).e("original")),type:"checkbox",indeterminate:b.indeterminate,disabled:n(i),value:n(v),name:b.name,tabindex:b.tabindex,onChange:n($),onFocus:x=>u.value=!0,onBlur:x=>u.value=!1,onClick:Re(()=>{},["stop"])},null,42,["id","onUpdate:modelValue","indeterminate","disabled","value","name","tabindex","onChange","onFocus","onBlur","onClick"])),[[Fs,n(_)]]),l("span",{class:N(n(m).e("inner"))},null,2)],2),n(y)?(f(),I("span",{key:0,class:N(n(m).e("label"))},[Te(b.$slots,"default"),b.$slots.default?X("v-if",!0):(f(),I(Ee,{key:0},[Ie(ie(b.label),1)],64))],2)):X("v-if",!0)]}),_:3},8,["class","aria-controls","onClick"]))}});var up=Ye(cp,[["__file","checkbox.vue"]]);const dp=de({name:"ElCheckboxButton"}),fp=de({...dp,props:Zn,emits:Jn,setup(e){const o=e,t=Lo(),{isFocused:s,isChecked:a,isDisabled:c,checkboxButtonSize:i,model:u,actualValue:p,handleChange:y}=ei(o,t),_=De(Ao,void 0),v=Ge("checkbox"),$=M(()=>{var m,r,T,b;const C=(r=(m=_==null?void 0:_.fill)==null?void 0:m.value)!=null?r:"";return{backgroundColor:C,borderColor:C,color:(b=(T=_==null?void 0:_.textColor)==null?void 0:T.value)!=null?b:"",boxShadow:C?`-1px 0 0 0 ${C}`:void 0}}),S=M(()=>[v.b("button"),v.bm("button",i.value),v.is("disabled",c.value),v.is("checked",a.value),v.is("focus",s.value)]);return(m,r)=>{var T,b,C,d;return f(),I("label",{class:N(n(S))},[m.trueValue||m.falseValue||m.trueLabel||m.falseLabel?qe((f(),I("input",{key:0,"onUpdate:modelValue":k=>fo(u)?u.value=k:null,class:N(n(v).be("button","original")),type:"checkbox",name:m.name,tabindex:m.tabindex,disabled:n(c),"true-value":(b=(T=m.trueValue)!=null?T:m.trueLabel)!=null?b:!0,"false-value":(d=(C=m.falseValue)!=null?C:m.falseLabel)!=null?d:!1,onChange:n(y),onFocus:k=>s.value=!0,onBlur:k=>s.value=!1,onClick:Re(()=>{},["stop"])},null,42,["onUpdate:modelValue","name","tabindex","disabled","true-value","false-value","onChange","onFocus","onBlur","onClick"])),[[Fs,n(u)]]):qe((f(),I("input",{key:1,"onUpdate:modelValue":k=>fo(u)?u.value=k:null,class:N(n(v).be("button","original")),type:"checkbox",name:m.name,tabindex:m.tabindex,disabled:n(c),value:n(p),onChange:n(y),onFocus:k=>s.value=!0,onBlur:k=>s.value=!1,onClick:Re(()=>{},["stop"])},null,42,["onUpdate:modelValue","name","tabindex","disabled","value","onChange","onFocus","onBlur","onClick"])),[[Fs,n(u)]]),m.$slots.default||m.label?(f(),I("span",{key:2,class:N(n(v).be("button","inner")),style:ye(n(a)?n($):void 0)},[Te(m.$slots,"default",{},()=>[Ie(ie(m.label),1)])],6)):X("v-if",!0)],2)}}});var ti=Ye(fp,[["__file","checkbox-button.vue"]]);const vp=Ke({modelValue:{type:ke(Array),default:()=>[]},disabled:Boolean,min:Number,max:Number,size:rs,fill:String,textColor:String,tag:{type:String,default:"div"},validateEvent:{type:Boolean,default:!0},...cs(["ariaLabel"])}),pp={[Gt]:e=>Vt(e),change:e=>Vt(e)},mp=de({name:"ElCheckboxGroup"}),gp=de({...mp,props:vp,emits:pp,setup(e,{emit:o}){const t=e,s=Ge("checkbox"),{formItem:a}=us(),{inputId:c,isLabeledByFormItem:i}=kl(t,{formItemContext:a}),u=async y=>{o(Gt,y),await Ae(),o(Zo,y)},p=M({get(){return t.modelValue},set(y){u(y)}});return It(Ao,{...pn(ts(t),["size","min","max","disabled","validateEvent","fill","textColor"]),modelValue:p,changeEvent:u}),me(()=>t.modelValue,()=>{t.validateEvent&&(a==null||a.validate("change").catch(y=>void 0))}),(y,_)=>{var v;return f(),se(nt(y.tag),{id:n(c),class:N(n(s).b("group")),role:"group","aria-label":n(i)?void 0:y.ariaLabel||"checkbox-group","aria-labelledby":n(i)?(v=n(a))==null?void 0:v.labelId:void 0},{default:V(()=>[Te(y.$slots,"default")]),_:3},8,["id","class","aria-label","aria-labelledby"])}}});var oi=Ye(gp,[["__file","checkbox-group.vue"]]);const Fl=yt(up,{CheckboxButton:ti,CheckboxGroup:oi});Qs(ti);const Sl=Qs(oi),hp=Ke({type:{type:String,values:["primary","success","info","warning","danger"],default:"primary"},closable:Boolean,disableTransitions:Boolean,hit:Boolean,color:String,size:{type:String,values:is},effect:{type:String,values:["dark","light","plain"],default:"light"},round:Boolean}),yp={close:e=>e instanceof MouseEvent,click:e=>e instanceof MouseEvent},kp=de({name:"ElTag"}),bp=de({...kp,props:hp,emits:yp,setup(e,{emit:o}){const t=e,s=go(),a=Ge("tag"),c=M(()=>{const{type:y,hit:_,effect:v,closable:$,round:S}=t;return[a.b(),a.is("closable",$),a.m(y||"primary"),a.m(s.value),a.m(v),a.is("hit",_),a.is("round",S)]}),i=y=>{o("close",y)},u=y=>{o("click",y)},p=y=>{var _,v,$;($=(v=(_=y==null?void 0:y.component)==null?void 0:_.subTree)==null?void 0:v.component)!=null&&$.bum&&(y.component.subTree.component.bum=null)};return(y,_)=>y.disableTransitions?(f(),I("span",{key:0,class:N(n(c)),style:ye({backgroundColor:y.color}),onClick:u},[l("span",{class:N(n(a).e("content"))},[Te(y.$slots,"default")],2),y.closable?(f(),se(n(Ne),{key:0,class:N(n(a).e("close")),onClick:Re(i,["stop"])},{default:V(()=>[w(n(ht))]),_:1},8,["class","onClick"])):X("v-if",!0)],6)):(f(),se(Yt,{key:1,name:`${n(a).namespace.value}-zoom-in-center`,appear:"",onVnodeMounted:p},{default:V(()=>[l("span",{class:N(n(c)),style:ye({backgroundColor:y.color}),onClick:u},[l("span",{class:N(n(a).e("content"))},[Te(y.$slots,"default")],2),y.closable?(f(),se(n(Ne),{key:0,class:N(n(a).e("close")),onClick:Re(i,["stop"])},{default:V(()=>[w(n(ht))]),_:1},8,["class","onClick"])):X("v-if",!0)],6)]),_:3},8,["name"]))}});var Cp=Ye(bp,[["__file","tag.vue"]]);const El=yt(Cp),_p=(e,o)=>{if(!et||!e||!o)return!1;const t=e.getBoundingClientRect();let s;return o instanceof Element?s=o.getBoundingClientRect():s={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},t.top<s.bottom&&t.bottom>s.top&&t.right>s.left&&t.left<s.right};Ke({a11y:{type:Boolean,default:!0},locale:{type:ke(Object)},size:rs,button:{type:ke(Object)},experimentalFeatures:{type:ke(Object)},keyboardNavigation:{type:Boolean,default:!0},message:{type:ke(Object)},zIndex:Number,namespace:{type:String,default:"el"},...pd});const Bt={},$l=e=>{if(!e)return{onClick:tt,onMousedown:tt,onMouseup:tt};let o=!1,t=!1;return{onClick:i=>{o&&t&&e(i),o=t=!1},onMousedown:i=>{o=i.target===i.currentTarget},onMouseup:i=>{t=i.target===i.currentTarget}}},wp=Ke({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:ke([String,Array,Object])},zIndex:{type:ke([String,Number])}}),Ip={click:e=>e instanceof MouseEvent},Tp="overlay";var xp=de({name:"ElOverlay",props:wp,emits:Ip,setup(e,{slots:o,emit:t}){const s=Ge(Tp),a=p=>{t("click",p)},{onClick:c,onMousedown:i,onMouseup:u}=$l(e.customMaskEvent?void 0:a);return()=>e.mask?w("div",{class:[s.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:c,onMousedown:i,onMouseup:u},[Te(o,"default")],_s.STYLE|_s.CLASS|_s.PROPS,["onClick","onMouseup","onMousedown"]):Fo("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[Te(o,"default")])}});const si=xp,li=Symbol("dialogInjectionKey"),ai=Ke({center:Boolean,alignCenter:Boolean,closeIcon:{type:Po},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,headerClass:String,bodyClass:String,footerClass:String,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),Fp={close:()=>!0},ni=(e,o,t,s)=>{const a={offsetX:0,offsetY:0},c=(v,$)=>{if(e.value){const{offsetX:S,offsetY:m}=a,r=e.value.getBoundingClientRect(),T=r.left,b=r.top,C=r.width,d=r.height,k=document.documentElement.clientWidth,g=document.documentElement.clientHeight,h=-T+S,x=-b+m,R=k-T-C+S,j=g-b-d+m;s!=null&&s.value||(v=Math.min(Math.max(v,h),R),$=Math.min(Math.max($,x),j)),a.offsetX=v,a.offsetY=$,e.value.style.transform=`translate(${to(v)}, ${to($)})`}},i=v=>{const $=v.clientX,S=v.clientY,{offsetX:m,offsetY:r}=a,T=C=>{const d=m+C.clientX-$,k=r+C.clientY-S;c(d,k)},b=()=>{document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",b)};document.addEventListener("mousemove",T),document.addEventListener("mouseup",b)},u=()=>{o.value&&e.value&&(o.value.addEventListener("mousedown",i),window.addEventListener("resize",_))},p=()=>{o.value&&e.value&&(o.value.removeEventListener("mousedown",i),window.removeEventListener("resize",_))},y=()=>{a.offsetX=0,a.offsetY=0,e.value&&(e.value.style.transform="")},_=()=>{const{offsetX:v,offsetY:$}=a;c(v,$)};return Le(()=>{Ji(()=>{t.value?u():p()})}),ut(()=>{p()}),{resetPosition:y,updatePosition:_}},Sp=(...e)=>o=>{e.forEach(t=>{ft(t)?t(o):t.value=o})},Ep=de({name:"ElDialogContent"}),$p=de({...Ep,props:ai,emits:Fp,setup(e,{expose:o}){const t=e,{t:s}=ns(),{Close:a}=nf,{dialogRef:c,headerRef:i,bodyId:u,ns:p,style:y}=De(li),{focusTrapRef:_}=De(Un),v=M(()=>[p.b(),p.is("fullscreen",t.fullscreen),p.is("draggable",t.draggable),p.is("align-center",t.alignCenter),{[p.m("center")]:t.center}]),$=Sp(_,c),S=M(()=>t.draggable),m=M(()=>t.overflow),{resetPosition:r,updatePosition:T}=ni(c,i,S,m);return o({resetPosition:r,updatePosition:T}),(b,C)=>(f(),I("div",{ref:n($),class:N(n(v)),style:ye(n(y)),tabindex:"-1"},[l("header",{ref_key:"headerRef",ref:i,class:N([n(p).e("header"),b.headerClass,{"show-close":b.showClose}])},[Te(b.$slots,"header",{},()=>[l("span",{role:"heading","aria-level":b.ariaLevel,class:N(n(p).e("title"))},ie(b.title),11,["aria-level"])]),b.showClose?(f(),I("button",{key:0,"aria-label":n(s)("el.dialog.close"),class:N(n(p).e("headerbtn")),type:"button",onClick:d=>b.$emit("close")},[w(n(Ne),{class:N(n(p).e("close"))},{default:V(()=>[(f(),se(nt(b.closeIcon||n(a))))]),_:1},8,["class"])],10,["aria-label","onClick"])):X("v-if",!0)],2),l("div",{id:n(u),class:N([n(p).e("body"),b.bodyClass])},[Te(b.$slots,"default")],10,["id"]),b.$slots.footer?(f(),I("footer",{key:0,class:N([n(p).e("footer"),b.footerClass])},[Te(b.$slots,"footer")],2)):X("v-if",!0)],6))}});var Rp=Ye($p,[["__file","dialog-content.vue"]]);const Pp=Ke({...ai,appendToBody:Boolean,appendTo:{type:Tl.to.type,default:"body"},beforeClose:{type:ke(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,headerClass:String,bodyClass:String,footerClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"}}),Op={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[Gt]:e=>Ht(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},ii=(e,o={})=>{fo(e)||as("[useLockscreen]","You need to pass a ref param to this function");const t=o.ns||Ge("popup"),s=M(()=>t.bm("parent","hidden"));if(!et||ma(document.body,s.value))return;let a=0,c=!1,i="0";const u=()=>{setTimeout(()=>{typeof document>"u"||c&&document&&(document.body.style.width=i,Jo(document.body,s.value))},200)};me(e,p=>{if(!p){u();return}c=!ma(document.body,s.value),c&&(i=document.body.style.width,al(document.body,s.value)),a=bd(t.namespace.value);const y=document.documentElement.clientHeight<document.body.scrollHeight,_=io(document.body,"overflowY");a>0&&(y||_==="scroll")&&c&&(document.body.style.width=`calc(100% - ${a}px)`)}),Yi(()=>u())},Vp=(e,o)=>{var t;const a=Tt().emit,{nextZIndex:c}=Bs();let i="";const u=mo(),p=mo(),y=E(!1),_=E(!1),v=E(!1),$=E((t=e.zIndex)!=null?t:c());let S,m;const r=js("namespace",Go),T=M(()=>{const Q={},P=`--${r.value}-dialog`;return e.fullscreen||(e.top&&(Q[`${P}-margin-top`]=e.top),e.width&&(Q[`${P}-width`]=to(e.width))),Q}),b=M(()=>e.alignCenter?{display:"flex"}:{});function C(){a("opened")}function d(){a("closed"),a(Gt,!1),e.destroyOnClose&&(v.value=!1)}function k(){a("close")}function g(){m==null||m(),S==null||S(),e.openDelay&&e.openDelay>0?{stop:S}=el(()=>j(),e.openDelay):j()}function h(){S==null||S(),m==null||m(),e.closeDelay&&e.closeDelay>0?{stop:m}=el(()=>F(),e.closeDelay):F()}function x(){function Q(P){P||(_.value=!0,y.value=!1)}e.beforeClose?e.beforeClose(Q):h()}function R(){e.closeOnClickModal&&x()}function j(){et&&(y.value=!0)}function F(){y.value=!1}function B(){a("openAutoFocus")}function Y(){a("closeAutoFocus")}function D(Q){var P;((P=Q.detail)==null?void 0:P.focusReason)==="pointer"&&Q.preventDefault()}e.lockScroll&&ii(y);function Z(){e.closeOnPressEscape&&x()}return me(()=>e.modelValue,Q=>{Q?(_.value=!1,g(),v.value=!0,$.value=mn(e.zIndex)?c():$.value++,Ae(()=>{a("open"),o.value&&(o.value.parentElement.scrollTop=0,o.value.parentElement.scrollLeft=0,o.value.scrollTop=0)})):y.value&&h()}),me(()=>e.fullscreen,Q=>{o.value&&(Q?(i=o.value.style.transform,o.value.style.transform=""):o.value.style.transform=i)}),Le(()=>{e.modelValue&&(y.value=!0,v.value=!0,g())}),{afterEnter:C,afterLeave:d,beforeLeave:k,handleClose:x,onModalClick:R,close:h,doClose:F,onOpenAutoFocus:B,onCloseAutoFocus:Y,onCloseRequested:Z,onFocusoutPrevented:D,titleId:u,bodyId:p,closed:_,style:T,overlayDialogStyle:b,rendered:v,visible:y,zIndex:$}},Lp=de({name:"ElDialog",inheritAttrs:!1}),Bp=de({...Lp,props:Pp,emits:Op,setup(e,{expose:o}){const t=e,s=Lo();Yo({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},M(()=>!!s.title));const a=Ge("dialog"),c=E(),i=E(),u=E(),{visible:p,titleId:y,bodyId:_,style:v,overlayDialogStyle:$,rendered:S,zIndex:m,afterEnter:r,afterLeave:T,beforeLeave:b,handleClose:C,onModalClick:d,onOpenAutoFocus:k,onCloseAutoFocus:g,onCloseRequested:h,onFocusoutPrevented:x}=Vp(t,c);It(li,{dialogRef:c,headerRef:i,bodyId:_,ns:a,rendered:S,style:v});const R=$l(d),j=M(()=>t.draggable&&!t.fullscreen);return o({visible:p,dialogContentRef:u,resetPosition:()=>{var B;(B=u.value)==null||B.resetPosition()},handleClose:C}),(B,Y)=>(f(),se(n(xl),{to:B.appendTo,disabled:B.appendTo!=="body"?!1:!B.appendToBody},{default:V(()=>[w(Yt,{name:"dialog-fade",onAfterEnter:n(r),onAfterLeave:n(T),onBeforeLeave:n(b),persisted:""},{default:V(()=>[qe(w(n(si),{"custom-mask-event":"",mask:B.modal,"overlay-class":B.modalClass,"z-index":n(m)},{default:V(()=>[l("div",{role:"dialog","aria-modal":"true","aria-label":B.title||void 0,"aria-labelledby":B.title?void 0:n(y),"aria-describedby":n(_),class:N(`${n(a).namespace.value}-overlay-dialog`),style:ye(n($)),onClick:n(R).onClick,onMousedown:n(R).onMousedown,onMouseup:n(R).onMouseup},[w(n(Us),{loop:"",trapped:n(p),"focus-start-el":"container",onFocusAfterTrapped:n(k),onFocusAfterReleased:n(g),onFocusoutPrevented:n(x),onReleaseRequested:n(h)},{default:V(()=>[n(S)?(f(),se(Rp,Et({key:0,ref_key:"dialogContentRef",ref:u},B.$attrs,{center:B.center,"align-center":B.alignCenter,"close-icon":B.closeIcon,draggable:n(j),overflow:B.overflow,fullscreen:B.fullscreen,"header-class":B.headerClass,"body-class":B.bodyClass,"footer-class":B.footerClass,"show-close":B.showClose,title:B.title,"aria-level":B.headerAriaLevel,onClose:n(C)}),Ts({header:V(()=>[B.$slots.title?Te(B.$slots,"title",{key:1}):Te(B.$slots,"header",{key:0,close:n(C),titleId:n(y),titleClass:n(a).e("title")})]),default:V(()=>[Te(B.$slots,"default")]),_:2},[B.$slots.footer?{name:"footer",fn:V(()=>[Te(B.$slots,"footer")])}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","header-class","body-class","footer-class","show-close","title","aria-level","onClose"])):X("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,["aria-label","aria-labelledby","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["mask","overlay-class","z-index"]),[[pt,n(p)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}});var Ap=Ye(Bp,[["__file","dialog.vue"]]);const ds=yt(Ap),jp=Ke({size:{type:String,values:is},disabled:Boolean}),Qp=Ke({...jp,model:Object,rules:{type:ke(Object)},labelPosition:{type:String,values:["left","right","top"],default:"right"},requireAsteriskPosition:{type:String,values:["left","right"],default:"left"},labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:Boolean,scrollToError:Boolean,scrollIntoViewOptions:{type:[Object,Boolean]}}),Hp={validate:(e,o,t)=>(Vt(e)||it(e))&&Ht(o)&&it(t)};function Mp(){const e=E([]),o=M(()=>{if(!e.value.length)return"0";const c=Math.max(...e.value);return c?`${c}px`:""});function t(c){const i=e.value.indexOf(c);return i===-1&&o.value,i}function s(c,i){if(c&&i){const u=t(i);e.value.splice(u,1,c)}else c&&e.value.push(c)}function a(c){const i=t(c);i>-1&&e.value.splice(i,1)}return{autoLabelWidth:o,registerLabelWidth:s,deregisterLabelWidth:a}}const ks=(e,o)=>{const t=tl(o);return t.length>0?e.filter(s=>s.prop&&t.includes(s.prop)):e},Up="ElForm",zp=de({name:Up}),Np=de({...zp,props:Qp,emits:Hp,setup(e,{expose:o,emit:t}){const s=e,a=Be([]),c=go(),i=Ge("form"),u=M(()=>{const{labelPosition:d,inline:k}=s;return[i.b(),i.m(c.value||"default"),{[i.m(`label-${d}`)]:d,[i.m("inline")]:k}]}),p=d=>a.find(k=>k.prop===d),y=d=>{a.push(d)},_=d=>{d.prop&&a.splice(a.indexOf(d),1)},v=(d=[])=>{s.model&&ks(a,d).forEach(k=>k.resetField())},$=(d=[])=>{ks(a,d).forEach(k=>k.clearValidate())},S=M(()=>!!s.model),m=d=>{if(a.length===0)return[];const k=ks(a,d);return k.length?k:[]},r=async d=>b(void 0,d),T=async(d=[])=>{if(!S.value)return!1;const k=m(d);if(k.length===0)return!0;let g={};for(const h of k)try{await h.validate(""),h.validateState==="error"&&h.resetField()}catch(x){g={...g,...x}}return Object.keys(g).length===0?!0:Promise.reject(g)},b=async(d=[],k)=>{const g=!ft(k);try{const h=await T(d);return h===!0&&await(k==null?void 0:k(h)),h}catch(h){if(h instanceof Error)throw h;const x=h;return s.scrollToError&&C(Object.keys(x)[0]),await(k==null?void 0:k(!1,x)),g&&Promise.reject(x)}},C=d=>{var k;const g=ks(a,d)[0];g&&((k=g.$el)==null||k.scrollIntoView(s.scrollIntoViewOptions))};return me(()=>s.rules,()=>{s.validateOnRuleChange&&r().catch(d=>void 0)},{deep:!0,flush:"post"}),It(Bo,Be({...ts(s),emit:t,resetFields:v,clearValidate:$,validateField:b,getField:p,addField:y,removeField:_,...Mp()})),o({validate:r,validateField:b,resetFields:v,clearValidate:$,scrollToField:C,fields:a}),(d,k)=>(f(),I("form",{class:N(n(u))},[Te(d.$slots,"default")],2))}});var Kp=Ye(Np,[["__file","form.vue"]]);const Dp=["","error","validating","success"],Xp=Ke({label:String,labelWidth:{type:[String,Number],default:""},labelPosition:{type:String,values:["left","right","top",""],default:""},prop:{type:ke([String,Array])},required:{type:Boolean,default:void 0},rules:{type:ke([Object,Array])},error:String,validateStatus:{type:String,values:Dp},for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,values:is}}),$a="ElLabelWrap";var Gp=de({name:$a,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(e,{slots:o}){const t=De(Bo,void 0),s=De(po);s||as($a,"usage: <el-form-item><label-wrap /></el-form-item>");const a=Ge("form"),c=E(),i=E(0),u=()=>{var _;if((_=c.value)!=null&&_.firstElementChild){const v=window.getComputedStyle(c.value.firstElementChild).width;return Math.ceil(Number.parseFloat(v))}else return 0},p=(_="update")=>{Ae(()=>{o.default&&e.isAutoWidth&&(_==="update"?i.value=u():_==="remove"&&(t==null||t.deregisterLabelWidth(i.value)))})},y=()=>p("update");return Le(()=>{y()}),ut(()=>{p("remove")}),Ki(()=>y()),me(i,(_,v)=>{e.updateAll&&(t==null||t.registerLabelWidth(_,v))}),cl(M(()=>{var _,v;return(v=(_=c.value)==null?void 0:_.firstElementChild)!=null?v:null}),y),()=>{var _,v;if(!o)return null;const{isAutoWidth:$}=e;if($){const S=t==null?void 0:t.autoLabelWidth,m=s==null?void 0:s.hasLabel,r={};if(m&&S&&S!=="auto"){const T=Math.max(0,Number.parseInt(S,10)-i.value),C=(s.labelPosition||t.labelPosition)==="left"?"marginRight":"marginLeft";T&&(r[C]=`${T}px`)}return w("div",{ref:c,class:[a.be("item","label-wrap")],style:r},[(_=o.default)==null?void 0:_.call(o)])}else return w(Ee,{ref:c},[(v=o.default)==null?void 0:v.call(o)])}}});const Yp=de({name:"ElFormItem"}),qp=de({...Yp,props:Xp,setup(e,{expose:o}){const t=e,s=Lo(),a=De(Bo,void 0),c=De(po,void 0),i=go(void 0,{formItem:!1}),u=Ge("form-item"),p=mo().value,y=E([]),_=E(""),v=Mi(_,100),$=E(""),S=E();let m,r=!1;const T=M(()=>t.labelPosition||(a==null?void 0:a.labelPosition)),b=M(()=>{if(T.value==="top")return{};const A=to(t.labelWidth||(a==null?void 0:a.labelWidth)||"");return A?{width:A}:{}}),C=M(()=>{if(T.value==="top"||a!=null&&a.inline)return{};if(!t.label&&!t.labelWidth&&F)return{};const A=to(t.labelWidth||(a==null?void 0:a.labelWidth)||"");return!t.label&&!s.label?{marginLeft:A}:{}}),d=M(()=>[u.b(),u.m(i.value),u.is("error",_.value==="error"),u.is("validating",_.value==="validating"),u.is("success",_.value==="success"),u.is("required",Q.value||t.required),u.is("no-asterisk",a==null?void 0:a.hideRequiredAsterisk),(a==null?void 0:a.requireAsteriskPosition)==="right"?"asterisk-right":"asterisk-left",{[u.m("feedback")]:a==null?void 0:a.statusIcon,[u.m(`label-${T.value}`)]:T.value}]),k=M(()=>Ht(t.inlineMessage)?t.inlineMessage:(a==null?void 0:a.inlineMessage)||!1),g=M(()=>[u.e("error"),{[u.em("error","inline")]:k.value}]),h=M(()=>t.prop?it(t.prop)?t.prop:t.prop.join("."):""),x=M(()=>!!(t.label||s.label)),R=M(()=>t.for||(y.value.length===1?y.value[0]:void 0)),j=M(()=>!R.value&&x.value),F=!!c,B=M(()=>{const A=a==null?void 0:a.model;if(!(!A||!t.prop))return Ys(A,t.prop).value}),Y=M(()=>{const{required:A}=t,K=[];t.rules&&K.push(...tl(t.rules));const J=a==null?void 0:a.rules;if(J&&t.prop){const ce=Ys(J,t.prop).value;ce&&K.push(...tl(ce))}if(A!==void 0){const ce=K.map((pe,ve)=>[pe,ve]).filter(([pe])=>Object.keys(pe).includes("required"));if(ce.length>0)for(const[pe,ve]of ce)pe.required!==A&&(K[ve]={...pe,required:A});else K.push({required:A})}return K}),D=M(()=>Y.value.length>0),Z=A=>Y.value.filter(J=>!J.trigger||!A?!0:Vt(J.trigger)?J.trigger.includes(A):J.trigger===A).map(({trigger:J,...ce})=>ce),Q=M(()=>Y.value.some(A=>A.required)),P=M(()=>{var A;return v.value==="error"&&t.showMessage&&((A=a==null?void 0:a.showMessage)!=null?A:!0)}),O=M(()=>`${t.label||""}${(a==null?void 0:a.labelSuffix)||""}`),U=A=>{_.value=A},ae=A=>{var K,J;const{errors:ce,fields:pe}=A;(!ce||!pe)&&console.error(A),U("error"),$.value=ce?(J=(K=ce==null?void 0:ce[0])==null?void 0:K.message)!=null?J:`${t.prop} is required`:"",a==null||a.emit("validate",t.prop,!1,$.value)},ue=()=>{U("success"),a==null||a.emit("validate",t.prop,!0,"")},oe=async A=>{const K=h.value;return new Nr({[K]:A}).validate({[K]:B.value},{firstFields:!0}).then(()=>(ue(),!0)).catch(ce=>(ae(ce),Promise.reject(ce)))},H=async(A,K)=>{if(r||!t.prop)return!1;const J=ft(K);if(!D.value)return K==null||K(!1),!1;const ce=Z(A);return ce.length===0?(K==null||K(!0),!0):(U("validating"),oe(ce).then(()=>(K==null||K(!0),!0)).catch(pe=>{const{fields:ve}=pe;return K==null||K(!1,ve),J?!1:Promise.reject(ve)}))},re=()=>{U(""),$.value="",r=!1},G=async()=>{const A=a==null?void 0:a.model;if(!A||!t.prop)return;const K=Ys(A,t.prop);r=!0,K.value=aa(m),await Ae(),re(),r=!1},L=A=>{y.value.includes(A)||y.value.push(A)},ne=A=>{y.value=y.value.filter(K=>K!==A)};me(()=>t.error,A=>{$.value=A||"",U(A?"error":"")},{immediate:!0}),me(()=>t.validateStatus,A=>U(A||""));const fe=Be({...ts(t),$el:S,size:i,validateState:_,labelId:p,inputIds:y,isGroup:j,hasLabel:x,fieldValue:B,addInputId:L,removeInputId:ne,resetField:G,clearValidate:re,validate:H});return It(po,fe),Le(()=>{t.prop&&(a==null||a.addField(fe),m=aa(B.value))}),ut(()=>{a==null||a.removeField(fe)}),o({size:i,validateMessage:$,validateState:_,validate:H,clearValidate:re,resetField:G}),(A,K)=>{var J;return f(),I("div",{ref_key:"formItemRef",ref:S,class:N(n(d)),role:n(j)?"group":void 0,"aria-labelledby":n(j)?n(p):void 0},[w(n(Gp),{"is-auto-width":n(b).width==="auto","update-all":((J=n(a))==null?void 0:J.labelWidth)==="auto"},{default:V(()=>[n(x)?(f(),se(nt(n(R)?"label":"div"),{key:0,id:n(p),for:n(R),class:N(n(u).e("label")),style:ye(n(b))},{default:V(()=>[Te(A.$slots,"label",{label:n(O)},()=>[Ie(ie(n(O)),1)])]),_:3},8,["id","for","class","style"])):X("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),l("div",{class:N(n(u).e("content")),style:ye(n(C))},[Te(A.$slots,"default"),w(Ka,{name:`${n(u).namespace.value}-zoom-in-top`},{default:V(()=>[n(P)?Te(A.$slots,"error",{key:0,error:$.value},()=>[l("div",{class:N(n(g))},ie($.value),3)]):X("v-if",!0)]),_:3},8,["name"])],6)],10,["role","aria-labelledby"])}}});var ri=Ye(qp,[["__file","form-item.vue"]]);const zs=yt(Kp,{FormItem:ri}),Ns=Qs(ri),Wp=Ke({urlList:{type:ke(Array),default:()=>vo([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},showProgress:{type:Boolean,default:!1},crossorigin:{type:ke(String)}}),Zp={close:()=>!0,switch:e=>vt(e),rotate:e=>vt(e)},Jp=de({name:"ElImageViewer"}),em=de({...Jp,props:Wp,emits:Zp,setup(e,{expose:o,emit:t}){var s;const a=e,c={CONTAIN:{name:"contain",icon:eo(Qd)},ORIGINAL:{name:"original",icon:eo(qd)}};let i,u="";const{t:p}=ns(),y=Ge("image-viewer"),{nextZIndex:_}=Bs(),v=E(),$=E([]),S=or(),m=E(!0),r=E(a.initialIndex),T=Xt(c.CONTAIN),b=E({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),C=E((s=a.zIndex)!=null?s:_()),d=M(()=>{const{urlList:ne}=a;return ne.length<=1}),k=M(()=>r.value===0),g=M(()=>r.value===a.urlList.length-1),h=M(()=>a.urlList[r.value]),x=M(()=>[y.e("btn"),y.e("prev"),y.is("disabled",!a.infinite&&k.value)]),R=M(()=>[y.e("btn"),y.e("next"),y.is("disabled",!a.infinite&&g.value)]),j=M(()=>{const{scale:ne,deg:fe,offsetX:A,offsetY:K,enableTransition:J}=b.value;let ce=A/ne,pe=K/ne;const ve=fe*Math.PI/180,he=Math.cos(ve),Pe=Math.sin(ve);ce=ce*he+pe*Pe,pe=pe*he-A/ne*Pe;const _e={transform:`scale(${ne}) rotate(${fe}deg) translate(${ce}px, ${pe}px)`,transition:J?"transform .3s":""};return T.value.name===c.CONTAIN.name&&(_e.maxWidth=_e.maxHeight="100%"),_e}),F=M(()=>`${r.value+1} / ${a.urlList.length}`);function B(){D(),i==null||i(),document.body.style.overflow=u,t("close")}function Y(){const ne=Gs(A=>{switch(A.code){case Ct.esc:a.closeOnPressEscape&&B();break;case Ct.space:U();break;case Ct.left:ue();break;case Ct.up:H("zoomIn");break;case Ct.right:oe();break;case Ct.down:H("zoomOut");break}}),fe=Gs(A=>{const K=A.deltaY||A.deltaX;H(K<0?"zoomIn":"zoomOut",{zoomRate:a.zoomRate,enableTransition:!1})});S.run(()=>{At(document,"keydown",ne),At(document,"wheel",fe)})}function D(){S.stop()}function Z(){m.value=!1}function Q(ne){m.value=!1,ne.target.alt=p("el.image.error")}function P(ne){if(m.value||ne.button!==0||!v.value)return;b.value.enableTransition=!1;const{offsetX:fe,offsetY:A}=b.value,K=ne.pageX,J=ne.pageY,ce=Gs(ve=>{b.value={...b.value,offsetX:fe+ve.pageX-K,offsetY:A+ve.pageY-J}}),pe=At(document,"mousemove",ce);At(document,"mouseup",()=>{pe()}),ne.preventDefault()}function O(){b.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function U(){if(m.value)return;const ne=ll(c),fe=Object.values(c),A=T.value.name,J=(fe.findIndex(ce=>ce.name===A)+1)%ne.length;T.value=c[ne[J]],O()}function ae(ne){const fe=a.urlList.length;r.value=(ne+fe)%fe}function ue(){k.value&&!a.infinite||ae(r.value-1)}function oe(){g.value&&!a.infinite||ae(r.value+1)}function H(ne,fe={}){if(m.value)return;const{minScale:A,maxScale:K}=a,{zoomRate:J,rotateDeg:ce,enableTransition:pe}={zoomRate:a.zoomRate,rotateDeg:90,enableTransition:!0,...fe};switch(ne){case"zoomOut":b.value.scale>A&&(b.value.scale=Number.parseFloat((b.value.scale/J).toFixed(3)));break;case"zoomIn":b.value.scale<K&&(b.value.scale=Number.parseFloat((b.value.scale*J).toFixed(3)));break;case"clockwise":b.value.deg+=ce,t("rotate",b.value.deg);break;case"anticlockwise":b.value.deg-=ce,t("rotate",b.value.deg);break}b.value.enableTransition=pe}function re(ne){var fe;((fe=ne.detail)==null?void 0:fe.focusReason)==="pointer"&&ne.preventDefault()}function G(){a.closeOnPressEscape&&B()}function L(ne){if(ne.ctrlKey){if(ne.deltaY<0)return ne.preventDefault(),!1;if(ne.deltaY>0)return ne.preventDefault(),!1}}return me(h,()=>{Ae(()=>{const ne=$.value[0];ne!=null&&ne.complete||(m.value=!0)})}),me(r,ne=>{O(),t("switch",ne)}),Le(()=>{Y(),i=At("wheel",L,{passive:!1}),u=document.body.style.overflow,document.body.style.overflow="hidden"}),o({setActiveItem:ae}),(ne,fe)=>(f(),se(n(xl),{to:"body",disabled:!ne.teleported},{default:V(()=>[w(Yt,{name:"viewer-fade",appear:""},{default:V(()=>[l("div",{ref_key:"wrapper",ref:v,tabindex:-1,class:N(n(y).e("wrapper")),style:ye({zIndex:C.value})},[w(n(Us),{loop:"",trapped:"","focus-trap-el":v.value,"focus-start-el":"container",onFocusoutPrevented:re,onReleaseRequested:G},{default:V(()=>[l("div",{class:N(n(y).e("mask")),onClick:Re(A=>ne.hideOnClickModal&&B(),["self"])},null,10,["onClick"]),X(" CLOSE "),l("span",{class:N([n(y).e("btn"),n(y).e("close")]),onClick:B},[w(n(Ne),null,{default:V(()=>[w(n(ht))]),_:1})],2),X(" ARROW "),n(d)?X("v-if",!0):(f(),I(Ee,{key:0},[l("span",{class:N(n(x)),onClick:ue},[w(n(Ne),null,{default:V(()=>[w(n(Fd))]),_:1})],2),l("span",{class:N(n(R)),onClick:oe},[w(n(Ne),null,{default:V(()=>[w(n(Ed))]),_:1})],2)],64)),ne.$slots.progress||ne.showProgress?(f(),I("div",{key:1,class:N([n(y).e("btn"),n(y).e("progress")])},[Te(ne.$slots,"progress",{activeIndex:r.value,total:ne.urlList.length},()=>[Ie(ie(n(F)),1)])],2)):X("v-if",!0),X(" ACTIONS "),l("div",{class:N([n(y).e("btn"),n(y).e("actions")])},[l("div",{class:N(n(y).e("actions__inner"))},[Te(ne.$slots,"toolbar",{actions:H,prev:ue,next:oe,reset:U,activeIndex:r.value,setActiveItem:ae},()=>[w(n(Ne),{onClick:A=>H("zoomOut")},{default:V(()=>[w(n(af))]),_:1},8,["onClick"]),w(n(Ne),{onClick:A=>H("zoomIn")},{default:V(()=>[w(n(On))]),_:1},8,["onClick"]),l("i",{class:N(n(y).e("actions__divider"))},null,2),w(n(Ne),{onClick:U},{default:V(()=>[(f(),se(nt(n(T).icon)))]),_:1}),l("i",{class:N(n(y).e("actions__divider"))},null,2),w(n(Ne),{onClick:A=>H("anticlockwise")},{default:V(()=>[w(n(Dd))]),_:1},8,["onClick"]),w(n(Ne),{onClick:A=>H("clockwise")},{default:V(()=>[w(n(Gd))]),_:1},8,["onClick"])])],2)],2),X(" CANVAS "),l("div",{class:N(n(y).e("canvas"))},[(f(!0),I(Ee,null,He(ne.urlList,(A,K)=>qe((f(),I("img",{ref_for:!0,ref:J=>$.value[K]=J,key:A,src:A,style:ye(n(j)),class:N(n(y).e("img")),crossorigin:ne.crossorigin,onLoad:Z,onError:Q,onMousedown:P},null,46,["src","crossorigin"])),[[pt,K===r.value]])),128))],2),Te(ne.$slots,"default")]),_:3},8,["focus-trap-el"])],6)]),_:3})]),_:3},8,["disabled"]))}});var tm=Ye(em,[["__file","image-viewer.vue"]]);const om=yt(tm),sm=Ke({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:ke([String,Object])},previewSrcList:{type:ke(Array),default:()=>vo([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},showProgress:{type:Boolean,default:!1},crossorigin:{type:ke(String)}}),lm={load:e=>e instanceof Event,error:e=>e instanceof Event,switch:e=>vt(e),close:()=>!0,show:()=>!0},am=de({name:"ElImage",inheritAttrs:!1}),nm=de({...am,props:sm,emits:lm,setup(e,{expose:o,emit:t}){const s=e,{t:a}=ns(),c=Ge("image"),i=Da(),u=M(()=>qo(Object.entries(i).filter(([P])=>/^(data-|on[A-Z])/i.test(P)||["id","style"].includes(P)))),p=Ln({excludeListeners:!0,excludeKeys:M(()=>Object.keys(u.value))}),y=E(),_=E(!1),v=E(!0),$=E(!1),S=E(),m=E(),r=et&&"loading"in HTMLImageElement.prototype;let T;const b=M(()=>[c.e("inner"),d.value&&c.e("preview"),v.value&&c.is("loading")]),C=M(()=>{const{fit:P}=s;return et&&P?{objectFit:P}:{}}),d=M(()=>{const{previewSrcList:P}=s;return Vt(P)&&P.length>0}),k=M(()=>{const{previewSrcList:P,initialIndex:O}=s;let U=O;return O>P.length-1&&(U=0),U}),g=M(()=>s.loading==="eager"?!1:!r&&s.loading==="lazy"||s.lazy),h=()=>{et&&(v.value=!0,_.value=!1,y.value=s.src)};function x(P){v.value=!1,_.value=!1,t("load",P)}function R(P){v.value=!1,_.value=!0,t("error",P)}function j(){_p(S.value,m.value)&&(h(),Y())}const F=sr(j,200,!0);async function B(){var P;if(!et)return;await Ae();const{scrollContainer:O}=s;Ot(O)?m.value=O:it(O)&&O!==""?m.value=(P=document.querySelector(O))!=null?P:void 0:S.value&&(m.value=kd(S.value)),m.value&&(T=At(m,"scroll",F),setTimeout(()=>j(),100))}function Y(){!et||!m.value||!F||(T==null||T(),m.value=void 0)}function D(){d.value&&($.value=!0,t("show"))}function Z(){$.value=!1,t("close")}function Q(P){t("switch",P)}return me(()=>s.src,()=>{g.value?(v.value=!0,_.value=!1,Y(),B()):h()}),Le(()=>{g.value?B():h()}),o({showPreview:D}),(P,O)=>(f(),I("div",Et({ref_key:"container",ref:S},n(u),{class:[n(c).b(),P.$attrs.class]}),[_.value?Te(P.$slots,"error",{key:0},()=>[l("div",{class:N(n(c).e("error"))},ie(n(a)("el.image.error")),3)]):(f(),I(Ee,{key:1},[y.value!==void 0?(f(),I("img",Et({key:0},n(p),{src:y.value,loading:P.loading,style:n(C),class:n(b),crossorigin:P.crossorigin,onClick:D,onLoad:x,onError:R}),null,16,["src","loading","crossorigin"])):X("v-if",!0),v.value?(f(),I("div",{key:1,class:N(n(c).e("wrapper"))},[Te(P.$slots,"placeholder",{},()=>[l("div",{class:N(n(c).e("placeholder"))},null,2)])],2)):X("v-if",!0)],64)),n(d)?(f(),I(Ee,{key:2},[$.value?(f(),se(n(om),{key:0,"z-index":P.zIndex,"initial-index":n(k),infinite:P.infinite,"zoom-rate":P.zoomRate,"min-scale":P.minScale,"max-scale":P.maxScale,"show-progress":P.showProgress,"url-list":P.previewSrcList,crossorigin:P.crossorigin,"hide-on-click-modal":P.hideOnClickModal,teleported:P.previewTeleported,"close-on-press-escape":P.closeOnPressEscape,onClose:Z,onSwitch:Q},Ts({toolbar:V(U=>[Te(P.$slots,"toolbar",ta(oa(U)))]),default:V(()=>[P.$slots.viewer?(f(),I("div",{key:0},[Te(P.$slots,"viewer")])):X("v-if",!0)]),_:2},[P.$slots.progress?{name:"progress",fn:V(U=>[Te(P.$slots,"progress",ta(oa(U)))])}:void 0]),1032,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","show-progress","url-list","crossorigin","hide-on-click-modal","teleported","close-on-press-escape"])):X("v-if",!0)],64)):X("v-if",!0)],16))}});var im=Ye(nm,[["__file","image.vue"]]);const rm=yt(im),cm=Ke({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:e=>e>=0&&e<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:Boolean,duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:ke(String),default:"round"},textInside:Boolean,width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:ke([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:ke(Function),default:e=>`${e}%`}}),um=de({name:"ElProgress"}),dm=de({...um,props:cm,setup(e){const o=e,t={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},s=Ge("progress"),a=M(()=>{const d={width:`${o.percentage}%`,animationDuration:`${o.duration}s`},k=C(o.percentage);return k.includes("gradient")?d.background=k:d.backgroundColor=k,d}),c=M(()=>(o.strokeWidth/o.width*100).toFixed(1)),i=M(()=>["circle","dashboard"].includes(o.type)?Number.parseInt(`${50-Number.parseFloat(c.value)/2}`,10):0),u=M(()=>{const d=i.value,k=o.type==="dashboard";return`
          M 50 50
          m 0 ${k?"":"-"}${d}
          a ${d} ${d} 0 1 1 0 ${k?"-":""}${d*2}
          a ${d} ${d} 0 1 1 0 ${k?"":"-"}${d*2}
          `}),p=M(()=>2*Math.PI*i.value),y=M(()=>o.type==="dashboard"?.75:1),_=M(()=>`${-1*p.value*(1-y.value)/2}px`),v=M(()=>({strokeDasharray:`${p.value*y.value}px, ${p.value}px`,strokeDashoffset:_.value})),$=M(()=>({strokeDasharray:`${p.value*y.value*(o.percentage/100)}px, ${p.value}px`,strokeDashoffset:_.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),S=M(()=>{let d;return o.color?d=C(o.percentage):d=t[o.status]||t.default,d}),m=M(()=>o.status==="warning"?yl:o.type==="line"?o.status==="success"?gl:hl:o.status==="success"?Sn:ht),r=M(()=>o.type==="line"?12+o.strokeWidth*.4:o.width*.111111+2),T=M(()=>o.format(o.percentage));function b(d){const k=100/d.length;return d.map((h,x)=>it(h)?{color:h,percentage:(x+1)*k}:h).sort((h,x)=>h.percentage-x.percentage)}const C=d=>{var k;const{color:g}=o;if(ft(g))return g(d);if(it(g))return g;{const h=b(g);for(const x of h)if(x.percentage>d)return x.color;return(k=h[h.length-1])==null?void 0:k.color}};return(d,k)=>(f(),I("div",{class:N([n(s).b(),n(s).m(d.type),n(s).is(d.status),{[n(s).m("without-text")]:!d.showText,[n(s).m("text-inside")]:d.textInside}]),role:"progressbar","aria-valuenow":d.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[d.type==="line"?(f(),I("div",{key:0,class:N(n(s).b("bar"))},[l("div",{class:N(n(s).be("bar","outer")),style:ye({height:`${d.strokeWidth}px`})},[l("div",{class:N([n(s).be("bar","inner"),{[n(s).bem("bar","inner","indeterminate")]:d.indeterminate},{[n(s).bem("bar","inner","striped")]:d.striped},{[n(s).bem("bar","inner","striped-flow")]:d.stripedFlow}]),style:ye(n(a))},[(d.showText||d.$slots.default)&&d.textInside?(f(),I("div",{key:0,class:N(n(s).be("bar","innerText"))},[Te(d.$slots,"default",{percentage:d.percentage},()=>[l("span",null,ie(n(T)),1)])],2)):X("v-if",!0)],6)],6)],2)):(f(),I("div",{key:1,class:N(n(s).b("circle")),style:ye({height:`${d.width}px`,width:`${d.width}px`})},[(f(),I("svg",{viewBox:"0 0 100 100"},[l("path",{class:N(n(s).be("circle","track")),d:n(u),stroke:`var(${n(s).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":d.strokeLinecap,"stroke-width":n(c),fill:"none",style:ye(n(v))},null,14,["d","stroke","stroke-linecap","stroke-width"]),l("path",{class:N(n(s).be("circle","path")),d:n(u),stroke:n(S),fill:"none",opacity:d.percentage?1:0,"stroke-linecap":d.strokeLinecap,"stroke-width":n(c),style:ye(n($))},null,14,["d","stroke","opacity","stroke-linecap","stroke-width"])]))],6)),(d.showText||d.$slots.default)&&!d.textInside?(f(),I("div",{key:2,class:N(n(s).e("text")),style:ye({fontSize:`${n(r)}px`})},[Te(d.$slots,"default",{percentage:d.percentage},()=>[d.status?(f(),se(n(Ne),{key:1},{default:V(()=>[(f(),se(nt(n(m))))]),_:1})):(f(),I("span",{key:0},ie(n(T)),1))])],6)):X("v-if",!0)],10,["aria-valuenow"]))}});var fm=Ye(dm,[["__file","progress.vue"]]);const ci=yt(fm),vm=e=>["",...is].includes(e),ui=Symbol("uploadContextKey"),pm="ElUpload";class mm extends Error{constructor(o,t,s,a){super(o),this.name="UploadAjaxError",this.status=t,this.method=s,this.url=a}}function Ra(e,o,t){let s;return t.response?s=`${t.response.error||t.response}`:t.responseText?s=`${t.responseText}`:s=`fail to ${o.method} ${e} ${t.status}`,new mm(s,t.status,o.method,e)}function gm(e){const o=e.responseText||e.response;if(!o)return o;try{return JSON.parse(o)}catch{return o}}const hm=e=>{typeof XMLHttpRequest>"u"&&as(pm,"XMLHttpRequest is undefined");const o=new XMLHttpRequest,t=e.action;o.upload&&o.upload.addEventListener("progress",c=>{const i=c;i.percent=c.total>0?c.loaded/c.total*100:0,e.onProgress(i)});const s=new FormData;if(e.data)for(const[c,i]of Object.entries(e.data))Vt(i)&&i.length?s.append(c,...i):s.append(c,i);s.append(e.filename,e.file,e.file.name),o.addEventListener("error",()=>{e.onError(Ra(t,e,o))}),o.addEventListener("load",()=>{if(o.status<200||o.status>=300)return e.onError(Ra(t,e,o));e.onSuccess(gm(o))}),o.open(e.method,t,!0),e.withCredentials&&"withCredentials"in o&&(o.withCredentials=!0);const a=e.headers||{};if(a instanceof Headers)a.forEach((c,i)=>o.setRequestHeader(i,c));else for(const[c,i]of Object.entries(a))yo(i)||o.setRequestHeader(c,String(i));return o.send(s),o},di=["text","picture","picture-card"];let ym=1;const ro=()=>Date.now()+ym++,fi=Ke({action:{type:String,default:"#"},headers:{type:ke(Object)},method:{type:String,default:"post"},data:{type:ke([Object,Function,Promise]),default:()=>vo({})},multiple:Boolean,name:{type:String,default:"file"},drag:Boolean,withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},fileList:{type:ke(Array),default:()=>vo([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:di,default:"text"},httpRequest:{type:ke(Function),default:hm},disabled:Boolean,limit:Number}),km=Ke({...fi,beforeUpload:{type:ke(Function),default:tt},beforeRemove:{type:ke(Function)},onRemove:{type:ke(Function),default:tt},onChange:{type:ke(Function),default:tt},onPreview:{type:ke(Function),default:tt},onSuccess:{type:ke(Function),default:tt},onProgress:{type:ke(Function),default:tt},onError:{type:ke(Function),default:tt},onExceed:{type:ke(Function),default:tt},crossorigin:{type:ke(String)}}),bm=Ke({files:{type:ke(Array),default:()=>vo([])},disabled:{type:Boolean,default:!1},handlePreview:{type:ke(Function),default:tt},listType:{type:String,values:di,default:"text"},crossorigin:{type:ke(String)}}),Cm={remove:e=>!!e},_m=de({name:"ElUploadList"}),wm=de({..._m,props:bm,emits:Cm,setup(e,{emit:o}){const t=e,{t:s}=ns(),a=Ge("upload"),c=Ge("icon"),i=Ge("list"),u=lo(),p=E(!1),y=M(()=>[a.b("list"),a.bm("list",t.listType),a.is("disabled",t.disabled)]),_=v=>{o("remove",v)};return(v,$)=>(f(),se(Ka,{tag:"ul",class:N(n(y)),name:n(i).b()},{default:V(()=>[(f(!0),I(Ee,null,He(v.files,(S,m)=>(f(),I("li",{key:S.uid||S.name,class:N([n(a).be("list","item"),n(a).is(S.status),{focusing:p.value}]),tabindex:"0",onKeydown:_t(r=>!n(u)&&_(S),["delete"]),onFocus:r=>p.value=!0,onBlur:r=>p.value=!1,onClick:r=>p.value=!1},[Te(v.$slots,"default",{file:S,index:m},()=>[v.listType==="picture"||S.status!=="uploading"&&v.listType==="picture-card"?(f(),I("img",{key:0,class:N(n(a).be("list","item-thumbnail")),src:S.url,crossorigin:v.crossorigin,alt:""},null,10,["src","crossorigin"])):X("v-if",!0),S.status==="uploading"||v.listType!=="picture-card"?(f(),I("div",{key:1,class:N(n(a).be("list","item-info"))},[l("a",{class:N(n(a).be("list","item-name")),onClick:Re(r=>v.handlePreview(S),["prevent"])},[w(n(Ne),{class:N(n(c).m("document"))},{default:V(()=>[w(n(Ad))]),_:1},8,["class"]),l("span",{class:N(n(a).be("list","item-file-name")),title:S.name},ie(S.name),11,["title"])],10,["onClick"]),S.status==="uploading"?(f(),se(n(ci),{key:0,type:v.listType==="picture-card"?"circle":"line","stroke-width":v.listType==="picture-card"?6:2,percentage:Number(S.percentage),style:ye(v.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):X("v-if",!0)],2)):X("v-if",!0),l("label",{class:N(n(a).be("list","item-status-label"))},[v.listType==="text"?(f(),se(n(Ne),{key:0,class:N([n(c).m("upload-success"),n(c).m("circle-check")])},{default:V(()=>[w(n(gl))]),_:1},8,["class"])):["picture-card","picture"].includes(v.listType)?(f(),se(n(Ne),{key:1,class:N([n(c).m("upload-success"),n(c).m("check")])},{default:V(()=>[w(n(Sn))]),_:1},8,["class"])):X("v-if",!0)],2),n(u)?X("v-if",!0):(f(),se(n(Ne),{key:2,class:N(n(c).m("close")),onClick:r=>_(S)},{default:V(()=>[w(n(ht))]),_:2},1032,["class","onClick"])),X(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),X(" This is a bug which needs to be fixed "),X(" TODO: Fix the incorrect navigation interaction "),n(u)?X("v-if",!0):(f(),I("i",{key:3,class:N(n(c).m("close-tip"))},ie(n(s)("el.upload.deleteTip")),3)),v.listType==="picture-card"?(f(),I("span",{key:4,class:N(n(a).be("list","item-actions"))},[l("span",{class:N(n(a).be("list","item-preview")),onClick:r=>v.handlePreview(S)},[w(n(Ne),{class:N(n(c).m("zoom-in"))},{default:V(()=>[w(n(On))]),_:1},8,["class"])],10,["onClick"]),n(u)?X("v-if",!0):(f(),I("span",{key:0,class:N(n(a).be("list","item-delete")),onClick:r=>_(S)},[w(n(Ne),{class:N(n(c).m("delete"))},{default:V(()=>[w(n($n))]),_:1},8,["class"])],10,["onClick"]))],2)):X("v-if",!0)])],42,["onKeydown","onFocus","onBlur","onClick"]))),128)),Te(v.$slots,"append")]),_:3},8,["class","name"]))}});var Pa=Ye(wm,[["__file","upload-list.vue"]]);const Im=Ke({disabled:{type:Boolean,default:!1}}),Tm={file:e=>Vt(e)},vi="ElUploadDrag",xm=de({name:vi}),Fm=de({...xm,props:Im,emits:Tm,setup(e,{emit:o}){De(ui)||as(vi,"usage: <el-upload><el-upload-dragger /></el-upload>");const s=Ge("upload"),a=E(!1),c=lo(),i=p=>{if(c.value)return;a.value=!1,p.stopPropagation();const y=Array.from(p.dataTransfer.files),_=p.dataTransfer.items||[];y.forEach((v,$)=>{var S;const m=_[$],r=(S=m==null?void 0:m.webkitGetAsEntry)==null?void 0:S.call(m);r&&(v.isDirectory=r.isDirectory)}),o("file",y)},u=()=>{c.value||(a.value=!0)};return(p,y)=>(f(),I("div",{class:N([n(s).b("dragger"),n(s).is("dragover",a.value)]),onDrop:Re(i,["prevent"]),onDragover:Re(u,["prevent"]),onDragleave:Re(_=>a.value=!1,["prevent"])},[Te(p.$slots,"default")],42,["onDrop","onDragover","onDragleave"]))}});var Sm=Ye(Fm,[["__file","upload-dragger.vue"]]);const Em=Ke({...fi,beforeUpload:{type:ke(Function),default:tt},onRemove:{type:ke(Function),default:tt},onStart:{type:ke(Function),default:tt},onSuccess:{type:ke(Function),default:tt},onProgress:{type:ke(Function),default:tt},onError:{type:ke(Function),default:tt},onExceed:{type:ke(Function),default:tt}}),$m=de({name:"ElUploadContent",inheritAttrs:!1}),Rm=de({...$m,props:Em,setup(e,{expose:o}){const t=e,s=Ge("upload"),a=lo(),c=Xt({}),i=Xt(),u=r=>{if(r.length===0)return;const{autoUpload:T,limit:b,fileList:C,multiple:d,onStart:k,onExceed:g}=t;if(b&&C.length+r.length>b){g(r,C);return}d||(r=r.slice(0,1));for(const h of r){const x=h;x.uid=ro(),k(x),T&&p(x)}},p=async r=>{if(i.value.value="",!t.beforeUpload)return _(r);let T,b={};try{const d=t.data,k=t.beforeUpload(r);b=Jl(t.data)?na(t.data):t.data,T=await k,Jl(t.data)&&vn(d,b)&&(b=na(t.data))}catch{T=!1}if(T===!1){t.onRemove(r);return}let C=r;T instanceof Blob&&(T instanceof File?C=T:C=new File([T],r.name,{type:r.type})),_(Object.assign(C,{uid:r.uid}),b)},y=async(r,T)=>ft(r)?r(T):r,_=async(r,T)=>{const{headers:b,data:C,method:d,withCredentials:k,name:g,action:h,onProgress:x,onSuccess:R,onError:j,httpRequest:F}=t;try{T=await y(T??C,r)}catch{t.onRemove(r);return}const{uid:B}=r,Y={headers:b||{},withCredentials:k,file:r,data:T,method:d,filename:g,action:h,onProgress:Z=>{x(Z,r)},onSuccess:Z=>{R(Z,r),delete c.value[B]},onError:Z=>{j(Z,r),delete c.value[B]}},D=F(Y);c.value[B]=D,D instanceof Promise&&D.then(Y.onSuccess,Y.onError)},v=r=>{const T=r.target.files;T&&u(Array.from(T))},$=()=>{a.value||(i.value.value="",i.value.click())},S=()=>{$()};return o({abort:r=>{md(c.value).filter(r?([b])=>String(r.uid)===b:()=>!0).forEach(([b,C])=>{C instanceof XMLHttpRequest&&C.abort(),delete c.value[b]})},upload:p}),(r,T)=>(f(),I("div",{class:N([n(s).b(),n(s).m(r.listType),n(s).is("drag",r.drag),n(s).is("disabled",n(a))]),tabindex:n(a)?"-1":"0",onClick:$,onKeydown:_t(Re(S,["self"]),["enter","space"])},[r.drag?(f(),se(Sm,{key:0,disabled:n(a),onFile:u},{default:V(()=>[Te(r.$slots,"default")]),_:3},8,["disabled"])):Te(r.$slots,"default",{key:1}),l("input",{ref_key:"inputRef",ref:i,class:N(n(s).e("input")),name:r.name,disabled:n(a),multiple:r.multiple,accept:r.accept,type:"file",onChange:v,onClick:Re(()=>{},["stop"])},null,42,["name","disabled","multiple","accept","onClick"])],42,["tabindex","onKeydown"]))}});var Oa=Ye(Rm,[["__file","upload-content.vue"]]);const Va="ElUpload",La=e=>{var o;(o=e.url)!=null&&o.startsWith("blob:")&&URL.revokeObjectURL(e.url)},Pm=(e,o)=>{const t=Di(e,"fileList",void 0,{passive:!0}),s=S=>t.value.find(m=>m.uid===S.uid);function a(S){var m;(m=o.value)==null||m.abort(S)}function c(S=["ready","uploading","success","fail"]){t.value=t.value.filter(m=>!S.includes(m.status))}function i(S){t.value=t.value.filter(m=>m.uid!==S.uid)}const u=(S,m)=>{const r=s(m);r&&(console.error(S),r.status="fail",i(r),e.onError(S,r,t.value),e.onChange(r,t.value))},p=(S,m)=>{const r=s(m);r&&(e.onProgress(S,r,t.value),r.status="uploading",r.percentage=Math.round(S.percent))},y=(S,m)=>{const r=s(m);r&&(r.status="success",r.response=S,e.onSuccess(S,r,t.value),e.onChange(r,t.value))},_=S=>{yo(S.uid)&&(S.uid=ro());const m={name:S.name,percentage:0,status:"ready",size:S.size,raw:S,uid:S.uid};if(e.listType==="picture-card"||e.listType==="picture")try{m.url=URL.createObjectURL(S)}catch(r){r.message,e.onError(r,m,t.value)}t.value=[...t.value,m],e.onChange(m,t.value)},v=async S=>{const m=S instanceof File?s(S):S;m||as(Va,"file to be removed not found");const r=T=>{a(T),i(T),e.onRemove(T,t.value),La(T)};e.beforeRemove?await e.beforeRemove(m,t.value)!==!1&&r(m):r(m)};function $(){t.value.filter(({status:S})=>S==="ready").forEach(({raw:S})=>{var m;return S&&((m=o.value)==null?void 0:m.upload(S))})}return me(()=>e.listType,S=>{S!=="picture-card"&&S!=="picture"||(t.value=t.value.map(m=>{const{raw:r,url:T}=m;if(!T&&r)try{m.url=URL.createObjectURL(r)}catch(b){e.onError(b,m,t.value)}return m}))}),me(t,S=>{for(const m of S)m.uid||(m.uid=ro()),m.status||(m.status="success")},{immediate:!0,deep:!0}),{uploadFiles:t,abort:a,clearFiles:c,handleError:u,handleProgress:p,handleStart:_,handleSuccess:y,handleRemove:v,submit:$,revokeFileObjectURL:La}},Om=de({name:"ElUpload"}),Vm=de({...Om,props:km,setup(e,{expose:o}){const t=e,s=lo(),a=Xt(),{abort:c,submit:i,clearFiles:u,uploadFiles:p,handleStart:y,handleError:_,handleRemove:v,handleSuccess:$,handleProgress:S,revokeFileObjectURL:m}=Pm(t,a),r=M(()=>t.listType==="picture-card"),T=M(()=>({...t,fileList:p.value,onStart:y,onProgress:S,onSuccess:$,onError:_,onRemove:v}));return ut(()=>{p.value.forEach(m)}),It(ui,{accept:jt(t,"accept")}),o({abort:c,submit:i,clearFiles:u,handleStart:y,handleRemove:v}),(b,C)=>(f(),I("div",null,[n(r)&&b.showFileList?(f(),se(Pa,{key:0,disabled:n(s),"list-type":b.listType,files:n(p),crossorigin:b.crossorigin,"handle-preview":b.onPreview,onRemove:n(v)},Ts({append:V(()=>[w(Oa,Et({ref_key:"uploadRef",ref:a},n(T)),{default:V(()=>[b.$slots.trigger?Te(b.$slots,"trigger",{key:0}):X("v-if",!0),!b.$slots.trigger&&b.$slots.default?Te(b.$slots,"default",{key:1}):X("v-if",!0)]),_:3},16)]),_:2},[b.$slots.file?{name:"default",fn:V(({file:d,index:k})=>[Te(b.$slots,"file",{file:d,index:k})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):X("v-if",!0),!n(r)||n(r)&&!b.showFileList?(f(),se(Oa,Et({key:1,ref_key:"uploadRef",ref:a},n(T)),{default:V(()=>[b.$slots.trigger?Te(b.$slots,"trigger",{key:0}):X("v-if",!0),!b.$slots.trigger&&b.$slots.default?Te(b.$slots,"default",{key:1}):X("v-if",!0)]),_:3},16)):X("v-if",!0),b.$slots.trigger?Te(b.$slots,"default",{key:2}):X("v-if",!0),Te(b.$slots,"tip"),!n(r)&&b.showFileList?(f(),se(Pa,{key:3,disabled:n(s),"list-type":b.listType,files:n(p),crossorigin:b.crossorigin,"handle-preview":b.onPreview,onRemove:n(v)},Ts({_:2},[b.$slots.file?{name:"default",fn:V(({file:d,index:k})=>[Te(b.$slots,"file",{file:d,index:k})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):X("v-if",!0)]))}});var Lm=Ye(Vm,[["__file","upload.vue"]]);const pi=yt(Lm);function Bm(e,o){let t;const s=E(!1),a=Be({...e,originalPosition:"",originalOverflow:"",visible:!1});function c(S){a.text=S}function i(){const S=a.parent,m=$.ns;if(!S.vLoadingAddClassList){let r=S.getAttribute("loading-number");r=Number.parseInt(r)-1,r?S.setAttribute("loading-number",r.toString()):(Jo(S,m.bm("parent","relative")),S.removeAttribute("loading-number")),Jo(S,m.bm("parent","hidden"))}u(),v.unmount()}function u(){var S,m;(m=(S=$.$el)==null?void 0:S.parentNode)==null||m.removeChild($.$el)}function p(){var S;e.beforeClose&&!e.beforeClose()||(s.value=!0,clearTimeout(t),t=setTimeout(y,400),a.visible=!1,(S=e.closed)==null||S.call(e))}function y(){if(!s.value)return;const S=a.parent;s.value=!1,S.vLoadingAddClassList=void 0,i()}const _=de({name:"ElLoading",setup(S,{expose:m}){const{ns:r,zIndex:T}=ml("loading");return m({ns:r,zIndex:T}),()=>{const b=a.spinner||a.svg,C=Fo("svg",{class:"circular",viewBox:a.svgViewBox?a.svgViewBox:"0 0 50 50",...b?{innerHTML:b}:{}},[Fo("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),d=a.text?Fo("p",{class:r.b("text")},[a.text]):void 0;return Fo(Yt,{name:r.b("fade"),onAfterLeave:y},{default:V(()=>[qe(w("div",{style:{backgroundColor:a.background||""},class:[r.b("mask"),a.customClass,a.fullscreen?"is-fullscreen":""]},[Fo("div",{class:r.b("spinner")},[C,d])]),[[pt,a.visible]])])})}}}),v=Xi(_);Object.assign(v._context,o??{});const $=v.mount(document.createElement("div"));return{...ts(a),setText:c,removeElLoadingChild:u,close:p,handleAfterLeave:y,vm:$,get $el(){return $.$el}}}let bs;const Rl=function(e={}){if(!et)return;const o=Am(e);if(o.fullscreen&&bs)return bs;const t=Bm({...o,closed:()=>{var a;(a=o.closed)==null||a.call(o),o.fullscreen&&(bs=void 0)}},Rl._context);jm(o,o.parent,t),Ba(o,o.parent,t),o.parent.vLoadingAddClassList=()=>Ba(o,o.parent,t);let s=o.parent.getAttribute("loading-number");return s?s=`${Number.parseInt(s)+1}`:s="1",o.parent.setAttribute("loading-number",s),o.parent.appendChild(t.$el),Ae(()=>t.visible.value=o.visible),o.fullscreen&&(bs=t),t},Am=e=>{var o,t,s,a;let c;return it(e.target)?c=(o=document.querySelector(e.target))!=null?o:document.body:c=e.target||document.body,{parent:c===document.body||e.body?document.body:c,background:e.background||"",svg:e.svg||"",svgViewBox:e.svgViewBox||"",spinner:e.spinner||!1,text:e.text||"",fullscreen:c===document.body&&((t=e.fullscreen)!=null?t:!0),lock:(s=e.lock)!=null?s:!1,customClass:e.customClass||"",visible:(a=e.visible)!=null?a:!0,beforeClose:e.beforeClose,closed:e.closed,target:c}},jm=async(e,o,t)=>{const{nextZIndex:s}=t.vm.zIndex||t.vm._.exposed.zIndex,a={};if(e.fullscreen)t.originalPosition.value=io(document.body,"position"),t.originalOverflow.value=io(document.body,"overflow"),a.zIndex=s();else if(e.parent===document.body){t.originalPosition.value=io(document.body,"position"),await Ae();for(const c of["top","left"]){const i=c==="top"?"scrollTop":"scrollLeft";a[c]=`${e.target.getBoundingClientRect()[c]+document.body[i]+document.documentElement[i]-Number.parseInt(io(document.body,`margin-${c}`),10)}px`}for(const c of["height","width"])a[c]=`${e.target.getBoundingClientRect()[c]}px`}else t.originalPosition.value=io(o,"position");for(const[c,i]of Object.entries(a))t.$el.style[c]=i},Ba=(e,o,t)=>{const s=t.vm.ns||t.vm._.exposed.ns;["absolute","fixed","sticky"].includes(t.originalPosition.value)?Jo(o,s.bm("parent","relative")):al(o,s.bm("parent","relative")),e.fullscreen&&e.lock?al(o,s.bm("parent","hidden")):Jo(o,s.bm("parent","hidden"))};Rl._context=null;const ws=Symbol("ElLoading"),Aa=(e,o)=>{var t,s,a,c;const i=o.instance,u=S=>Qt(o.value)?o.value[S]:void 0,p=S=>{const m=it(S)&&(i==null?void 0:i[S])||S;return m&&E(m)},y=S=>p(u(S)||e.getAttribute(`element-loading-${Ui(S)}`)),_=(t=u("fullscreen"))!=null?t:o.modifiers.fullscreen,v={text:y("text"),svg:y("svg"),svgViewBox:y("svgViewBox"),spinner:y("spinner"),background:y("background"),customClass:y("customClass"),fullscreen:_,target:(s=u("target"))!=null?s:_?void 0:e,body:(a=u("body"))!=null?a:o.modifiers.body,lock:(c=u("lock"))!=null?c:o.modifiers.lock},$=Rl(v);$._context=ko._context,e[ws]={options:v,instance:$}},Qm=(e,o)=>{for(const t of Object.keys(o))fo(o[t])&&(o[t].value=e[t])},ko={mounted(e,o){o.value&&Aa(e,o)},updated(e,o){const t=e[ws];o.oldValue!==o.value&&(o.value&&!o.oldValue?Aa(e,o):o.value&&o.oldValue?Qt(o.value)&&Qm(o.value,t.options):t==null||t.instance.close())},unmounted(e){var o;(o=e[ws])==null||o.instance.close(),e[ws]=null}};ko._context=null;const mi=["success","info","warning","error"],gt=vo({customClass:"",dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",plain:!1,offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:et?document.body:void 0}),Hm=Ke({customClass:{type:String,default:gt.customClass},dangerouslyUseHTMLString:{type:Boolean,default:gt.dangerouslyUseHTMLString},duration:{type:Number,default:gt.duration},icon:{type:Po,default:gt.icon},id:{type:String,default:gt.id},message:{type:ke([String,Object,Function]),default:gt.message},onClose:{type:ke(Function),default:gt.onClose},showClose:{type:Boolean,default:gt.showClose},type:{type:String,values:mi,default:gt.type},plain:{type:Boolean,default:gt.plain},offset:{type:Number,default:gt.offset},zIndex:{type:Number,default:gt.zIndex},grouping:{type:Boolean,default:gt.grouping},repeatNum:{type:Number,default:gt.repeatNum}}),Mm={destroy:()=>!0},Pt=lr([]),Um=e=>{const o=Pt.findIndex(a=>a.id===e),t=Pt[o];let s;return o>0&&(s=Pt[o-1]),{current:t,prev:s}},zm=e=>{const{prev:o}=Um(e);return o?o.vm.exposed.bottom.value:0},Nm=(e,o)=>Pt.findIndex(s=>s.id===e)>0?16:o,Km=de({name:"ElMessage"}),Dm=de({...Km,props:Hm,emits:Mm,setup(e,{expose:o,emit:t}){const s=e,{Close:a}=Vn,c=E(!1),{ns:i,zIndex:u}=ml("message"),{currentZIndex:p,nextZIndex:y}=u,_=E(),v=E(!1),$=E(0);let S;const m=M(()=>s.type?s.type==="error"?"danger":s.type:"info"),r=M(()=>{const j=s.type;return{[i.bm("icon",j)]:j&&Rs[j]}}),T=M(()=>s.icon||Rs[s.type]||""),b=M(()=>zm(s.id)),C=M(()=>Nm(s.id,s.offset)+b.value),d=M(()=>$.value+C.value),k=M(()=>({top:`${C.value}px`,zIndex:p.value}));function g(){s.duration!==0&&({stop:S}=el(()=>{x()},s.duration))}function h(){S==null||S()}function x(){v.value=!1,Ae(()=>{var j;c.value||((j=s.onClose)==null||j.call(s),t("destroy"))})}function R({code:j}){j===Ct.esc&&x()}return Le(()=>{g(),y(),v.value=!0}),me(()=>s.repeatNum,()=>{h(),g()}),At(document,"keydown",R),cl(_,()=>{$.value=_.value.getBoundingClientRect().height}),o({visible:v,bottom:d,close:x}),(j,F)=>(f(),se(Yt,{name:n(i).b("fade"),onBeforeEnter:B=>c.value=!0,onBeforeLeave:j.onClose,onAfterLeave:B=>j.$emit("destroy"),persisted:""},{default:V(()=>[qe(l("div",{id:j.id,ref_key:"messageRef",ref:_,class:N([n(i).b(),{[n(i).m(j.type)]:j.type},n(i).is("closable",j.showClose),n(i).is("plain",j.plain),j.customClass]),style:ye(n(k)),role:"alert",onMouseenter:h,onMouseleave:g},[j.repeatNum>1?(f(),se(n(Dv),{key:0,value:j.repeatNum,type:n(m),class:N(n(i).e("badge"))},null,8,["value","type","class"])):X("v-if",!0),n(T)?(f(),se(n(Ne),{key:1,class:N([n(i).e("icon"),n(r)])},{default:V(()=>[(f(),se(nt(n(T))))]),_:1},8,["class"])):X("v-if",!0),Te(j.$slots,"default",{},()=>[j.dangerouslyUseHTMLString?(f(),I(Ee,{key:1},[X(" Caution here, message could've been compromised, never use user's input as message "),l("p",{class:N(n(i).e("content")),innerHTML:j.message},null,10,["innerHTML"])],2112)):(f(),I("p",{key:0,class:N(n(i).e("content"))},ie(j.message),3))]),j.showClose?(f(),se(n(Ne),{key:2,class:N(n(i).e("closeBtn")),onClick:Re(x,["stop"])},{default:V(()=>[w(n(a))]),_:1},8,["class","onClick"])):X("v-if",!0)],46,["id"]),[[pt,v.value]])]),_:3},8,["name","onBeforeEnter","onBeforeLeave","onAfterLeave"]))}});var Xm=Ye(Dm,[["__file","message.vue"]]);let Gm=1;const gi=e=>{const o=!e||it(e)||uo(e)||ft(e)?{message:e}:e,t={...gt,...o};if(!t.appendTo)t.appendTo=document.body;else if(it(t.appendTo)){let s=document.querySelector(t.appendTo);Ot(s)||(s=document.body),t.appendTo=s}return Ht(Bt.grouping)&&!t.grouping&&(t.grouping=Bt.grouping),vt(Bt.duration)&&t.duration===3e3&&(t.duration=Bt.duration),vt(Bt.offset)&&t.offset===16&&(t.offset=Bt.offset),Ht(Bt.showClose)&&!t.showClose&&(t.showClose=Bt.showClose),t},Ym=e=>{const o=Pt.indexOf(e);if(o===-1)return;Pt.splice(o,1);const{handler:t}=e;t.close()},qm=({appendTo:e,...o},t)=>{const s=`message_${Gm++}`,a=o.onClose,c=document.createElement("div"),i={...o,id:s,onClose:()=>{a==null||a(),Ym(_)},onDestroy:()=>{Eo(null,c)}},u=w(Xm,i,ft(i.message)||uo(i.message)?{default:ft(i.message)?i.message:()=>i.message}:null);u.appContext=t||Oo._context,Eo(u,c),e.appendChild(c.firstElementChild);const p=u.component,_={id:s,vnode:u,vm:p,handler:{close:()=>{p.exposed.close()}},props:u.component.props};return _},Oo=(e={},o)=>{if(!et)return{close:()=>{}};const t=gi(e);if(t.grouping&&Pt.length){const a=Pt.find(({vnode:c})=>{var i;return((i=c.props)==null?void 0:i.message)===t.message});if(a)return a.props.repeatNum+=1,a.props.type=t.type,a.handler}if(vt(Bt.max)&&Pt.length>=Bt.max)return{close:()=>{}};const s=qm(t,o);return Pt.push(s),s.handler};mi.forEach(e=>{Oo[e]=(o={},t)=>{const s=gi(o);return Oo({...s,type:e},t)}});function Wm(e){const o=[...Pt];for(const t of o)(!e||e===t.props.type)&&t.handler.close()}Oo.closeAll=Wm;Oo._context=null;const Se=Cd(Oo,"$message"),il="_trap-focus-children",co=[],ja=e=>{if(co.length===0)return;const o=co[co.length-1][il];if(o.length>0&&e.code===Ct.tab){if(o.length===1){e.preventDefault(),document.activeElement!==o[0]&&o[0].focus();return}const t=e.shiftKey,s=e.target===o[0],a=e.target===o[o.length-1];s&&t&&(e.preventDefault(),o[o.length-1].focus()),a&&!t&&(e.preventDefault(),o[0].focus())}},Zm={beforeMount(e){e[il]=ka(e),co.push(e),co.length<=1&&document.addEventListener("keydown",ja)},updated(e){Ae(()=>{e[il]=ka(e)})},unmounted(){co.shift(),co.length===0&&document.removeEventListener("keydown",ja)}},Jm=de({name:"ElMessageBox",directives:{TrapFocus:Zm},components:{ElButton:ao,ElFocusTrap:Us,ElInput:Hs,ElOverlay:si,ElIcon:Ne,...Vn},inheritAttrs:!1,props:{buttonSize:{type:String,validator:vm},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,overflow:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(e,{emit:o}){const{locale:t,zIndex:s,ns:a,size:c}=ml("message-box",M(()=>e.buttonSize)),{t:i}=t,{nextZIndex:u}=s,p=E(!1),y=Be({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",closeIcon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:"",inputValidator:void 0,inputErrorMessage:"",message:"",modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonLoadingIcon:eo($s),cancelButtonLoadingIcon:eo($s),confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:u()}),_=M(()=>{const P=y.type;return{[a.bm("icon",P)]:P&&Rs[P]}}),v=mo(),$=mo(),S=M(()=>{const P=y.type;return y.icon||P&&Rs[P]||""}),m=M(()=>!!y.message),r=E(),T=E(),b=E(),C=E(),d=E(),k=M(()=>y.confirmButtonClass);me(()=>y.inputValue,async P=>{await Ae(),e.boxType==="prompt"&&P&&Y()},{immediate:!0}),me(()=>p.value,P=>{var O,U;P&&(e.boxType!=="prompt"&&(y.autofocus?b.value=(U=(O=d.value)==null?void 0:O.$el)!=null?U:r.value:b.value=r.value),y.zIndex=u()),e.boxType==="prompt"&&(P?Ae().then(()=>{var ae;C.value&&C.value.$el&&(y.autofocus?b.value=(ae=D())!=null?ae:r.value:b.value=r.value)}):(y.editorErrorMessage="",y.validateError=!1))});const g=M(()=>e.draggable),h=M(()=>e.overflow);ni(r,T,g,h),Le(async()=>{await Ae(),e.closeOnHashChange&&window.addEventListener("hashchange",x)}),ut(()=>{e.closeOnHashChange&&window.removeEventListener("hashchange",x)});function x(){p.value&&(p.value=!1,Ae(()=>{y.action&&o("action",y.action)}))}const R=()=>{e.closeOnClickModal&&B(y.distinguishCancelAndClose?"close":"cancel")},j=$l(R),F=P=>{if(y.inputType!=="textarea")return P.preventDefault(),B("confirm")},B=P=>{var O;e.boxType==="prompt"&&P==="confirm"&&!Y()||(y.action=P,y.beforeClose?(O=y.beforeClose)==null||O.call(y,P,y,x):x())},Y=()=>{if(e.boxType==="prompt"){const P=y.inputPattern;if(P&&!P.test(y.inputValue||""))return y.editorErrorMessage=y.inputErrorMessage||i("el.messagebox.error"),y.validateError=!0,!1;const O=y.inputValidator;if(ft(O)){const U=O(y.inputValue);if(U===!1)return y.editorErrorMessage=y.inputErrorMessage||i("el.messagebox.error"),y.validateError=!0,!1;if(it(U))return y.editorErrorMessage=U,y.validateError=!0,!1}}return y.editorErrorMessage="",y.validateError=!1,!0},D=()=>{var P,O;const U=(P=C.value)==null?void 0:P.$refs;return(O=U==null?void 0:U.input)!=null?O:U==null?void 0:U.textarea},Z=()=>{B("close")},Q=()=>{e.closeOnPressEscape&&Z()};return e.lockScroll&&ii(p),{...ts(y),ns:a,overlayEvent:j,visible:p,hasMessage:m,typeClass:_,contentId:v,inputId:$,btnSize:c,iconComponent:S,confirmButtonClasses:k,rootRef:r,focusStartRef:b,headerRef:T,inputRef:C,confirmRef:d,doClose:x,handleClose:Z,onCloseRequested:Q,handleWrapperClick:R,handleInputEnter:F,handleAction:B,t:i}}});function eg(e,o,t,s,a,c){const i=Xo("el-icon"),u=Xo("el-input"),p=Xo("el-button"),y=Xo("el-focus-trap"),_=Xo("el-overlay");return f(),se(Yt,{name:"fade-in-linear",onAfterLeave:v=>e.$emit("vanish"),persisted:""},{default:V(()=>[qe(w(_,{"z-index":e.zIndex,"overlay-class":[e.ns.is("message-box"),e.modalClass],mask:e.modal},{default:V(()=>[l("div",{role:"dialog","aria-label":e.title,"aria-modal":"true","aria-describedby":e.showInput?void 0:e.contentId,class:N(`${e.ns.namespace.value}-overlay-message-box`),onClick:e.overlayEvent.onClick,onMousedown:e.overlayEvent.onMousedown,onMouseup:e.overlayEvent.onMouseup},[w(y,{loop:"",trapped:e.visible,"focus-trap-el":e.rootRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:V(()=>[l("div",{ref:"rootRef",class:N([e.ns.b(),e.customClass,e.ns.is("draggable",e.draggable),{[e.ns.m("center")]:e.center}]),style:ye(e.customStyle),tabindex:"-1",onClick:Re(()=>{},["stop"])},[e.title!==null&&e.title!==void 0?(f(),I("div",{key:0,ref:"headerRef",class:N([e.ns.e("header"),{"show-close":e.showClose}])},[l("div",{class:N(e.ns.e("title"))},[e.iconComponent&&e.center?(f(),se(i,{key:0,class:N([e.ns.e("status"),e.typeClass])},{default:V(()=>[(f(),se(nt(e.iconComponent)))]),_:1},8,["class"])):X("v-if",!0),l("span",null,ie(e.title),1)],2),e.showClose?(f(),I("button",{key:0,type:"button",class:N(e.ns.e("headerbtn")),"aria-label":e.t("el.messagebox.close"),onClick:v=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),onKeydown:_t(Re(v=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"])},[w(i,{class:N(e.ns.e("close"))},{default:V(()=>[(f(),se(nt(e.closeIcon||"close")))]),_:1},8,["class"])],42,["aria-label","onClick","onKeydown"])):X("v-if",!0)],2)):X("v-if",!0),l("div",{id:e.contentId,class:N(e.ns.e("content"))},[l("div",{class:N(e.ns.e("container"))},[e.iconComponent&&!e.center&&e.hasMessage?(f(),se(i,{key:0,class:N([e.ns.e("status"),e.typeClass])},{default:V(()=>[(f(),se(nt(e.iconComponent)))]),_:1},8,["class"])):X("v-if",!0),e.hasMessage?(f(),I("div",{key:1,class:N(e.ns.e("message"))},[Te(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(f(),se(nt(e.showInput?"label":"p"),{key:1,for:e.showInput?e.inputId:void 0,innerHTML:e.message},null,8,["for","innerHTML"])):(f(),se(nt(e.showInput?"label":"p"),{key:0,for:e.showInput?e.inputId:void 0},{default:V(()=>[Ie(ie(e.dangerouslyUseHTMLString?"":e.message),1)]),_:1},8,["for"]))])],2)):X("v-if",!0)],2),qe(l("div",{class:N(e.ns.e("input"))},[w(u,{id:e.inputId,ref:"inputRef",modelValue:e.inputValue,"onUpdate:modelValue":v=>e.inputValue=v,type:e.inputType,placeholder:e.inputPlaceholder,"aria-invalid":e.validateError,class:N({invalid:e.validateError}),onKeydown:_t(e.handleInputEnter,["enter"])},null,8,["id","modelValue","onUpdate:modelValue","type","placeholder","aria-invalid","class","onKeydown"]),l("div",{class:N(e.ns.e("errormsg")),style:ye({visibility:e.editorErrorMessage?"visible":"hidden"})},ie(e.editorErrorMessage),7)],2),[[pt,e.showInput]])],10,["id"]),l("div",{class:N(e.ns.e("btns"))},[e.showCancelButton?(f(),se(p,{key:0,loading:e.cancelButtonLoading,"loading-icon":e.cancelButtonLoadingIcon,class:N([e.cancelButtonClass]),round:e.roundButton,size:e.btnSize,onClick:v=>e.handleAction("cancel"),onKeydown:_t(Re(v=>e.handleAction("cancel"),["prevent"]),["enter"])},{default:V(()=>[Ie(ie(e.cancelButtonText||e.t("el.messagebox.cancel")),1)]),_:1},8,["loading","loading-icon","class","round","size","onClick","onKeydown"])):X("v-if",!0),qe(w(p,{ref:"confirmRef",type:"primary",loading:e.confirmButtonLoading,"loading-icon":e.confirmButtonLoadingIcon,class:N([e.confirmButtonClasses]),round:e.roundButton,disabled:e.confirmButtonDisabled,size:e.btnSize,onClick:v=>e.handleAction("confirm"),onKeydown:_t(Re(v=>e.handleAction("confirm"),["prevent"]),["enter"])},{default:V(()=>[Ie(ie(e.confirmButtonText||e.t("el.messagebox.confirm")),1)]),_:1},8,["loading","loading-icon","class","round","disabled","size","onClick","onKeydown"]),[[pt,e.showConfirmButton]])],2)],14,["onClick"])]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,["aria-label","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["z-index","overlay-class","mask"]),[[pt,e.visible]])]),_:3},8,["onAfterLeave"])}var tg=Ye(Jm,[["render",eg],["__file","index.vue"]]);const es=new Map,og=e=>{let o=document.body;return e.appendTo&&(it(e.appendTo)&&(o=document.querySelector(e.appendTo)),Ot(e.appendTo)&&(o=e.appendTo),Ot(o)||(o=document.body)),o},sg=(e,o,t=null)=>{const s=w(tg,e,ft(e.message)||uo(e.message)?{default:ft(e.message)?e.message:()=>e.message}:null);return s.appContext=t,Eo(s,o),og(e).appendChild(o.firstElementChild),s.component},lg=()=>document.createElement("div"),ag=(e,o)=>{const t=lg();e.onVanish=()=>{Eo(null,t),es.delete(a)},e.onAction=c=>{const i=es.get(a);let u;e.showInput?u={value:a.inputValue,action:c}:u=c,e.callback?e.callback(u,s.proxy):c==="cancel"||c==="close"?e.distinguishCancelAndClose&&c!=="cancel"?i.reject("close"):i.reject("cancel"):i.resolve(u)};const s=sg(e,t,o),a=s.proxy;for(const c in e)xs(e,c)&&!xs(a.$props,c)&&(c==="closeIcon"&&Qt(e[c])?a[c]=eo(e[c]):a[c]=e[c]);return a.visible=!0,a};function jo(e,o=null){if(!et)return Promise.reject();let t;return it(e)||uo(e)?e={message:e}:t=e.callback,new Promise((s,a)=>{const c=ag(e,o??jo._context);es.set(c,{options:e,callback:t,resolve:s,reject:a})})}const ng=["alert","confirm","prompt"],ig={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};ng.forEach(e=>{jo[e]=rg(e)});function rg(e){return(o,t,s,a)=>{let c="";return Qt(t)?(s=t,c=""):Wo(t)?c="":c=t,jo(Object.assign({title:c,message:o,type:"",...ig[e]},s,{boxType:e}),a)}}jo.close=()=>{es.forEach((e,o)=>{o.doClose()}),es.clear()};jo._context=null;const Jt=jo;Jt.install=e=>{Jt._context=e._context,e.config.globalProperties.$msgbox=Jt,e.config.globalProperties.$messageBox=Jt,e.config.globalProperties.$alert=Jt.alert,e.config.globalProperties.$confirm=Jt.confirm,e.config.globalProperties.$prompt=Jt.prompt};const rl=Jt;var cg=Object.defineProperty,ug=(e,o,t)=>o in e?cg(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,dg=(e,o,t)=>ug(e,o+"",t);const fg=e=>new Promise((o,t)=>{const s=new FileReader;s.onload=()=>o(s.result),s.onerror=()=>t(new Error("文件读取失败")),s.readAsArrayBuffer(e)}),vg=async e=>{try{return(await Gr.convertToHtml({arrayBuffer:e})).value}catch{Se.error("文件解析失败，请检查文件格式")}},Qa=e=>new Promise((o,t)=>{const s=new FileReader;s.onload=()=>o(s.result),s.onerror=()=>t(new Error("文件读取失败")),s.readAsText(e,"UTF-8")}),pg=e=>{const o=e.split(/\n\s*\n/);let t=[];return o.forEach(s=>{const a=s.split(`
`).filter(c=>c.trim()!=="");if(a.length>=3){const c=a.slice(2);t.push(...c)}}),t.join(`
`)},Pl=(e,o)=>{const t=new Set(o.map(c=>c.id)),s={};return o.forEach(c=>{s[c.label]=c.value}),e.map(c=>{const i=Number(c);return t.has(i)?i:s[c]!==void 0?s[c]:c})},mg=e=>{if(!e||e.length!==4)throw new Error("Invalid RGBA array. It must contain exactly 4 elements.");const[o,t,s,a]=e;if(o<0||o>255||t<0||t>255||s<0||s>255||a<0||a>1)throw new Error("Invalid RGBA values. R, G, B must be between 0 and 255, and A must be between 0 and 1.");return`rgba(${o}, ${t}, ${s}, ${a})`},gg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAlgAAAMgCAIAAABwAouTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAEXWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSfvu78nIGlkPSdXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQnPz4KPHg6eG1wbWV0YSB4bWxuczp4PSdhZG9iZTpuczptZXRhLyc+CjxyZGY6UkRGIHhtbG5zOnJkZj0naHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyc+CgogPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9JycKICB4bWxuczpBdHRyaWI9J2h0dHA6Ly9ucy5hdHRyaWJ1dGlvbi5jb20vYWRzLzEuMC8nPgogIDxBdHRyaWI6QWRzPgogICA8cmRmOlNlcT4KICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0nUmVzb3VyY2UnPgogICAgIDxBdHRyaWI6Q3JlYXRlZD4yMDI0LTEyLTE3PC9BdHRyaWI6Q3JlYXRlZD4KICAgICA8QXR0cmliOkV4dElkPmNhZDI3NzliLTAzOTAtNGU4MS04YmMxLWM5ZDEzMTZlYjQ5NzwvQXR0cmliOkV4dElkPgogICAgIDxBdHRyaWI6VG91Y2hUeXBlPjI8L0F0dHJpYjpUb3VjaFR5cGU+CiAgICA8L3JkZjpsaT4KICAgPC9yZGY6U2VxPgogIDwvQXR0cmliOkFkcz4KIDwvcmRmOkRlc2NyaXB0aW9uPgoKIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PScnCiAgeG1sbnM6ZGM9J2h0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvJz4KICA8ZGM6dGl0bGU+CiAgIDxyZGY6QWx0PgogICAgPHJkZjpsaSB4bWw6bGFuZz0neC1kZWZhdWx0Jz7mmoLml6DlsIHpnaIgLSAxPC9yZGY6bGk+CiAgIDwvcmRmOkFsdD4KICA8L2RjOnRpdGxlPgogPC9yZGY6RGVzY3JpcHRpb24+CgogPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9JycKICB4bWxuczpwZGY9J2h0dHA6Ly9ucy5hZG9iZS5jb20vcGRm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",Ha="data:image/svg+xml,%3csvg%20t='1743602139053'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='16242'%20width='64'%20height='64'%3e%3cpath%20d='M910.02%20462.14c27.48-0.12%2049.85%2022.05%2049.97%2049.53%200.12%2026.2-20.11%2048-46.24%2049.85l-3.73%200.12H113.98c-27.48%200.12-49.86-22.05-49.98-49.53-0.12-26.2%2020.11-48%2046.24-49.85l3.73-0.12h796.05z'%20p-id='16243'%20fill='%23707070'%3e%3c/path%3e%3cpath%20d='M512%2064.11c26.04-0.01%2047.68%2020.06%2049.63%2046.02l0.12%203.73v796.05c0.12%2027.48-22.05%2049.85-49.53%2049.98-26.2%200.12-48-20.11-49.85-46.24l-0.12-3.73V113.86c0-27.47%2022.27-49.75%2049.75-49.75z'%20p-id='16244'%20fill='%23707070'%3e%3c/path%3e%3c/svg%3e";class Cs extends Error{constructor(o,t,s){super(t),this.code=o,this.message=t,this.data=s,this.name="RequestError"}}class hg{constructor(o){dg(this,"instance"),this.instance=Yr.create(o),this.instance.interceptors.request.use(t=>t,t=>Promise.reject(t)),this.instance.interceptors.response.use(t=>{const{filterResponse:s}=t.config;return t.data&&typeof t.data=="object"?t.data.code!==0?Promise.reject(new Cs(t.data.code,t.data.message,t.data.data)):s?s(t.data.data):t.data:s?s(t.data):t.data},t=>{if(t.response){const s=t.response.status;let a="请求错误";switch(s){case 400:a="请求参数错误";break;case 401:a="未授权，请登录";break;case 403:a="拒绝访问";break;case 404:a="请求地址不存在";break;case 500:a="服务器内部错误";break;default:a=`网络错误 (${s})`}return Promise.reject(new Cs(s,a))}else return t.request?Promise.reject(new Cs(-1,"网络异常，请检查网络连接")):Promise.reject(new Cs(-1,t.message))})}get(o,t){return this.instance.get(o,t)}post(o,t,s){return this.instance.post(o,t,s)}put(o,t,s){return this.instance.put(o,t,s)}delete(o,t){return this.instance.delete(o,t)}patch(o,t,s){return this.instance.patch(o,t,s)}}const yg={baseURL:"/api",timeout:6e5,headers:{"Content-Type":"application/json"}},wt=new hg(yg);function hi(e,o=1,t){const s=[];return e.forEach(a=>{const c={value:String(a.id),label:a.name,type:o,parent_id:t,is_public:a.is_public};if(s.push(c),a.children&&a.children.length>0){const i=hi(a.children,o+1,a.id);s.push(...i)}}),s}const yi=async e=>wt.post("/novel/material/tags/add",e),kg=async e=>wt.post("/novel/material/upload/novel",e,{headers:{"Content-Type":"multipart/form-data"}}),bg=async(e=!1,o,t)=>{const s=e?"/short_film/material/upload":"/novel/material/upload";return wt.post(s,o,{headers:{"Content-Type":"multipart/form-data"},url:s,onUploadProgress:a=>{if(t&&a&&a.total){let c=Math.round(a.loaded*100/a.total);t(c)}}})},Zs=async(e=!1,o,t=[],s=[],a=!0)=>{const c={...o};let i=e?"/short_film/material/list":"/novel/material/list";if(s&&s.length>0){const u=[];for(const[p,y]of Object.entries(c))u.push(`${encodeURIComponent(p)}=${encodeURIComponent(y)}`);for(const p of s)u.push(`tag_ids=${encodeURIComponent(p)}`);return u.push(`tags_relation=${a?"and":"or"}`),i=`${i}?${u.join("&")}`,wt.get(i)}if(t&&t.length>0){const u=[];for(const[p,y]of Object.entries(c))u.push(`${encodeURIComponent(p)}=${encodeURIComponent(y)}`);for(const p of t)u.push(`top_ids=${encodeURIComponent(p)}`);return i=`${i}?${u.join("&")}`,wt.get(i)}return wt.get(i,{params:c})},Cg=async e=>wt.post("/novel/material/update/novel",e,{headers:{"Content-Type":"multipart/form-data"}}),_g=async e=>wt.post("/novel/material/batch_update",e),wg=async e=>wt.post(`/novel/material/tags/${e}/share`),Ig=async e=>wt.post("/novel/material/batch_remove_tags",e),Vo=async(e,o)=>wt.get("/novel/material/tags/tree",{params:e,filterResponse:async t=>hi(t.list)}),Tg=async e=>wt.post(`/novel/material/${e}/delete`),xg=async e=>wt.post("/novel/material/background_image/update",e),Fg={class:"tags-container"},Sg={class:"tags-column personal-tags"},Eg={class:"column-header"},$g={class:"tags-list"},Rg={key:0,class:"editable-tag-input-container"},Pg={class:"tag-content"},Og={key:0,class:"public-badge"},Vg={class:"tags-column shared-tags"},Lg={class:"column-header"},Bg={class:"tags-list"},Ag={key:0,class:"editable-tag-input-container"},jg={class:"tag-label"},Qg={class:"tag-content"},Hg=de({__name:"ComSelectTag",props:sa({tagsList:{},category:{}},{modelValue:{default:[]},modelModifiers:{}}),emits:sa(["createNewTag","refresh"],["update:modelValue"]),setup(e,{emit:o}){const t=ir(e,"modelValue"),s=e,a=o,c=E(!1),i=E(!1),u=E(""),p=E(""),y=E(null),_=E(null);let v=null;const $=M(()=>s.tagsList.filter(b=>b.tagType==="shared")),S=M(()=>s.tagsList.filter(b=>b.tagType==="personal")),m=b=>{b==="personal"?(c.value=!0,Ae(()=>{var C;(C=y.value)==null||C.focus()})):(i.value=!0,Ae(()=>{var C;(C=_.value)==null||C.focus()}))},r=async(b,C)=>{C&&C.preventDefault();const d=b==="personal"?u.value.trim():p.value.trim();if(!d){Se.warning("标签名称不能为空！");return}if(s.tagsList.some(g=>b==="personal"?g.tagType==="personal"&&(g.label||g.name)===d:g.tagType==="shared"&&(g.label||g.name)===d)){Se.warning(`该${b==="personal"?"个人":"共享"}标签名已存在`);return}try{(await yi({name:d,is_public:b==="shared",category:s.category})).code===0&&(Se.success("新增标签成功!"),b==="personal"?(c.value=!1,u.value=""):(i.value=!1,p.value=""),v=d,await a("refresh"))}catch{Se.error("新增标签失败!")}},T=b=>{b==="personal"?(u.value="",c.value=!1):(p.value="",i.value=!1)};return me(()=>s.tagsList,b=>{v&&Ae(()=>{const C=b.find(d=>(d.label||d.name)===v);if(C){const d=Array.from(new Set([...t.value,C.value]));t.value=d}v=null})}),(b,C)=>{const d=Hs,k=Fl,g=Sl;return f(),I("div",Fg,[l("div",Sg,[l("div",Eg,[C[10]||(C[10]=l("div",null,"个人标签",-1)),l("img",{src:Ha,class:"add-tag-icon",onClick:C[0]||(C[0]=h=>m("personal"))})]),l("div",$g,[c.value?(f(),I("div",Rg,[w(d,{ref_key:"personalTagInputRef",ref:y,modelValue:u.value,"onUpdate:modelValue":C[1]||(C[1]=h=>u.value=h),placeholder:"输入标签名称后回车",maxlength:"20",onKeyup:C[2]||(C[2]=_t(h=>r("personal",h),["enter"])),onBlur:C[3]||(C[3]=h=>T("personal"))},null,8,["modelValue"])])):X("",!0),w(g,{modelValue:t.value,"onUpdate:modelValue":C[4]||(C[4]=h=>t.value=h),class:"custom-tags-group"},{default:V(()=>[(f(!0),I(Ee,null,He(S.value,h=>(f(),se(k,{key:h.value,value:h.value,class:"tag-checkbox tag-checkbox-personal"},{default:V(()=>[l("span",{class:"tag-label",ref_for:!0,ref:"tagLabel"},[l("div",Pg,[l("span",{class:N(["tag-icon",h.tagType==="shared"||h.is_public?"shared-tag-icon":"personal-tag-icon"])},null,2),Ie(" "+ie(h.label),1)]),h.is_public?(f(),I("span",Og,"已共享")):X("",!0)],512)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])]),l("div",Vg,[l("div",Lg,[C[11]||(C[11]=l("div",null,"共享标签",-1)),l("img",{src:Ha,class:"add-tag-icon",onClick:C[5]||(C[5]=h=>m("shared"))})]),l("div",Bg,[i.value?(f(),I("div",Ag,[w(d,{ref_key:"sharedTagInputRef",ref:_,modelValue:p.value,"onUpdate:modelValue":C[6]||(C[6]=h=>p.value=h),placeholder:"输入标签名称后回车",maxlength:"20",onKeyup:C[7]||(C[7]=_t(h=>r("shared",h),["enter"])),onBlur:C[8]||(C[8]=h=>T("shared"))},null,8,["modelValue"])])):X("",!0),w(g,{modelValue:t.value,"onUpdate:modelValue":C[9]||(C[9]=h=>t.value=h),class:"custom-tags-group"},{default:V(()=>[(f(!0),I(Ee,null,He($.value,h=>(f(),se(k,{key:h.value,value:h.value,class:"tag-checkbox"},{default:V(()=>[l("span",jg,[l("span",Qg,[C[12]||(C[12]=l("span",{class:"tag-icon shared-tag-icon"},null,-1)),Ie(" "+ie(h.label),1)])])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])])])}}}),xt=(e,o)=>{const t=e.__vccOpts||e;for(const[s,a]of o)t[s]=a;return t},Ol=xt(Hg,[["__scopeId","data-v-5877e2ac"]]);function Vl(){const e=E([]);return{tagOptionsList:e,refreshTagLists:async t=>{let a=[...await Vo({...t})];a.forEach(u=>{u.tagType="personal"});let i=[...await Vo({...t,is_public:!0})];return i.forEach(u=>{u.tagType="shared"}),e.value=[...a,...i],e.value}}}const Ks="/api";var Is=(e=>(e.video="解压视频",e.background="背景图片",e.novel="小说",e.firstFrames="首帧视频",e.lastFrames="尾帧视频",e.stickers="贴图",e.stickersFake="贴片",e.music="背景音乐",e.textImage="模板图片",e.textVideo="模板视频",e.shortPlayVideo="短剧视频",e.shortPlayStickers="短剧贴图",e.shortPlayLastFrames="短剧尾帧",e))(Is||{});const Mg={class:"dialog-header"},Ug=["id"],zg={class:"editor-container"},Ng={class:"upload-btn-container"},Kg={key:0,class:"files-container"},Dg={key:0,class:"file-list-container"},Xg={class:"file-name"},Gg={key:1,class:"file-list-container"},Yg={class:"file-name"},qg={class:"dialog-footer"},Wg=de({__name:"ComNovelAdd",emits:["submitForm"],setup(e,{expose:o,emit:t}){const s=Ks,a=E(!1),c=E(""),i=E(),u=E(!1);let p=new FormData;const y=E(),_=E(),v=E(),$=E(),S=E(),m=t,r=E("add"),T=()=>{a.value=!1,b(),d()},b=()=>{i.value&&i.value.resetFields(),p=new FormData,R.title="",R.tags=[],R.is_public=!1,R.cover=[],R.audio=[],R.subtitle=[],R.quillEditorContent="<p></p>",R.introduction="",R.url=""},C=E(""),d=()=>{v.value&&v.value.clearFiles()},k=async()=>{try{const G=await(await fetch(gg)).blob();$.value=new File([G],"default.png",{type:G.type})}catch(re){console.error("加载默认图片失败:",re),Se.error("加载默认图片失败！")}},{tagOptionsList:g,refreshTagLists:h}=Vl(),x=async(re,G,L,ne)=>{if(!G){T();return}if(k(),C.value=ne,b(),await h({category:C.value}),a.value=G,c.value=re.title||"",R.type=re.type||"",r.value=re.type||"",re.type=="edit"&&L.length>0){R.id=L[0].id?L[0].id:"",R.title=L[0].name?L[0].name:"",R.is_public=L[0].is_public?L[0].is_public:!1;let fe=[];L[0].tags&&L[0].tags.length>0&&(fe=L[0].tags.map(ce=>`${ce.id}`));const A=g.value.map(ce=>ce.value);fe.filter(ce=>!A.includes(ce)).forEach(ce=>{g.value.push({value:ce,label:ce,type:3})}),R.tags=fe,R.cover.push({name:L[0].cover_name?L[0].cover_name:"",url:L[0].cover_url?L[0].cover_url:""});let J=L[0].file_url?L[0].file_url:"";J!==""&&fetch(s+J).then(ce=>ce.text().then(pe=>{R.quillEditorContent=pe})),(L[0].subtitle_url||L[0].subtitle_name)&&R.subtitle.push({name:L[0].subtitle_name?L[0].subtitle_name:"",url:L[0].subtitle_url?L[0].subtitle_url:""}),(L[0].audio_url||L[0].audio_name)&&R.audio.push({name:L[0].audio_name?L[0].audio_name:"",url:L[0].audio_url?L[0].audio_url:""}),R.introduction=L[0].describe?L[0].describe:"",R.url=L[0].web_url?L[0].web_url:""}},R=Be({is_public:!1,title:"",type:"",file:[],tags:[],cover:[],audio:[],subtitle:[],quillEditorContent:"",introduction:"",url:""}),j={title:[{required:!0,message:"请输入标题",trigger:"blur"}],tags:[{required:!0,message:"请选择标签",trigger:"change"}],cover:[{required:!1,message:"请选择封面",trigger:"change"}],quillEditorContent:[{required:!1,message:"请输入正文",trigger:"blur"}],audio:[{required:!1,message:"请上传音频",trigger:"change"}],subtitle:[{required:!1,message:"请上传字幕",trigger:"change"}],is_public:[{required:!0,message:"请选择是否公开",trigger:"change"}]},F={modules:{toolbar:[["bold","italic","underline","strike"],[{size:["small",!1,"large","huge"]}],[{font:[]}],[{align:[]}],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],[{header:1},{header:2}],["image"],[{direction:"rtl"}],[{color:[]}]]},placeholder:"请输入内容..."},B=async re=>{var G;if(R.audio.length>0||R.subtitle.length>0){if(j.quillEditorContent[0].required=!1,j.audio[0].required=!0,j.subtitle[0].required=!0,R.audio.length===0||R.subtitle.length===0){R.audio.length===0?Se.error("必须同时上传音频和字幕文件，请上传音频文件"):Se.error("必须同时上传音频和字幕文件，请上传字幕文件");return}}else R.quillEditorContent!==""&&(j.quillEditorContent[0].required=!0,j.audio[0].required=!1,j.subtitle[0].required=!1);if(!R.audio.length&&!R.subtitle.length&&(R.quillEditorContent==="<p></p>"||R.quillEditorContent==="<p><br></p>")){Se.error("请选择字幕/音频或输入正文");return}(G=i.value)==null||G.validate((L,ne)=>{if(L){if(R.type=="edit"&&p.append("novel_id",R.id),R.tags.length>=1&&Pl(R.tags,g.value).forEach(K=>{p.append("tag_ids",K)}),p.append("title",R.title),p.append("text",R.quillEditorContent==="<p></p>"||R.quillEditorContent==="<p><br></p>"?"":R.quillEditorContent),p.append("describe",R.introduction),p.append("web_url",R.url),p.append("is_public",String(R.is_public)),!p.get("cover")){const A=$.value;if(!A){Se.error("未选择文件且默认图片加载失败！");return}p.append("cover",A)}p.append("tabTypeRes","小说"),Ae(()=>{m("submitForm",p,re)})}})},Y=async re=>{const{file:G}=re;p.append("cover",G)},D=re=>{y.value.clearFiles();const G=re[0];G.uid=ro(),y.value.handleStart(G)},Z=()=>{_.value.click()},Q=re=>{var G,L;const ne=re.target,fe=ne.files;if(!fe||fe.length===0)return;let A=null,K=null;for(let J=0;J<fe.length;J++){const ce=fe[J];ce.type.startsWith("audio/")&&ce.type!=="video/mp4"?A=ce:ce.name.endsWith(".srt")?K=ce:ce.type==="video/mp4"?Se.warning(`不支持mp4格式的文件: ${ce.name}`):Se.warning(`不支持的文件类型: ${ce.name}`)}if(A){const J={name:A.name,raw:A,uid:ro(),type:A.type};R.audio=[J],(G=i.value)==null||G.validateField(["audio"]),p.delete("audio"),p.append("audio",A)}if(K){const J={name:K.name,raw:K,uid:ro(),type:K.type};R.subtitle=[J],(L=i.value)==null||L.validateField(["subtitle"]),p.delete("subtitle"),p.append("subtitle",K)}A&&K?Se.success("音频和字幕文件上传成功"):A?R.subtitle.length>0?Se.success("音频文件上传成功"):Se.warning("请继续上传字幕文件"):K?R.audio.length>0?Se.success("字幕文件上传成功"):Se.warning("请继续上传音频文件"):Se.warning("请选择音频和字幕文件"),ne.value=""},P=re=>{var G,L;re==="audio"?(R.audio=[],(G=i.value)==null||G.validateField(["audio"]),p.delete("audio"),Se.success("已清除音频文件")):re==="subtitle"&&(R.subtitle=[],(L=i.value)==null||L.validateField(["subtitle"]),p.delete("subtitle"),Se.success("已清除字幕文件"))},O=(re,G,L)=>{var ne;(ne=i.value)==null||ne.validateField(["cover"]),p.delete("cover"),p.append("cover",re.raw)},U=(re,G,L)=>{Ae(()=>{var ne;G.length<=0&&((ne=i.value)==null||ne.validateField(["cover"]),p.delete("cover"))})},ae=async re=>{try{if(re.name.endsWith(".docx")){const G=await fg(re.raw),L=await vg(G);R.quillEditorContent=L}else if(re.name.endsWith(".srt")){const G=await Qa(re.raw),L=pg(G);R.quillEditorContent=ue(L)}else if(re.name.endsWith(".txt")){const G=await Qa(re.raw);R.quillEditorContent=ue(G)}else Se.error("不支持的文件格式")}catch(G){Se.error("文件解析失败: "+G.message)}},ue=re=>re.split(`
`).map(G=>`<p>${G}</p>`).join(""),oe=re=>{v.value.clearFiles();const G=re[0];G.uid=ro(),v.value.handleStart(G)},H=re=>re.type.startsWith("image/")?!0:(Se.error("只能上传图片文件"),!1);return o({init:x}),(re,G)=>{const L=Ne,ne=Hs,fe=Ns,A=ao,K=pi,J=Yn,ce=zs,pe=ds,ve=ko;return f(),se(pe,{modelValue:a.value,"onUpdate:modelValue":G[11]||(G[11]=he=>a.value=he),width:"750","custom-class":"custom-dialog",class:"upload-dialog","before-close":T,"show-close":!1,fullscreen:!1,"modal-append-to-body":!0,"close-on-click-modal":!1,"destroy-on-close":!0,top:"5vh","append-to-body":!0},{header:V(({titleId:he,titleClass:Pe})=>[l("div",Mg,[l("span",{id:he,class:N(Pe)},ie(c.value),11,Ug),w(L,{class:"close-icon",onClick:T},{default:V(()=>[w(n(ht))]),_:1})])]),footer:V(()=>[l("div",qg,[w(A,{onClick:G[9]||(G[9]=he=>T())},{default:V(()=>G[16]||(G[16]=[Ie("关闭")])),_:1,__:[16]}),w(A,{class:"btn-primary",onClick:G[10]||(G[10]=he=>B(r.value))},{default:V(()=>G[17]||(G[17]=[Ie("提交")])),_:1,__:[17]})])]),default:V(()=>[qe((f(),se(ce,{ref_key:"otherForm",ref:i,model:R,rules:j,"label-width":"90px"},{default:V(()=>[w(fe,{label:"标题",prop:"title"},{default:V(()=>[w(ne,{modelValue:R.title,"onUpdate:modelValue":G[0]||(G[0]=he=>R.title=he),placeholder:"请输入标题"},null,8,["modelValue"])]),_:1}),w(fe,{label:"标签",prop:"tags"},{default:V(()=>[w(Ol,{modelValue:R.tags,"onUpdate:modelValue":G[1]||(G[1]=he=>R.tags=he),tagsList:n(g),category:C.value,onRefresh:G[2]||(G[2]=he=>n(h)({category:C.value}))},null,8,["modelValue","tagsList","category"])]),_:1}),w(fe,{label:"封面",prop:"cover"},{default:V(()=>[w(K,{ref_key:"uploadCoverRef",ref:y,class:"avatar-uploader",action:"#","file-list":R.cover,"onUpdate:fileList":G[3]||(G[3]=he=>R.cover=he),"http-request":Y,accept:"image/*",limit:1,"on-exceed":D,"on-change":(he,Pe)=>O(he),"on-remove":(he,Pe)=>U(he,Pe),"before-upload":H},{default:V(()=>[w(A,{size:"small"},{default:V(()=>G[12]||(G[12]=[Ie("上传封面")])),_:1,__:[12]})]),_:1},8,["file-list","on-change","on-remove"])]),_:1}),w(fe,{label:"正文",prop:"quillEditorContent"},{default:V(()=>[w(K,{ref_key:"textContentUpload",ref:v,action:"#","auto-upload":!1,"on-change":ae,accept:".docx,.srt,.txt",limit:1,"on-exceed":oe},{default:V(()=>[w(A,{type:"primary",class:"btn-primary"},{default:V(()=>G[13]||(G[13]=[Ie("上传文件 (.docx 或 .txt 或 .srt)")])),_:1,__:[13]})]),_:1},512),l("div",zg,[w(n(nr),{theme:"snow",ref_key:"myQuillEditor",ref:S,content:R.quillEditorContent,"onUpdate:content":G[4]||(G[4]=he=>R.quillEditorContent=he),options:F,contentType:"html"},null,8,["content"])])]),_:1}),w(fe,{label:"音频和字幕",prop:"audioSubtitle",class:"subAudioOption"},{default:V(()=>[l("div",Ng,[w(A,{size:"small",onClick:Z},{default:V(()=>G[14]||(G[14]=[Ie("选择音频和字幕文件")])),_:1,__:[14]}),G[15]||(G[15]=l("span",{class:"upload-tip"},"可同时选择或分次选择音频(mp3)和字幕(.srt)，每种只能上传一个，新文件会替换旧文件",-1)),l("input",{ref_key:"fileInput",ref:_,type:"file",accept:"audio/*,.srt",style:{display:"none"},onChange:Q,multiple:""},null,544)]),R.audio.length>0||R.subtitle.length>0?(f(),I("div",Kg,[R.subtitle.length>0?(f(),I("div",Dg,[(f(!0),I(Ee,null,He(R.subtitle,(he,Pe)=>(f(),I("div",{key:Pe,class:"file-item"},[w(J,{content:he.name,placement:"top","show-after":500,"popper-class":"custom-tooltip","max-width":300},{default:V(()=>[l("span",Xg,ie(he.name),1)]),_:2},1032,["content"]),w(L,{class:"file-remove-icon",onClick:G[5]||(G[5]=()=>P("subtitle"))},{default:V(()=>[w(n(ht))]),_:1})]))),128))])):X("",!0),R.audio.length>0?(f(),I("div",Gg,[(f(!0),I(Ee,null,He(R.audio,(he,Pe)=>(f(),I("div",{key:Pe,class:"file-item"},[w(J,{content:he.name,placement:"top","show-after":500,"popper-class":"custom-tooltip","max-width":200},{default:V(()=>[l("span",Yg,ie(he.name),1)]),_:2},1032,["content"]),w(L,{class:"file-remove-icon",onClick:G[6]||(G[6]=()=>P("audio"))},{default:V(()=>[w(n(ht))]),_:1})]))),128))])):X("",!0)])):X("",!0)]),_:1}),w(fe,{label:"简介",prop:"introduction"},{default:V(()=>[w(ne,{modelValue:R.introduction,"onUpdate:modelValue":G[7]||(G[7]=he=>R.introduction=he),placeholder:"请输入简介"},null,8,["modelValue"])]),_:1}),w(fe,{label:"网址",prop:"url"},{default:V(()=>[w(ne,{modelValue:R.url,"onUpdate:modelValue":G[8]||(G[8]=he=>R.url=he),placeholder:"请输入网址"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])),[[ve,u.value]])]),_:1},8,["modelValue"])}}}),Ll=xt(Wg,[["__scopeId","data-v-c717351a"]]),Zg={class:"dialog-header"},Jg=["id"],eh={class:"dialog-footer"},th=de({__name:"TagAdd",emits:["submitForm","createNewTag"],setup(e,{expose:o,emit:t}){const s=E(!1),a=E(""),c=E(),i=E(!1),u=t,p=Be({tags:[],type:""}),{tagOptionsList:y,refreshTagLists:_}=Vl(),v=()=>{s.value=!1,m()},$=E(""),S=async(b,C)=>{s.value=C,C&&(a.value=(b==null?void 0:b.title)||"",$.value=(b==null?void 0:b.type)||"",m(),await _({category:$.value}))},m=()=>{c.value&&c.value.resetFields(),p.type=""},r={tags:[{required:!0,message:"请选择标签",trigger:"change"}]},T=async()=>{var b;(b=c.value)==null||b.validate((C,d)=>{if(C){let k=JSON.parse(JSON.stringify(p));p.tags.length>0&&(k.tags=Pl(p.tags,y.value)),Ae(()=>{u("submitForm",k.tags)})}})};return o({init:S}),(b,C)=>{const d=Ne,k=Ns,g=zs,h=ao,x=ds,R=ko;return f(),se(x,{modelValue:s.value,"onUpdate:modelValue":C[5]||(C[5]=j=>s.value=j),width:"800","custom-class":"custom-dialog",class:"upload-dialog","before-close":v,"show-close":!1,"close-on-click-modal":!1,heigth:"400"},{header:V(({close:j,titleId:F,titleClass:B})=>[l("div",Zg,[l("span",{id:F,class:N(B)},ie(a.value),11,Jg),w(d,{class:"close-icon",onClick:v},{default:V(()=>[w(n(ht))]),_:1})])]),footer:V(()=>[l("div",eh,[w(h,{onClick:C[3]||(C[3]=j=>v())},{default:V(()=>C[6]||(C[6]=[Ie("关闭")])),_:1,__:[6]}),w(h,{type:"primary",class:"btn-primary",onClick:C[4]||(C[4]=j=>T())},{default:V(()=>C[7]||(C[7]=[Ie("提交")])),_:1,__:[7]})])]),default:V(()=>[qe((f(),se(g,{ref_key:"otherForm",ref:c,model:p,rules:r,"label-position":"left","require-asterisk-position":"right",class:"vertical-form",onSubmit:C[2]||(C[2]=Re(()=>{},["prevent"]))},{default:V(()=>[w(k,{label:"标签",prop:"tags",style:{height:"400px"}},{default:V(()=>[w(Ol,{modelValue:p.tags,"onUpdate:modelValue":C[0]||(C[0]=j=>p.tags=j),tagsList:n(y),category:$.value,onRefresh:C[1]||(C[1]=j=>n(_)({category:$.value}))},null,8,["modelValue","tagsList","category"])]),_:1})]),_:1},8,["model"])),[[R,i.value]])]),_:1},8,["modelValue"])}}}),oh=xt(th,[["__scopeId","data-v-720f2734"]]),sh={class:"dialog-header"},lh=["id"],ah={class:"upload-type-tabs"},nh=["onClick"],ih={key:0,class:"upload-count-tip"},rh={key:0,class:"tips_label"},ch={key:1,class:"tips_label"},uh={class:"custom-file-item"},dh={key:0,class:"file-prefix"},fh={key:1,class:"file-prefix-placeholder"},vh=["title"],ph={class:"upload-progress"},mh={key:0,class:"processing-text"},gh={class:"dialog-footer"},hh=de({__name:"ComMaterialAdd",props:{propUploadTypeChange:{type:Boolean},propUploadTypeDisabled:{type:Boolean}},emits:["submitForm","createNewTag","resetLoading"],setup(e,{expose:o,emit:t}){const s=E(!1),a=E(""),c=E(),i=E(!1),u=t,{tagOptionsList:p,refreshTagLists:y}=Vl(),_=()=>{s.value=!1,r.value=!1,m.value=0,u("resetLoading"),F()},v=E(""),$=E(!0),S=E(void 0),m=E(0),r=E(!1),T=M(()=>v.value==="短剧贴图"||v.value==="短剧视频"||v.value==="短剧尾帧"),b=U=>{m.value=U,U===100&&(r.value=!0)},C=()=>{r.value=!1,m.value=0},d=M(()=>{const U={image:[{label:"贴图",value:"贴片"},{label:"带文字图片",value:"模板图片"}],video:[{label:"尾帧视频",value:"尾帧视频"},{label:"带文字视频",value:"模板视频"}]};return v.value==="贴片"||v.value==="模板图片"?U.image:v.value==="尾帧视频"||v.value==="模板视频"?U.video:[]}),k=async(U,ae,ue,oe,H)=>{if(ae==!1){s.value=ae,m.value=0,r.value=!1,$.value=!1;return}console.log(U,11221),$.value=H??!1,s.value=ae,S.value=oe,v.value=ue,F(),!T.value&&await y({category:v.value}),a.value=(U==null?void 0:U.title)||"",R.type=(U==null?void 0:U.type)||""},g=async U=>{U!==v.value&&(v.value=U,R.uploadType=U,a.value=h(U),R.tags=[],await y({category:v.value}),console.log("标签刷新完成，当前标签列表:",p.value))};function h(U){switch(U){case"贴片":return"添加贴图";case"模板图片":return"添加带文字图片";case"尾帧视频":return"添加尾帧视频";case"模板视频":return"添加带文字视频";default:return"添加素材"}}const x=E(),R=Be({is_public:!1,name:"",type:"",file:[],fileData:[],tags:[],uploadType:""}),j=U=>{var ae;const ue=R.fileData.findIndex(H=>H.uid===U.uid);ue!==-1&&R.fileData.splice(ue,1);const oe=R.file.findIndex(H=>H.uid===U.uid);oe!==-1&&R.file.splice(oe,1),R.file.length===0&&R.fileData.length===0&&((ae=c.value)==null||ae.validateField("file"))};me(()=>v.value,U=>{R.uploadType=U},{immediate:!0});const F=()=>{c.value&&c.value.resetFields(),R.file=[],R.fileData=[],R.name="",R.type=""},B={tags:[{required:!0,message:"请选择标签",trigger:"change"}],file:[{required:!0,message:"请上传至少一个文件",trigger:"change"}]},Y=async()=>{var U;let ae=D(R);(U=c.value)==null||U.validate(ue=>{ue&&($.value=!0,Ae(()=>{u("submitForm",ae)}))})},D=U=>{if(U===null||typeof U!="object")return U;if(U instanceof Date)return new Date(U);if(U instanceof File||U instanceof Blob)return U;if(Array.isArray(U))return U.map(ue=>D(ue));const ae={};for(let ue in U)Object.prototype.hasOwnProperty.call(U,ue)&&(ae[ue]=D(U[ue]));return ae},Z=async U=>{var ae;const{file:ue}=U,oe=[];oe.push(ue),oe.forEach(H=>{R.fileData.push(H)}),(ae=c.value)==null||ae.clearValidate(["file"])},Q=async U=>{if(!P().includes(U.type)){let re="";switch(v.value){case"背景图片":case"贴片":case"模板图片":case"短剧贴图":re="图片";break;case"解压视频":case"首帧视频":case"尾帧视频":case"模板视频":case"短剧视频":case"短剧尾帧":re="视频";break;case"背景音乐":re="音频";break}return Se.error(`请上传${re}格式文件!`),!1}console.log("file",U.name);const oe=/^.*?\.\d{1,4}\.\d{1,4}\.\d{1,4}\.\d{1,4}\.[0-9a-f]{6}\.[0-9a-f]{6}(?:\..+)?$/i.test(U.name),H=/^.*?\.\d{1,4}\.\d{1,4}\.\d{1,4}\.\d{1,4}(?:\..+)?$/i.test(U.name);if(v.value=="模板图片"){if(!oe)return Se.error("文件名格式应为：自定义名.x坐标.y坐标.宽度.高度.字体色.描边色"),!1}else if(v.value=="模板视频"&&!H)return Se.error("文件名格式应为：自定义名.x坐标.y坐标.宽度.高度."),!1;return!0},P=()=>{switch(v.value){case"背景图片":case"贴片":case"模板图片":case"短剧贴图":return["image/jpeg","image/png","image/gif","image/webp"];case"解压视频":case"首帧视频":case"尾帧视频":case"模板视频":case"短剧视频":case"短剧尾帧":return["video/mp4","video/webm","video/quicktime"];case"背景音乐":return["audio/mpeg","audio/wav","audio/ogg","video/mp4"];default:return[]}},O=U=>{Se.error("超出上传个数限制!")};return o({init:k,handleUploadProgress:b,handleUploadComplete:C}),(U,ae)=>{const ue=Ne,oe=Ns,H=pi,re=ci,G=zs,L=ao,ne=ds,fe=ko;return f(),se(ne,{modelValue:s.value,"onUpdate:modelValue":ae[5]||(ae[5]=A=>s.value=A),title:a.value,width:"600","custom-class":"custom-dialog",class:"upload-dialog","before-close":_,"show-close":!1,"close-on-click-modal":!1},{header:V(({close:A,titleId:K,titleClass:J})=>[l("div",sh,[l("span",{id:K,class:N(J)},ie(a.value),11,lh),w(ue,{class:"close-icon",onClick:_},{default:V(()=>[w(n(ht))]),_:1})])]),footer:V(()=>[l("div",gh,[w(L,{onClick:ae[4]||(ae[4]=A=>_())},{default:V(()=>ae[8]||(ae[8]=[Ie("关闭")])),_:1,__:[8]}),w(L,{loading:$.value,class:"btn-primary",onClick:Y},{default:V(()=>ae[9]||(ae[9]=[Ie("提交")])),_:1,__:[9]},8,["loading"])])]),default:V(()=>[qe((f(),se(G,{ref_key:"otherForm",ref:c,model:R,rules:B,"label-position":"left","require-asterisk-position":"right",class:"vertical-form",onSubmit:ae[3]||(ae[3]=Re(()=>{},["prevent"]))},{default:V(()=>[U.propUploadTypeChange?(f(),se(oe,{key:0,label:"上传到",prop:"uploadType"},{default:V(()=>[l("div",ah,[(f(!0),I(Ee,null,He(d.value,A=>(f(),I("div",{key:A.value,onClick:K=>!U.propUploadTypeDisabled&&g(A.value),class:N(["tab-item",R.uploadType===A.value?"active":"",U.propUploadTypeDisabled&&R.uploadType!==A.value?"disabled":""]),style:ye(U.propUploadTypeDisabled&&R.uploadType!==A.value?{cursor:"not-allowed",opacity:.6}:{})},ie(A.label),15,nh))),128))])]),_:1})):X("",!0),w(oe,{label:"上传文件",prop:"file"},{label:V(()=>{var A;return[l("span",null,[ae[6]||(ae[6]=Ie(" 上传文件 ")),S.value!==void 0&&S.value!==null?(f(),I("span",ih," (还可上传 "+ie(Math.max(0,S.value-(((A=R.file)==null?void 0:A.length)||0)))+" 个文件) ",1)):X("",!0)])]}),default:V(()=>[v.value=="模板图片"?(f(),I("div",rh," 文件命名规则：自定义名.x1.y1.x2.y2.字体色.描边色 ")):v.value=="模板视频"?(f(),I("div",ch," 文件命名规则：自定义名.x1.y1.x2.y2 ")):X("",!0),w(H,{ref_key:"uploadRef",ref:x,action:"#","file-list":R.file,"onUpdate:fileList":ae[0]||(ae[0]=A=>R.file=A),"http-request":Z,"before-upload":Q,"on-exceed":O,multiple:"",limit:S.value??void 0},{trigger:V(()=>ae[7]||(ae[7]=[l("div",{class:"upload-btn"},[l("div",{class:"upload-btn-icon"},"+"),l("div",{class:"upload-btn-text"},"选择文件")],-1)])),file:V(({file:A,index:K})=>[l("div",uh,[K===0?(f(),I("span",dh,"已选择：")):(f(),I("span",fh)),l("span",{class:"file-name",title:A.name},ie(A.name),9,vh),w(ue,{class:"delete-icon",size:"16px",onClick:J=>j(A)},{default:V(()=>[w(n(ht))]),_:2},1032,["onClick"])])]),_:1},8,["file-list","limit"])]),_:1}),m.value<100&&m.value>0||r.value?(f(),se(oe,{key:1,label:"上传进度",prop:"uploadProgress"},{default:V(()=>[l("div",ph,[w(re,{percentage:m.value,"show-text":!0},null,8,["percentage"]),r.value?(f(),I("div",mh," 上传结束,用户可关闭弹框,不会影响数据更新... ")):X("",!0)])]),_:1})):X("",!0),T.value?X("",!0):(f(),se(oe,{key:2,label:"标签",prop:"tags"},{default:V(()=>[w(Ol,{modelValue:R.tags,"onUpdate:modelValue":ae[1]||(ae[1]=A=>R.tags=A),tagsList:n(p),category:v.value,onRefresh:ae[2]||(ae[2]=A=>n(y)({category:v.value}))},null,8,["modelValue","tagsList","category"])]),_:1}))]),_:1},8,["model"])),[[fe,i.value]])]),_:1},8,["modelValue","title"])}}}),Bl=xt(hh,[["__scopeId","data-v-0e725092"]]),yh="data:image/svg+xml,%3csvg%20t='1743603038515'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='6743'%20width='200'%20height='200'%3e%3cpath%20d='M826.48%20660.9c-60.456%200-109.88%2032.358-132.9%2082.596L401.373%20619.203c17.045-26.404%2026.41-58.768%2026.41-93.666%200-14.459-1.706-28.943-5.12-42.573l186.572-144.752c24.72%2018.729%2056.253%2029.798%2091.177%2029.798%2084.347%200%20147.38-63.012%20147.38-146.432%200-83.45-63.054-146.462-147.38-146.462-84.352%200-146.535%2063.011-146.535%20146.462%200%2021.29%204.265%2040.868%2011.07%2057.892L392.837%20411.433c-34.068-51.087-90.301-86.856-154.194-86.856-104.192-0.26-188.866%2083.989-189.122%20188.18a23.803%2023.803%200%200%200%200%200.856c-0.2%20104.192%2084.106%20188.815%20188.298%20189.015h0.83c39.188%200%2075.811-10.194%20105.635-28.928l335.683%20143.032c4.27%2079.176%2065.602%20137.923%20146.509%20137.923%2084.372%200%20146.554-62.992%20146.554-146.437s-63.058-147.313-146.529-147.313h-0.02z'%20p-id='6744'%20fill='%238e97e6'%3e%3c/path%3e%3c/svg%3e",kh={class:"music-library"},bh={class:"music-table table-scrollbar"},Ch={class:"table-body-container"},_h={class:"table-content"},wh={class:"table-body"},Ih=["onClick"],Th={class:"td td-select"},xh={key:0,class:"check-mark"},Fh=["title"],Sh={class:"td td-player"},Eh=["src"],$h={class:"td td-tags"},Rh={class:"td td-time"},Ph={class:"td td-duration"},Oh=de({__name:"MusicLibrary",props:{propList:{default:()=>[]},maxChecked:{default:void 0},fromSelf:{type:Boolean,default:!1},checkedData:{default:()=>[]}},emits:["transferCheckedList","loadMore"],setup(e,{expose:o,emit:t}){const s=e,a=M(()=>s.propList),c=Ks,i=E([]),u=t;Le(()=>{i.value=[...s.checkedData];const T=document.querySelector(".table-body-container");T&&T.addEventListener("scroll",$)}),me(()=>s.checkedData,T=>{if(!Array.isArray(T)){i.value=[];return}console.log(T,"新的"),i.value=[...T]},{immediate:!0});const p=T=>{T.stopPropagation();const b=T.target;document.querySelectorAll("audio").forEach(d=>{d!==b&&d.pause()})},y=T=>{let b=[...i.value],C=[];const d=b.indexOf(T.id);if(s.maxChecked===1)d>-1?b=[]:b=[T.id];else if(d>-1)b.splice(d,1);else{if(s.maxChecked&&b.length>=s.maxChecked){Se.warning(`最多只能选择${s.maxChecked}项`);return}b.push(T.id)}C=b.map(k=>{const g=s.propList.find(h=>h.id===k);return g?JSON.parse(JSON.stringify(g)):null}).filter(Boolean),i.value=b,u("transferCheckedList",C,"music")},_=M(()=>s.maxChecked&&i.value.length>=s.maxChecked),v=T=>s.fromSelf||s.maxChecked===1?!1:!!(_.value&&!i.value.includes(T.id));ut(()=>{const T=document.querySelector(".table-body-container");T&&T.removeEventListener("scroll",$)});const $=vl(T=>{const b=T.target,{scrollTop:C,scrollHeight:d,clientHeight:k}=b;d-C<=k+10&&u("loadMore")},200),S=T=>i.value.includes(T.id),m=M(()=>!a.value||!Array.isArray(a.value)?[]:s.fromSelf?a.value:[...a.value].sort((T,b)=>{const C=S(T),d=S(b);return C&&!d?-1:!C&&d?1:0}));return o({clearMaterialDialogChecked:T=>{T==="music"&&(i.value=[],u("transferCheckedList",i.value,"music"))}}),(T,b)=>{const C=El;return f(),I("div",kh,[l("div",bh,[l("div",Ch,[l("div",_h,[b[2]||(b[2]=Wa('<div class="table-header" data-v-d708b8b0><div class="th th-name" data-v-d708b8b0>名称</div><div class="th th-player" data-v-d708b8b0>播放器</div><div class="th th-tags" data-v-d708b8b0>标签</div><div class="th th-time" data-v-d708b8b0>创建时间</div><div class="th th-duration" data-v-d708b8b0>时长</div></div>',1)),l("div",wh,[(f(!0),I(Ee,null,He(m.value,(d,k)=>{var g;return f(),I("div",{key:k,class:N(["table-row",{selected:S(d)}]),onClick:h=>y(d)},[l("div",Th,[l("div",{class:N(["checkbox-indicator",{checked:S(d),"cant-check":v(d)}])},[S(d)?(f(),I("span",xh,"✓")):X("",!0)],2)]),l("div",{class:"td td-name",title:d.name},ie(d.name),9,Fh),l("div",Sh,[(f(),I("audio",{key:d.id+"_"+d.file_url,controls:"",preload:"metadata",onPlay:p,class:"compact-audio",onClick:b[0]||(b[0]=Re(()=>{},["stop"]))},[l("source",{src:n(c)+d.file_url},null,8,Eh)],32))]),l("div",$h,[(f(!0),I(Ee,null,He(d.tags,(h,x)=>(f(),se(C,{key:x,type:"info",class:"tag-item",style:ye({backgroundColor:h.is_public?"#eaebfb":"",color:h.is_public?"#8087ff":""}),onClick:b[1]||(b[1]=Re(()=>{},["stop"]))},{default:V(()=>[Ie(ie(h.name),1)]),_:2},1032,["style"]))),128))]),l("div",Rh,ie(n(dn)(d.create_time).format("YYYY-MM-DD")),1),l("div",Ph,ie(d.duration?`${(g=parseFloat(d.duration))==null?void 0:g.toFixed(1)}s`:"暂无"),1)],10,Ih)}),128))])])])])])}}}),Vh=xt(Oh,[["__scopeId","data-v-d708b8b0"]]),Lh={class:"resizeArea",ref:"resizeAreaDom"},Bh=de({__name:"ResizeArea",props:{left:{type:Number,default:0},right:{type:Number,default:1},top:{type:Number,default:0},bottom:{type:Number,default:1},resizable:{type:Boolean,default:!1}},emits:["resize","stopResize"],setup(e,{emit:o}){const t=Dt("resizeAreaDom"),s=o,a=e;let c=!1,i="",u=0,p=0,y=0,_=0,v=0,$=0;const S=()=>{if(t.value&&t.value.parentElement){const C=t.value.parentElement.getBoundingClientRect(),d=C.width*(a.right-a.left),k=C.height*(a.bottom-a.top),g=C.width*a.left,h=C.height*a.top;t.value.style.width=`${d}px`,t.value.style.height=`${k}px`,t.value.style.left=`${g}px`,t.value.style.top=`${h}px`}};me(()=>[a.left,a.right,a.top,a.bottom],()=>{Ae(()=>{S()})},{immediate:!0});const m=(C,d)=>{!a.resizable||!t.value||(c=!0,i=d,u=C.clientX,p=C.clientY,y=t.value.offsetWidth,_=t.value.offsetHeight,v=t.value.offsetLeft,$=t.value.offsetTop,document.addEventListener("mousemove",r),document.addEventListener("mouseup",T))},r=C=>{if(!c||!t.value||!t.value.parentElement)return;const d=C.clientX-u,k=C.clientY-p,g=t.value.parentElement.getBoundingClientRect(),h=50,x=50;let R=y,j=_,F=v,B=$;i==="top-left"?(R=y-d,j=_-k,F=v+d,B=$+k,F<0&&(F=0,R=y+v),B<0&&(B=0,j=_+$),R<h&&(R=h,F=v+y-h),j<x&&(j=x,B=$+_-x)):i==="top-right"?(R=y+d,j=_-k,B=$+k,B<0&&(B=0,j=_+$),R<h&&(R=h),j<x&&(j=x,B=$+_-x),F+R>g.width&&(R=g.width-F)):i==="bottom-left"?(R=y-d,j=_+k,F=v+d,F<0&&(F=0,R=y+v),R<h&&(R=h,F=v+y-h),j<x&&(j=x),B+j>g.height&&(j=g.height-B)):i==="bottom-right"&&(R=y+d,j=_+k,R<h&&(R=h),j<x&&(j=x),F+R>g.width&&(R=g.width-F),B+j>g.height&&(j=g.height-B)),t.value.style.width=`${R}px`,t.value.style.height=`${j}px`,t.value.style.left=`${F}px`,t.value.style.top=`${B}px`;const Y=(F/g.width).toFixed(3),D=((F+R)/g.width).toFixed(3),Z=(B/g.height).toFixed(3),Q=((B+j)/g.height).toFixed(3);s("resize",{left:Y,right:D,top:Z,bottom:Q})},T=()=>{c=!1,s("stopResize"),document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",T)},b=()=>{S()};return Le(()=>{window.addEventListener("resize",b)}),Lt(()=>{document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",T),window.removeEventListener("resize",b)}),(C,d)=>(f(),I("div",Lh,[Te(C.$slots,"default",{},void 0,!0),l("div",{class:N(["resize-handle top-left",{hidden:!e.resizable}]),onMousedown:d[0]||(d[0]=k=>m(k,"top-left"))},null,34),l("div",{class:N(["resize-handle top-right",{hidden:!e.resizable}]),onMousedown:d[1]||(d[1]=k=>m(k,"top-right"))},null,34),l("div",{class:N(["resize-handle bottom-left",{hidden:!e.resizable}]),onMousedown:d[2]||(d[2]=k=>m(k,"bottom-left"))},null,34),l("div",{class:N(["resize-handle bottom-right",{hidden:!e.resizable}]),onMousedown:d[3]||(d[3]=k=>m(k,"bottom-right"))},null,34)],512))}}),ki=xt(Bh,[["__scopeId","data-v-0aec4903"]]),Ah=de({__name:"InnerArea",props:{left:{type:Number,default:.05},right:{type:Number,default:.95},top:{type:Number,default:.05},bottom:{type:Number,default:.95},needMask:{type:Boolean,default:!1}},setup(e){const o=Dt("innerAreaDom"),t=e;Le(()=>{Ae(()=>{s()})});const s=()=>{if(o.value&&o.value.parentElement){const c=o.value.parentElement.getBoundingClientRect(),i=c.width*(t.right-t.left),u=c.height*(t.bottom-t.top),p=c.width*t.left,y=c.height*t.top;o.value.style.width=`${i}px`,o.value.style.height=`${u}px`,o.value.style.left=`${p}px`,o.value.style.top=`${y}px`}};me(()=>[t.left,t.right,t.top,t.bottom],()=>{s()});const a=()=>{s()};return Le(()=>{window.addEventListener("resize",a)}),Lt(()=>{window.removeEventListener("resize",a)}),(c,i)=>(f(),I("div",{class:N(["innerArea",{needMask:e.needMask}]),ref:"innerAreaDom"},[Te(c.$slots,"default",{},void 0,!0)],2))}}),bi=xt(Ah,[["__scopeId","data-v-7425f5b5"]]),jh={class:"wrapper"},Qh={class:"config-section"},Hh={class:"tab-selector"},Mh={class:"my-tags-list"},Uh={class:"tag-content"},zh={key:0,class:"public-badge"},Nh={class:"color-option"},Kh={class:"preview-section"},Dh={class:"preview-container"},Xh={class:"preview-image"},Gh=de({__name:"BackgroundEditContent",props:{backgroundInfo:{}},emits:["transferBackgroundInfo"],setup(e,{emit:o}){const t=E(!1),s=Ks,a=e,c=o,i=Be({tag_ids:[],text_fill:"white"}),u=E("share"),p=E(),y=E([]),_={tag_ids:[{required:!0,message:"请选择标签",trigger:"change"}]},v=Be({top:0,bottom:1,left:0,right:1}),$=Be({top:0,bottom:1,left:0,right:1}),S=async g=>{u.value=g,await m()},m=async()=>{try{const g=new Set(y.value.filter(j=>j.is_public).map(j=>j.value)),h={category:"背景图片",...u.value==="share"?{is_public:!0}:{}},R=(await Vo(h,!0)).map(j=>g.has(j.value)?{...j,is_public:!0}:j);u.value==="share"?R.forEach(j=>{j.tagType="shared"}):u.value==="personal"&&R.forEach(j=>{j.tagType="personal"}),y.value=R}catch{Se.error("获取标签列表失败")}},r=()=>{i.text_fill=k(),t.value=!1};Le(async()=>{var g,h,x,R;t.value=!0,r();const j={left:((g=a.backgroundInfo.border)==null?void 0:g.left)||0,right:((h=a.backgroundInfo.border)==null?void 0:h.right)||0,top:((x=a.backgroundInfo.border)==null?void 0:x.top)||0,bottom:((R=a.backgroundInfo.border)==null?void 0:R.bottom)||0};b(j)});const T=M(()=>({color:i.text_fill})),b=g=>{Object.assign(v,g);const h=g.bottom-g.top,x=g.right-g.left,R=Math.max(g.left-.05*x,0),j=Math.min(parseFloat(String(g.right))+.05*x,1),F=Math.max(parseFloat(String(g.top))-.05*h,0),B=Math.min(parseFloat(String(g.bottom))+.05*h,1);Object.assign($,{left:R,right:j,top:F,bottom:B})},C={WHITE:[255,255,255,1],BLACK:[0,0,0,1],YELLOW:[255,255,0,1]},d=()=>{switch(i.text_fill){case"white":return C.WHITE;case"black":return C.BLACK;case"yellow":return C.YELLOW;default:return C.BLACK}},k=()=>{if(a.backgroundInfo.text_fill){const g=JSON.parse(JSON.stringify(a.backgroundInfo.text_fill));return JSON.stringify(g)===JSON.stringify(C.WHITE)?"white":JSON.stringify(g)===JSON.stringify(C.BLACK)?"black":JSON.stringify(g)===JSON.stringify(C.YELLOW)?"yellow":"black"}return"black"};return me(()=>a.backgroundInfo,async g=>{y.value=await Vo({category:"背景图片",is_public:g.is_public});let h=[];g.tags&&g.tags.length>0&&(h=g.tags.map(x=>`${x.id}`)),i.tag_ids=h},{deep:!0,immediate:!0}),me([()=>i,()=>v],g=>{const h={border:{left:v.left??.1,top:v.top??.1,right:v.right??.9,bottom:v.bottom??.9},tag_ids:i.tag_ids,text_fill:d(),id:a.backgroundInfo.id,need_mask:a.backgroundInfo.need_mask||!1};c("transferBackgroundInfo",h,p.value)},{deep:!0}),(g,h)=>{const x=Fl,R=Sl,j=Ns,F=zs,B=rm,Y=ko;return f(),se(F,{model:i,"label-width":"auto",class:"edit-form"},{default:V(()=>{var D,Z,Q,P;return[qe((f(),I("div",jh,[l("div",Qh,[w(F,{ref_key:"formRef",ref:p,model:i,rules:_,"label-width":"100px"},{default:V(()=>[w(j,{label:"图片标签","label-position":"top",prop:"tag_ids"},{default:V(()=>[l("div",null,[l("div",Hh,[l("div",{class:N(["tab-option",{active:u.value==="share"}]),onClick:h[0]||(h[0]=O=>S("share"))}," 共享 ",2),l("div",{class:N(["tab-option",{active:u.value==="person"}]),onClick:h[1]||(h[1]=O=>S("person"))}," 个人 ",2)]),l("div",Mh,[w(R,{modelValue:i.tag_ids,"onUpdate:modelValue":h[2]||(h[2]=O=>i.tag_ids=O),class:"custom-tags-group"},{default:V(()=>[(f(!0),I(Ee,null,He(y.value,O=>(f(),se(x,{key:O.value,value:O.value,class:"tag-checkbox tag-checkbox-personal"},{default:V(()=>[l("span",{class:"tag-label",ref_for:!0,ref:"tagLabel"},[l("div",Uh,[l("span",{class:N(["tag-icon",O.tagType==="shared"||O.is_public?"shared-tag-icon":"personal-tag-icon"])},null,2),Ie(" "+ie(O.label),1)]),u.value==="person"&&O.is_public?(f(),I("span",zh,"已共享")):X("",!0)],512)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])])]),_:1}),w(j,{label:"文字颜色","label-position":"top"},{default:V(()=>[l("div",Nh,[l("span",{class:N(["color-label",{option_checked:i.text_fill==="white"}]),onClick:h[3]||(h[3]=O=>i.text_fill="white")},h[6]||(h[6]=[l("span",{class:"color-icon color-white"},null,-1),l("span",null,"白色",-1)]),2),l("span",{class:N(["color-label",{option_checked:i.text_fill==="black"}]),onClick:h[4]||(h[4]=O=>i.text_fill="black")},h[7]||(h[7]=[l("span",{class:"color-icon color-black"},null,-1),l("span",null,"黑色",-1)]),2),l("span",{class:N(["color-label",{option_checked:i.text_fill==="yellow"}]),onClick:h[5]||(h[5]=O=>i.text_fill="yellow")},h[8]||(h[8]=[l("span",{class:"color-icon color-yellow"},null,-1),l("span",null,"黄色",-1)]),2)])]),_:1})]),_:1},8,["model"])]),l("div",Kh,[h[9]||(h[9]=l("div",{class:"preview-title"},"文本框编辑区",-1)),l("div",Dh,[w(B,{src:n(s)+g.backgroundInfo.file_url,fit:"fill"},null,8,["src"]),w(ki,{resizable:!g.backgroundInfo.need_mask,left:((D=g.backgroundInfo.border)==null?void 0:D.left)??.1,right:((Z=g.backgroundInfo.border)==null?void 0:Z.right)??.9,top:((Q=g.backgroundInfo.border)==null?void 0:Q.top)??.1,bottom:((P=g.backgroundInfo.border)==null?void 0:P.bottom)??.9,onResize:b},{default:V(()=>[l("div",Xh,[l("div",{class:"text-edit-area",style:ye(T.value)}," 示例文本 ",4)])]),_:1},8,["resizable","left","right","top","bottom"]),g.backgroundInfo.need_mask?(f(),se(bi,{key:0,left:$.left,right:$.right,top:$.top,bottom:$.bottom,needMask:""},null,8,["left","right","top","bottom"])):X("",!0)])])])),[[Y,t.value]])]}),_:1},8,["model"])}}}),Yh=xt(Gh,[["__scopeId","data-v-7fa00115"]]),qh=["data-tab-type"],Wh=["src"],Zh={key:0,class:"check-mark"},Jh={class:"material-info"},e0={class:"material-title-row"},t0={class:"material-name"},o0={class:"material-tags-row"},s0={class:"tags-container"},l0={class:"tag-text"},a0={key:1,class:"no-tags"},n0={class:"material-info-row"},i0={key:0,class:"material-size"},r0={key:1,class:"material-duration"},c0={class:"dialog-header"},u0=["id"],d0={class:"dialog-footer"},f0=de({__name:"ComMaterialList",props:{tabType:{default:""},propList:{default:()=>[]},propActiveTabType:{default:""},propFrom:{default:"video"},maxChecked:{default:0},isFromReading:{type:Boolean,default:!0},fromSelf:{type:Boolean,default:!1},checkedData:{default:()=>[]}},emits:["transferCheckedList","loadMore","editBackgroundGetList","updateBackgroundPreview","refreshList"],setup(e,{expose:o,emit:t}){rr(P=>({"3fcf1aa5":P.fromSelf?"calc(100vh - 280px)":"calc(100vh - 450px)","7f82bb9e":P.fromSelf?"crosshair":"default"}));const s=Ks,a=E(),c=E(!1),i=E({x:0,y:0}),u=E({left:0,top:0,width:0,height:0}),p=e,y=t,_=M(()=>!p.propList||!Array.isArray(p.propList)?[]:p.propList.map(P=>{const O={...P};if(p.tabType==="video"||p.tabType==="firstFrames"||p.tabType==="lastFrames"||p.tabType==="textVideo"||p.tabType==="shortPlayLastFrames"?O.showUrl=P.key_frame_url||"":(p.tabType==="background"||p.tabType==="stickers"||p.tabType==="textImage"||p.tabType==="shortPlayStickers")&&(O.showUrl=P.file_url||""),p.tabType==="background"){(!O.border||O.border.top===null)&&(O.border={left:.1,right:.9,top:.1,bottom:.9});const U=O.border.bottom-O.border.top,ae=O.border.right-O.border.left;O.innerBorder={left:Math.max(parseFloat(String(O.border.left))-.05*ae,0),right:Math.min(parseFloat(String(O.border.right))+.05*ae,1),top:Math.max(parseFloat(String(O.border.top))-.05*U,0),bottom:Math.min(parseFloat(String(O.border.bottom))+.05*U,1)}}return O})),v=E([]);me(()=>p.checkedData,P=>{P&&(v.value=[...P])},{immediate:!0});const $=E(!1),S=E({}),m=E({}),r=E(),T=E(!1),b=E();Le(()=>{if(!p.fromSelf&&(p.tabType=="shortPlayVideo"||p.tabType=="shortPlayLastFrames")){b.value=1;return}!p.fromSelf&&p.tabType=="video"?p.propFrom=="video"?b.value=p.maxChecked*10:p.propFrom=="topVideo"&&(b.value=10):p.fromSelf||(b.value=p.maxChecked)});const C=M(()=>!_.value||!Array.isArray(_.value)?[]:p.fromSelf?_.value:[..._.value].sort((P,O)=>{const U=v.value.includes(P.id),ae=v.value.includes(O.id);return U&&!ae?-1:!U&&ae?1:0})),d=P=>{const O=_.value.filter(U=>P.includes(U.id));y("transferCheckedList",O)},k=vl(P=>{const O=P.target,{scrollTop:U,scrollHeight:ae,clientHeight:ue}=O;ae-U<=ue+10&&y("loadMore")},200),g=P=>{S.value=P,p.propActiveTabType==="person"?S.value.is_public=!1:p.propActiveTabType==="share"&&(S.value.is_public=!0),$.value=!0},h=(P,O)=>{m.value=P,r.value=O},x=async()=>{var P;(P=r.value)==null||P.validate(async(O,U)=>{if(O){T.value=!0;const ae=await Vo({category:"背景图片"}),ue=Pl(m.value.tag_ids,ae),oe={...m.value,tag_ids:ue};try{const H=await xg(oe);if(H.code===0)Se.success("编辑成功!"),y("updateBackgroundPreview",H.data),$.value=!1,y("editBackgroundGetList",[oe.id]);else throw Se.error(H.message),new Error(H.message);T.value=!1}catch(H){Se.error(H),T.value=!1}}else console.log("校验失败",U)})},R=()=>{$.value=!1,T.value=!1},j=P=>v.value.includes(P.id),F=P=>{S.value.border=P},B=P=>{if(!p.fromSelf)return;const O=P.target;if(O.closest(".checkbox-indicator")||O.closest(".edit-btn")||O.closest(".material-item"))return;const U=P.currentTarget,ae=U.scrollTop,ue=U.scrollLeft,oe=U.getBoundingClientRect(),H=P.clientX-oe.left+ue,re=P.clientY-oe.top+ae;i.value={x:H,y:re},u.value={left:H,top:re,width:0,height:0},c.value=!0,!P.ctrlKey&&!P.metaKey&&(v.value=[],d(v.value))},Y=P=>{if(!c.value||!p.fromSelf)return;const O=P.currentTarget,U=O.scrollTop,ae=O.scrollLeft,ue=O.getBoundingClientRect(),oe=P.clientX-ue.left+ae,H=P.clientY-ue.top+U,re=Math.min(i.value.x,oe),G=Math.min(i.value.y,H),L=Math.abs(oe-i.value.x),ne=Math.abs(H-i.value.y);u.value={left:re,top:G,width:L,height:ne},L>5&&ne>5&&D()},D=()=>{if(!a.value)return;const P=document.querySelector(".material-list");if(!P)return;const O=P.scrollTop,U=P.scrollLeft,ae=a.value.querySelectorAll(".material-item"),ue=[...v.value],oe={left:u.value.left,top:u.value.top,right:u.value.left+u.value.width,bottom:u.value.top+u.value.height};ae.forEach((H,re)=>{if(H.classList.contains("is-disabled"))return;const G=H.getBoundingClientRect(),L=P.getBoundingClientRect(),ne={left:G.left-L.left+U,top:G.top-L.top+O,right:G.right-L.left+U,bottom:G.bottom-L.top+O};if(ne.right>=oe.left&&ne.left<=oe.right&&ne.bottom>=oe.top&&ne.top<=oe.bottom){const A=C.value[re];A&&A.id&&!ue.includes(A.id)&&ue.push(A.id)}}),v.value=ue,d(v.value)},Z=()=>{!c.value||!p.fromSelf||(c.value=!1)};return o({clearMaterialDialogChecked:()=>{v.value=[]}}),(P,O)=>{const U=ao,ae=El,ue=Yn,oe=Fl,H=Sl,re=Ne,G=ds;return f(),I(Ee,null,[l("div",{class:"material-list",onScroll:O[1]||(O[1]=(...L)=>n(k)&&n(k)(...L)),onMousedown:O[2]||(O[2]=L=>P.fromSelf&&B(L)),onMousemove:O[3]||(O[3]=L=>P.fromSelf&&Y(L)),onMouseup:O[4]||(O[4]=L=>P.fromSelf&&Z()),onMouseleave:O[5]||(O[5]=L=>P.fromSelf&&Z())},[P.fromSelf&&c.value?(f(),I("div",{key:0,class:"selection-box",style:ye({left:`${u.value.left}px`,top:`${u.value.top}px`,width:`${u.value.width}px`,height:`${u.value.height}px`})},null,4)):X("",!0),w(H,{ref_key:"checkboxGroup",ref:a,modelValue:v.value,"onUpdate:modelValue":O[0]||(O[0]=L=>v.value=L),onChange:d,class:"card-grid",max:b.value},{default:V(()=>[(f(!0),I(Ee,null,He(C.value,(L,ne)=>(f(),se(oe,{key:ne,label:L.name,value:L.id,class:"material-item",disabled:!P.fromSelf&&p.tabType==="novel"&&(P.isFromReading&&!L.file_id||!P.isFromReading&&!L.subtitle_id)},{default:V(()=>{var fe,A,K,J,ce,pe,ve,he,Pe;return[l("div",{class:"material-card","data-tab-type":p.tabType},[l("div",{class:N(["material-preview",{"has-image":L.showUrl}])},[l("img",{src:n(s)+L.showUrl,class:"direct-image",alt:"failed"},null,8,Wh),l("div",{class:N(["checkbox-indicator",{checked:j(L)}])},[j(L)?(f(),I("span",Zh,"✓")):X("",!0)],2),p.tabType==="background"?(f(),se(U,{key:0,class:"edit-btn",onClick:Re(_e=>g(L),["stop"])},{default:V(()=>O[7]||(O[7]=[Ie(" 编辑 ")])),_:2,__:[7]},1032,["onClick"])):X("",!0),p.tabType==="background"?(f(),se(ki,{key:1,class:"overlay resize-overlay",left:((fe=L.border)==null?void 0:fe.left)??.1,right:((A=L.border)==null?void 0:A.right)??.9,top:((K=L.border)==null?void 0:K.top)??.1,bottom:((J=L.border)==null?void 0:J.bottom)??.9,onResize:F},{default:V(()=>[l("p",{class:"overlay_text",style:ye({color:n(mg)(L.text_fill||[0,0,0,1])})}," 预览文本 ",4)]),_:2},1032,["left","right","top","bottom"])):X("",!0),L.need_mask?(f(),se(bi,{key:2,class:"overlay inner-overlay",left:((ce=L.innerBorder)==null?void 0:ce.left)??.1,right:((pe=L.innerBorder)==null?void 0:pe.right)??.9,top:((ve=L.innerBorder)==null?void 0:ve.top)??.1,bottom:((he=L.innerBorder)==null?void 0:he.bottom)??.9,needMask:""},null,8,["left","right","top","bottom"])):X("",!0)],2),l("div",Jh,[l("div",e0,[l("div",t0,ie(L.name),1)]),l("div",o0,[w(ue,{placement:"top","show-after":500,"hide-after":0,effect:"light"},{content:V(()=>[l("div",null,[(f(!0),I(Ee,null,He(L.tags,(_e,W)=>(f(),se(ae,{key:W,type:"info",class:"tag-item",style:ye({backgroundColor:_e.is_public?"#eaebfb":"",color:_e.is_public?"#8087ff":""})},{default:V(()=>[Ie(ie(_e.name),1)]),_:2},1032,["style"]))),128))])]),default:V(()=>[l("div",s0,[L.tags&&L.tags.length>0?(f(!0),I(Ee,{key:0},He(L.tags,(_e,W)=>(f(),se(ae,{key:W,type:"info",class:"tag-item",style:ye({backgroundColor:_e.is_public?"#eaebfb":"",color:_e.is_public?"#8087ff":""})},{default:V(()=>[l("span",l0,ie(_e.name),1)]),_:2},1032,["style"]))),128)):(f(),I("span",a0,"无标签"))])]),_:2},1024)]),l("div",n0,[L.width&&L.height?(f(),I("div",i0,ie(L.width)+"×"+ie(L.height),1)):X("",!0),p.tabType=="video"||p.tabType=="firstFrames"||p.tabType=="lastFrames"?(f(),I("div",r0," 时长: "+ie(L.duration?`${(Pe=parseFloat(L.duration))==null?void 0:Pe.toFixed(2)}s`:"暂无"),1)):X("",!0)])])],8,qh)]}),_:2},1032,["label","value","disabled"]))),128))]),_:1},8,["modelValue","max"])],32),w(G,{modelValue:$.value,"onUpdate:modelValue":O[6]||(O[6]=L=>$.value=L),title:"图片设置",width:"700","custom-class":"custom-dialog",class:"upload-dialog","before-close":R,"show-close":!1,"close-on-click-modal":!1},{header:V(({close:L,titleId:ne,titleClass:fe})=>[l("div",c0,[l("span",{id:ne,class:N(fe)},"图片设置",10,u0),w(re,{class:"close-icon cursor-pointer",onClick:R},{default:V(()=>[w(n(ht))]),_:1})])]),footer:V(()=>[l("div",d0,[w(U,{onClick:R},{default:V(()=>O[8]||(O[8]=[Ie("取消")])),_:1,__:[8]}),w(U,{type:"primary",class:"btn-primary",onClick:x,disabled:T.value,loading:T.value},{default:V(()=>O[9]||(O[9]=[Ie(" 确定 ")])),_:1,__:[9]},8,["disabled","loading"])])]),default:V(()=>[w(Yh,{backgroundInfo:S.value,onTransferBackgroundInfo:h},null,8,["backgroundInfo"])]),_:1},8,["modelValue"])],64)}}}),v0=xt(f0,[["__scopeId","data-v-ec89b7a4"]]),p0={class:"novel-library"},m0={class:"novel-table"},g0={class:"table-body-container"},h0={class:"table-content"},y0={class:"table-body"},k0=["onClick"],b0={class:"td td-select"},C0={key:0,class:"check-mark"},_0=["onClick","title"],w0={class:"td td-tags"},I0={class:"td td-time"},T0={class:"td td-status"},x0={class:"td td-actions"},F0=de({__name:"NovelLibrary",props:{maxChecked:{default:null},fromSelf:{type:Boolean,default:!1},loading:{type:Boolean,default:!0},isFromReading:{type:Boolean,default:!1},propList:{default:()=>[]},checkedData:{default:()=>[]}},emits:["transferCheckedList","loadMore","refreshList","toEditNovel"],setup(e,{expose:o,emit:t}){const s=e,a=M(()=>s.propList),c=E([]),i=E([]),u=t;Le(()=>{c.value=s.checkedData;const r=document.querySelector(".table-body-container");r&&r.addEventListener("scroll",_)}),me(()=>s.checkedData,r=>{if(!Array.isArray(r)){c.value=[],i.value=[];return}c.value=[...r],i.value=r.map(T=>{const b=s.propList.find(C=>C.id===T);return b?JSON.parse(JSON.stringify(b)):null}).filter(Boolean)},{immediate:!0,deep:!0});const p=r=>c.value.includes(r.id),y=async r=>{rl.confirm("确定要删除选中的小说吗？","删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",customClass:"resource-list-dialog",showClose:!0,beforeClose:async(T,b,C)=>{T==="confirm"&&(b.confirmButtonLoading=!0,b.confirmButtonText="删除中..."),C()}}).then(async()=>{await Tg(r).then(()=>{Se.success("删除成功!"),u("refreshList")}).catch(T=>{Se.error(T),u("refreshList")})}).catch(()=>{})};ut(()=>{const r=document.querySelector(".table-body-container");r&&r.removeEventListener("scroll",_)});const _=vl(r=>{const T=r.target,{scrollTop:b,scrollHeight:C,clientHeight:d}=T;C-b<=d+10&&u("loadMore")},200),v=r=>s.fromSelf?!1:s.isFromReading?!r.file_url:!r.audio_url,$=r=>{u("toEditNovel",r)},S=r=>{r==="novel"&&(c.value=[],u("transferCheckedList",c.value,"novel"))},m=(r,T)=>{if(v(r)){T.stopPropagation();return}const b=c.value.findIndex(C=>C===r.id);s.fromSelf?b>-1?(c.value.splice(b,1),i.value=i.value.filter(C=>C.id!==r.id)):(c.value.push(r.id),i.value.push(r)):b>-1?(c.value=[],i.value=[]):(c.value=[r.id],i.value=[r]),u("transferCheckedList",i.value,"novel")};return o({clearMaterialDialogChecked:S}),(r,T)=>{const b=El,C=ao;return f(),I("div",p0,[l("div",m0,[l("div",g0,[l("div",h0,[T[2]||(T[2]=Wa('<div class="table-header" data-v-b5df44c5><div class="th th-select" data-v-b5df44c5></div><div class="th th-name" data-v-b5df44c5>小说名称</div><div class="th th-tags" data-v-b5df44c5>标签</div><div class="th th-time" data-v-b5df44c5>创建时间</div><div class="th th-status" data-v-b5df44c5>状态</div><div class="th th-actions" data-v-b5df44c5>操作</div></div>',1)),l("div",y0,[(f(!0),I(Ee,null,He(a.value,(d,k)=>(f(),I("div",{key:k,class:N(["table-row",{selected:p(d)}]),onClick:g=>m(d,g)},[l("div",b0,[l("div",{class:N(["checkbox-indicator",{checked:p(d),"cant-check":v(d)}])},[p(d)?(f(),I("span",C0,"✓")):X("",!0)],2)]),l("div",{class:"td td-name",onClick:Re(g=>$(d),["stop"]),title:d.name},ie(d.name),9,_0),l("div",w0,[(f(!0),I(Ee,null,He(d.tags,(g,h)=>(f(),se(b,{key:h,type:"info",class:"tag-item",style:ye({backgroundColor:g.is_public?"#eaebfb":"",color:g.is_public?"#8087ff":""}),onClick:T[0]||(T[0]=Re(()=>{},["stop"]))},{default:V(()=>[Ie(ie(g.name),1)]),_:2},1032,["style"]))),128))]),l("div",I0,ie(n(dn)(d.create_time).format("YYYY-MM-DD")),1),l("div",T0,[l("span",{class:N(["status-tag",d.file_url?"yes":"no"])}," 正文: "+ie(d.file_url?"有":"无"),3),l("span",{class:N(["status-tag",d.audio_url?"yes":"no"])}," 音频: "+ie(d.audio_url?"有":"无"),3)]),l("div",x0,[w(C,{type:"danger",size:"small",onClick:Re(g=>y(d.id),["stop"]),class:"delete-btn"},{default:V(()=>T[1]||(T[1]=[Ie(" 删除 ")])),_:2,__:[1]},1032,["onClick"])])],10,k0))),128))])])])])])}}}),S0=xt(F0,[["__scopeId","data-v-b5df44c5"]]);var rt=(e=>(e.SHARE="share",e.PERSON="person",e))(rt||{});const E0={class:"material-list-hint"},$0={key:0},R0=de({__name:"Tips",props:{fromSelf:{type:Boolean},length:{}},setup(e){return(o,t)=>(f(),I("div",E0,[o.fromSelf?X("",!0):(f(),I("span",$0,"素材列表（可选，默认按标签随机抽取）")),l("span",null,"符合条件共 "+ie(o.length)+" 项",1)]))}}),P0=xt(R0,[["__scopeId","data-v-8e978c6b"]]),O0={class:"resource-list"},V0={class:"resource-layout"},L0={class:"left-panel"},B0={class:"tab-selector"},A0={class:"my-tags-list"},j0=["onClick"],Q0={class:"tag-name"},H0={key:0,class:"public-badge"},M0=["onClick"],U0={class:"right-panel"},z0={class:"top-controls"},N0={class:"title-area"},K0={class:"material-title"},D0={class:"title-type"},X0={class:"action-buttons"},G0={class:"filter-controls"},Y0={class:"time-filter"},q0={class:"time-options"},W0=["onClick"],Z0={class:"keyword-search"},J0={class:"materials-display"},ey=50,ty=de({__name:"ResourceList",props:{tabType:{default:void 0},propFrom:{default:"video"},maxChecked:{default:0},isFromReading:{type:Boolean,default:!0},fromSelf:{type:Boolean,default:!1},propCheckedList:{default:()=>[]},propTagsObject:{default:()=>({})},propActiveTabType:{default:null}},emits:["transferCheckedList"],setup(e,{expose:o,emit:t}){const s=e,a=Dt("libraryEl"),c=Dt("novelEl"),i=Dt("musicEl"),u=E([]),p=E([]),y=E(0),_=E(!0),v=E(rt.SHARE),$=t,S=M(()=>s.tabType==="shortPlayVideo"||s.tabType==="shortPlayStickers"||s.tabType==="shortPlayLastFrames");Le(()=>{var te;if(P.value=!0,!s.fromSelf&&(v.value=s.propActiveTabType||rt.PERSON,g.value.is_public=v.value===rt.SHARE,m.value=(te=s.propCheckedList)!=null&&te.length?s.propCheckedList.map(ee=>ee.id):[],s.propTagsObject)){const ee=v.value==="share"?s.propTagsObject.shared:s.propTagsObject.personal;ee&&ee.length>0&&(u.value=ee.map(q=>q.value)),T.value=s.propTagsObject.shared!==void 0?s.propTagsObject.shared.map(q=>q.value):[],b.value=s.propTagsObject.personal!==void 0?s.propTagsObject.personal.map(q=>q.value):[],C.value.shared=s.propTagsObject.shared!==void 0?s.propTagsObject.shared:[],C.value.personal=s.propTagsObject.personal!==void 0?s.propTagsObject.personal:[]}g.value.category=K(s.tabType),L(g.value),d()});const m=E([]),r=E([]);me(()=>s.propCheckedList,te=>{te&&(r.value=[...te])},{immediate:!0});const T=E([]),b=E([]),C=E({shared:[],personal:[]}),d=async()=>{if(!S.value)try{const te=new Set(p.value.filter(le=>le.is_public).map(le=>le.value)),ee={category:g.value.category,...v.value==="share"?{is_public:!0}:{}},z=(await Vo(ee,!0)).map(le=>te.has(le.value)?{...le,is_public:!0}:le);p.value=z}catch{Se.error("获取标签列表失败")}},k=E([]),g=E({is_public:!0,name:"",category:"",page:1,pagesize:ey}),h=async te=>{console.log("切换共享/个人标签:",te),v.value!==te&&(ue.value="",g.value.page=1,v.value=te,g.value.is_public=te===rt.SHARE,P.value=!0,v.value===rt.SHARE?u.value=T.value:u.value=b.value,await d(),await L({...g.value}),a.value&&await Ae())},x=te=>{m.value=te.map(q=>q.id),r.value=te;const ee=p.value.filter(q=>u.value.includes(q.value));v.value==="share"?C.value.shared=ee:v.value==="person"&&(C.value.personal=ee),$("transferCheckedList",te,C.value,v.value,s.tabType,k.value,Y.value,D.value)},R=Dt("createVideo"),j=Dt("createNovel"),F=Dt("tagAdd"),B=E("all"),Y=E(""),D=E("");E([]);const Z=()=>{var te,ee;let q={type:s.tabType,title:""};s.tabType=="novel"?(q.title="新增小说",(te=j.value)==null||te.init(q,!0,[],K(s.tabType))):(q.title="新增素材",(ee=R.value)==null||ee.init(q,!0,K(s.tabType)))},Q=async te=>{var ee;let q=[];q.push(te);try{(ee=j.value)==null||ee.init({type:"edit",title:"编辑小说"},!0,q,K(s.tabType))}catch{}},P=E(!1),O=async te=>{let ee={name:te,is_public:!1,category:K(s.tabType)};P.value=!0;try{const q=await yi(ee);if(q.code===0)Se.success("新增标签成功!"),await d(),P.value=!1;else throw Se.error("新增标签失败!"),P.value=!1,new Error(q.message)}catch{Se.error("新增标签报错!"),P.value=!1}},U=async te=>{let ee=new FormData,q=K(s.tabType);te.fileData.length>=1&&te.fileData.forEach(z=>{ee.append("file",z)}),ee.append("category",q),ee.append("is_public",S.value?String(v.value==="share"):String(te.is_public)),te.tags.length>=1&&te.tags.forEach(z=>{ee.append("tag_ids",z)}),P.value=!0,bg(S.value,ee,z=>{var le;(le=R.value)==null||le.handleUploadProgress(z)}).then(async z=>{var le,Ve;return(le=R.value)==null||le.handleUploadComplete(),(Ve=R.value)==null||Ve.init(null,!1,K(s.tabType),void 0,!1),Promise.all([d(),L(g.value,!0)]).then(()=>{Se.success("新增成功!")})}).catch(z=>{var le;(le=R.value)==null||le.handleUploadComplete();const Ve=z.message||"新增素材失败";Ve=="Cannot read properties of null (reading 'init')"?Se.success("新增成功!"):Se.error(Ve),P.value=!1})},ae=async(te,ee)=>{P.value=!0,ee=="edit"?(new FormData().append("novel_id","609"),await Cg(te).then(z=>{var le;(le=j.value)==null||le.init({},!1,[],K(s.tabType)),L(g.value),d(),Se.success("更新成功!")}).catch(z=>{var le;Se.error(z),P.value=!1,L(g.value),d(),(le=j.value)==null||le.init({},!1,[],K(s.tabType))})):await kg(te).then(q=>{var z,le;if(q.code===0)(z=j.value)==null||z.init({},!1,[],K(s.tabType)),L(g.value),d(),Se.success("新增成功!");else throw Se.error("新增失败!"),(le=j.value)==null||le.init({},!1,[],K(s.tabType)),new Error(q.message)}).catch(q=>{var z;Se.error(q),P.value=!1,L(g.value),d(),(z=j.value)==null||z.init({},!1,[],K(s.tabType))})},ue=E(""),oe=async()=>{let te=m.value.length;rl.confirm(`确定要移除选中的 ${te} 项吗？`,"移除标签",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",customClass:"resource-list-dialog",showClose:!0,beforeClose:(ee,q,z)=>{ee==="confirm"&&(q.confirmButtonLoading=!0,q.confirmButtonText="移除中..."),z()}}).then(async()=>{var ee;const q={id_list:m.value,tags:((ee=u.value)==null?void 0:ee.map(Number))??[]};await Ig(q).then(async z=>{z.code===0?(Se.success("批量移除标签成功!"),m.value=[],await Ae(),await pe()):(Se.error(z.message),m.value=[],await Ae(),await pe())}).catch(async z=>{Se.error(z),await pe()})}).catch(()=>{})},H=async()=>{var te;let ee={type:K(s.tabType),title:"添加标签"};(te=F.value)==null||te.init(ee,!0)},re=async te=>{var ee;let q={tags:te,id_list:m.value};try{const z=await _g(q);if(z.code===0)Se.success("标签添加成功!"),await d(),(ee=F.value)==null||ee.init(null,!1),ce(m.value);else throw Se.error("标签添加失败: "+z.message),new Error(z.message)}catch(z){Se.error("标签更新失败: "+z.message)}},G=()=>{g.value.name=ue.value,g.value.page=1,P.value=!0,L(g.value)},L=async(te,ee)=>{const q={...te},z=E([]);s.fromSelf||s.propCheckedList&&s.propCheckedList.length>0&&(z.value=r.value.map(le=>le.id));try{const le=await Zs(S.value,q,z.value,u.value,!0);if(le.code===0){const Ve=le.data.list;if(te.page===1)k.value=Ve;else if(ee){const we=new Set(k.value.map(mt=>mt.id)),je=Ve.filter(mt=>!we.has(mt.id));k.value=[...k.value,...je]}y.value=le.data.count,_.value=k.value.length<y.value,P.value=!1}else throw Se.error("接口返回报错!"),new Error(le)}catch{Se.error("获取素材列表失败!"),P.value=!1}},ne=async(te,ee)=>{if(!(!ee||!Array.isArray(ee)||ee.length===0)){P.value=!0;try{const q=await Zs(S.value,te,[],u.value,!0);if(q.code!==0){Se.error(`素材数据请求失败: ${q.message}`),P.value=!1;return}if(!q.data||!q.data.list||q.data.list.length===0){P.value=!1;return}const z=q.data.list.filter(le=>ee.includes(le.id));if(z.length===0){P.value=!1;return}z.forEach(le=>{const Ve=k.value.findIndex(we=>we.id===le.id);Ve!==-1&&(le.showUrl=le.file_url||"",k.value.splice(Ve,1,le))}),P.value=!1}catch{Se.error("获取素材数据失败"),P.value=!1}}},fe=async te=>{try{const ee=te.page;let q=[];for(let z=1;z<=ee;z++){const le={...te,page:z};v.value===rt.SHARE?u.value=T.value:u.value=b.value;const Ve=await Zs(S.value,le,[],u.value,!0);!Ve.data||!Ve.data.list||Ve.data.list.length===0||(q=[...q,...Ve.data.list],y.value=Ve.data.count)}k.value=q,_.value=k.value.length<y.value}catch{Se.error("获取素材数据失败")}},A=()=>{_.value&&!P.value&&(g.value.page++,P.value=!0,L(g.value,!0))},K=te=>{let ee=Is[te]||null;return ee===Is.stickers&&(ee=Is.stickersFake),ee},J=te=>{Q(te)},ce=async te=>{if(!(te!=null&&te.length)){console.warn("未提供有效ID数组");return}P.value=!0;try{const ee=[];for(let q=1;q<=g.value.page;q++){const z={...g.value,page:q};ee.push(ne(z,te))}await Promise.all(ee)}catch(ee){console.error("批量请求失败:",ee),Se.error("部分数据加载失败")}finally{P.value=!1}},pe=async()=>{P.value=!0;for(let te=1;te<=g.value.page;te++){const ee={...g.value,page:te};await fe(ee)}P.value=!1},ve=()=>{u.value=[],v.value==="share"?(T.value=[],C.value.shared=[]):(b.value=[],C.value.personal=[]),g.value.page=1,P.value=!0,L(g.value),Ae(()=>{$("transferCheckedList",r.value,C.value,v.value,s.tabType,k.value,Y.value,D.value)})},he=async te=>{const ee=u.value.indexOf(te);ee>-1?u.value.splice(ee,1):u.value.push(te),g.value.page=1,P.value=!0,v.value==="share"?T.value=[...u.value]:b.value=[...u.value],await L(g.value);const q=p.value.filter(z=>u.value.includes(z.value));v.value==="share"?C.value.shared=q:v.value==="person"&&(C.value.personal=q),Ae(()=>{$("transferCheckedList",r.value,C.value,v.value,s.tabType,k.value,Y.value,D.value)})},Pe=te=>{B.value=te,g.value.page=1;const ee=new Date;switch(D.value=W(ee),te){case"all":"start_date"in g.value&&delete g.value.start_date,"end_date"in g.value&&delete g.value.end_date,P.value=!0,L(g.value);break;case"3days":Y.value=_e(3),g.value.start_date=Y.value,g.value.end_date=D.value,P.value=!0,L(g.value);break;case"7days":Y.value=_e(7),g.value.start_date=Y.value,g.value.end_date=D.value,P.value=!0,L(g.value);break;case"15days":Y.value=_e(15),g.value.start_date=Y.value,g.value.end_date=D.value,P.value=!0,L(g.value);break;case"30days":Y.value=_e(30),g.value.start_date=Y.value,g.value.end_date=D.value,P.value=!0,L(g.value);break;default:Y.value="",D.value=""}const q=p.value.filter(z=>u.value.includes(z.value));$("transferCheckedList",r.value,q,v.value,s.tabType,k.value,Y.value,D.value)},_e=te=>{const ee=new Date;return ee.setDate(ee.getDate()-te),ee.setHours(0,0,0,0),W(ee)},W=te=>{const ee=te.getFullYear(),q=String(te.getMonth()+1).padStart(2,"0"),z=String(te.getDate()).padStart(2,"0"),le=String(te.getHours()).padStart(2,"0"),Ve=String(te.getMinutes()).padStart(2,"0"),we=String(te.getSeconds()).padStart(2,"0");return`${ee}-${q}-${z} ${le}:${Ve}:${we}`},Fe=async te=>{rl.confirm(`确定要将标签"${te.label}"共享吗？`,"共享标签确认",{confirmButtonText:"确定共享",cancelButtonText:"取消",type:"warning",customClass:"resource-list-dialog",showClose:!0,beforeClose:(ee,q,z)=>{ee==="confirm"&&(q.confirmButtonLoading=!0,q.confirmButtonText="共享中..."),z()}}).then(async()=>{try{const ee=await wg(te.value);ee.code===0?(Se.success(`标签"${te.label}"已成功共享!`),d()):Se.error(ee.message||"共享标签失败!")}catch{Se.error("共享标签接口报错!")}}).catch(()=>{})},$e=()=>{P.value=!1},be=te=>{var ee,q,z;m.value=[],r.value=[],u.value=[],C.value.shared=[],C.value.personal=[],T.value=[],b.value=[],s.tabType==="music"?(ee=i.value)==null||ee.clearMaterialDialogChecked(te):s.tabType==="novel"?(q=c.value)==null||q.clearMaterialDialogChecked(te):(z=a.value)==null||z.clearMaterialDialogChecked(),$("transferCheckedList",r.value,C.value,v.value,s.tabType,k.value,Y.value,D.value),g.value.page=1,g.value.category=K(s.tabType),L(g.value)},Ce=async(te,ee=!1)=>{m.value=[],r.value=[],ue.value="",g.value.page=1,u.value=[],C.value.shared=[],C.value.personal=[],T.value=[],b.value=[];const q=K(te);g.value.category=q,P.value=!0,ee?(p.value=[],await d()):await d(),await L(g.value),$("transferCheckedList",r.value,C.value,v.value,te,k.value,Y.value,D.value)};return me(()=>s.tabType,(te,ee)=>{te!==ee&&(v.value===rt.SHARE?T.value=[...u.value]:b.value=[...u.value],m.value=[],ue.value="",u.value=[],g.value.page=1,g.value.category=K(te),P.value=!0,L(g.value))}),o({refreshLibrary:Ce,handleChangeShare:h,clearMaterialDialogChecked:be}),(te,ee)=>{const q=Ne,z=ao,le=Hs,Ve=ko;return f(),I(Ee,null,[l("div",O0,[l("div",V0,[l("div",L0,[l("div",B0,[l("div",{class:N(["tab-option",{active:v.value===n(rt).SHARE}]),onClick:ee[0]||(ee[0]=we=>h(n(rt).SHARE))}," 共享 ",2),l("div",{class:N(["tab-option",{active:v.value===n(rt).PERSON}]),onClick:ee[1]||(ee[1]=we=>h(n(rt).PERSON))}," 个人 ",2)]),ee[6]||(ee[6]=l("div",{class:"my-tags-header"},[l("h3",null,"标签筛选")],-1)),l("div",A0,[l("div",{class:N(["tag-item all-tag",{active:u.value.length===0}]),onClick:ee[2]||(ee[2]=we=>ve())},[l("span",{class:N(["tag-icon",{"shared-tag-icon":v.value===n(rt).SHARE,"personal-tag-icon":v.value===n(rt).PERSON}])},null,2),ee[4]||(ee[4]=l("span",{class:"tag-name"},"全部",-1))],2),(f(!0),I(Ee,null,He(p.value,(we,je)=>(f(),I("div",{key:je,class:N(["tag-item",{active:u.value.includes(we.value),"public-tag":we.is_public}]),onClick:mt=>he(we.value)},[l("span",{class:N(["tag-icon",{"shared-tag-icon":we.is_public||v.value===n(rt).SHARE,"personal-tag-icon":!we.is_public&&v.value===n(rt).PERSON}])},null,2),l("span",Q0,ie(we.label),1),we.is_public&&v.value!==n(rt).SHARE?(f(),I("span",H0,"已共享")):X("",!0),!we.is_public&&te.fromSelf&&v.value===n(rt).PERSON?(f(),I("span",{key:1,class:"share-tag-button",onClick:Re(mt=>Fe(we),["stop"]),title:"共享此标签"},ee[5]||(ee[5]=[l("img",{src:yh,alt:"共享",class:"share-icon"},null,-1)]),8,M0)):X("",!0)],10,j0))),128))])]),l("div",U0,[l("div",z0,[l("div",N0,[l("h2",K0,[l("span",D0,ie(v.value==="share"?"共享":"个人"),1),ee[7]||(ee[7]=Ie("素材库 "))])]),l("div",X0,[w(z,{type:"primary",class:"add-material-btn",onClick:Z},{default:V(()=>[w(q,null,{default:V(()=>[w(n(ga))]),_:1}),ee[8]||(ee[8]=Ie(" 新增素材 "))]),_:1,__:[8]}),te.fromSelf&&!S.value?(f(),se(z,{key:0,type:"primary",class:"add-tag-btn",onClick:H,disabled:m.value.length===0},{default:V(()=>[w(q,null,{default:V(()=>[w(n(ga))]),_:1}),ee[9]||(ee[9]=Ie(" 添加标签 "))]),_:1,__:[9]},8,["disabled"])):X("",!0),te.fromSelf&&v.value==="person"&&u.value.length!==0?(f(),se(z,{key:1,type:"danger",class:"batch-delete-btn",onClick:oe,disabled:m.value.length===0},{default:V(()=>[w(q,null,{default:V(()=>[w(n($n))]),_:1}),ee[10]||(ee[10]=Ie(" 批量移除标签 "))]),_:1,__:[10]},8,["disabled"])):X("",!0)])]),l("div",G0,[l("div",Y0,[ee[11]||(ee[11]=l("span",{class:"filter-label"},"添加时间：",-1)),l("div",q0,[(f(),I(Ee,null,He([{label:"全部",value:"all"},{label:"近3天",value:"3days"},{label:"近7天",value:"7days"},{label:"近15天",value:"15days"},{label:"近30天",value:"30days"}],we=>l("span",{key:we.value,class:N({active:B.value===we.value}),onClick:je=>Pe(we.value)},ie(we.label),11,W0)),64))])]),l("div",Z0,[w(le,{modelValue:ue.value,"onUpdate:modelValue":ee[3]||(ee[3]=we=>ue.value=we),placeholder:"搜索关键字...",clearable:"",onClear:G,onInput:G},{prefix:V(()=>[w(q,null,{default:V(()=>[w(n(Zd))]),_:1})]),_:1},8,["modelValue"])])]),w(P0,{fromSelf:te.fromSelf,length:k.value.length},null,8,["fromSelf","length"]),qe((f(),I("div",J0,[te.tabType==="novel"?(f(),se(S0,{key:0,ref:"novelEl","max-checked":te.maxChecked,fromSelf:te.fromSelf,isFromReading:te.isFromReading,propList:k.value,checkedData:m.value,onToEditNovel:J,onTransferCheckedList:x,onRefreshList:pe,onLoadMore:A},null,8,["max-checked","fromSelf","isFromReading","propList","checkedData"])):te.tabType==="music"?(f(),se(Vh,{key:1,ref:"musicEl",checkedData:m.value,fromSelf:te.fromSelf,propList:k.value,"max-checked":te.maxChecked,onTransferCheckedList:x,onLoadMore:A},null,8,["checkedData","fromSelf","propList","max-checked"])):(f(),se(v0,{key:2,ref:"libraryEl",tabType:te.tabType,propFrom:te.propFrom,propActiveTabType:v.value,propList:k.value,checkedData:m.value,"max-checked":te.maxChecked,isFromReading:te.isFromReading,fromSelf:te.fromSelf,onTransferCheckedList:x,onRefreshList:pe,onLoadMore:A,onEditBackgroundGetList:ce},null,8,["tabType","propFrom","propActiveTabType","propList","checkedData","max-checked","isFromReading","fromSelf"]))])),[[Ve,P.value]])])])]),w(Bl,{ref:"createVideo",onSubmitForm:U,onCreateNewTag:O,onResetLoading:$e},null,512),w(Ll,{ref:"createNovel",onSubmitForm:ae,onCreateNewTag:O},null,512),w(oh,{ref:"tagAdd",onSubmitForm:re},null,512)],64)}}}),Ci=xt(ty,[["__scopeId","data-v-6de1d5f3"]]),oy={class:"dialog-header"},sy=["id"],ly={class:"dialog-content"},ay={key:0,class:"material-type-switch"},ny={key:1,class:"material-type-switch"},iy={class:"dialog-footer"},ry=de({name:"ComSelectDialog",__name:"ComSelectDialog",props:{title:{default:"选择素材"},tabType:{default:""},count:{default:0},propCheckedList:{default:()=>[]},propComponentList:{default:()=>[]},propTagsObject:{default:()=>({})},propActiveTabType:{},from:{default:""},isFromReading:{type:Boolean,default:!1},isGroupSelection:{type:Boolean,default:!1}},emits:["submit","closeDialog"],setup(e,{expose:o,emit:t}){const s=E(!1),a=E(!1),c=t,i=e,u=E([]),p=E({shared:[],personal:[]}),y=E(),_=E(""),v=E([]),$=E(),S=E(),m=E(null),r=Dt("resourceListEL");Le(()=>{switch(s.value=!0,i.tabType){case"stickers":T.value=!0,b.value=!1;break;case"textImage":T.value=!1,b.value=!1;break;case"lastFrames":T.value=!1,b.value=!0;break;case"textVideo":T.value=!1,b.value=!1;break;default:T.value=!1,b.value=!1}i.propCheckedList&&i.propCheckedList.length>0?x(i.propCheckedList,i.propTagsObject||{},i.propActiveTabType||rt.SHARE,i.tabType,i.propComponentList||[]):i.tabType=="video"&&typeof i.propCheckedList=="object"&&i.propCheckedList!==null&&!Array.isArray(i.propCheckedList)&&x(i.propCheckedList,i.propTagsObject||{},i.propActiveTabType||rt.SHARE,i.tabType,i.propComponentList||[])});const T=E(i.tabType==="stickers"),b=E(i.tabType==="lastFrames"),C=M(()=>i.tabType==="stickers"||i.tabType==="textImage"?T.value?"stickers":"textImage":i.tabType==="lastFrames"||i.tabType==="textVideo"?b.value?"lastFrames":"textVideo":i.tabType),d=M(()=>i.tabType!=="stickers"&&i.tabType!=="textImage"&&i.tabType!=="lastFrames"&&i.tabType!=="textVideo"?n(i.title):{stickers:"选择贴图",textImage:"选择搜索框",lastFrames:"选择尾帧视频",textVideo:"选择尾帧搜索框"}[C.value]||i.title),k=F=>{if(T.value===F)return;T.value=F;const B=F?"stickers":"textImage";u.value=[],r.value&&(r.value.refreshLibrary(B,!0),Ae(()=>{var Y,D;r.value&&y.value&&((D=(Y=r.value).handleChangeShare)==null||D.call(Y,y.value))}))},g=F=>{if(b.value===F)return;b.value=F;const B=F?"lastFrames":"textVideo";u.value=[],r.value&&(r.value.refreshLibrary(B,!0),Ae(()=>{var Y,D;r.value&&y.value&&((D=(Y=r.value).handleChangeShare)==null||D.call(Y,y.value))}))};Lt(()=>{document.body.style.overflow=""});const h=()=>{s.value=!1,c("closeDialog")},x=(F,B,Y,D,Z,Q,P)=>{if(u.value=F,B){const O=U=>{if(!Array.isArray(U)||U.length===0)return[];const ae=new Set;return U.filter(ue=>(ue==null?void 0:ue.value)==null||ae.has(ue.value)?!1:(ae.add(ue.value),!0))};p.value={shared:O(B.shared),personal:O(B.personal)}}y.value=Y,_.value=D,v.value=Z,$.value=Q,S.value=P},R=async()=>{if(_.value=="novel"&&u.value.length==0){Se({message:"请选择素材",type:"warning"});return}const F=C.value||_.value;if(i.tabType=="video"&&(i.from==="video"||i.from==="topVideo"))if(u.value.length==0&&(p.value.shared&&p.value.shared.length>0||p.value.personal&&p.value.personal.length>0)){const B=ia([...v.value]);let Y=[];i.from==="topVideo"?(Y=v.value.length===0?[]:v.value.length<=i.count*10?B:B.slice(0,i.count*10),u.value=Y):i.from==="video"&&(Y=v.value.length===0?[]:v.value.length<=10?B:B.slice(0,10),u.value=Y),c("submit",u.value,p.value,y.value,_.value,v.value,$.value,S.value,i.from,!1)}else c("submit",u.value,p.value,y.value,_.value,v.value,$.value,S.value,i.from,!0);else if(!i.isGroupSelection&&u.value.length==0&&(p.value.shared&&p.value.shared.length>0||p.value.personal&&p.value.personal.length>0)){const B=ia([...v.value]),Y=v.value.length===0?[]:v.value.length<=i.count?B:B.slice(0,i.count);c("submit",Y,p.value,y.value,F,v.value,$.value,S.value,i.from,!1)}else c("submit",u.value,p.value,y.value,F,v.value,$.value,S.value,i.from,!0)},j=()=>{var F;(F=r.value)==null||F.clearMaterialDialogChecked(C.value)};return o({}),(F,B)=>{const Y=Ne,D=ao,Z=ds;return f(),se(Z,{ref_key:"dialogRef",ref:m,modelValue:s.value,"onUpdate:modelValue":B[5]||(B[5]=Q=>s.value=Q),width:"70%","before-close":h,top:"5vh",class:"custom-dialog select-dialog","close-on-click-modal":!1,"show-close":!1},{header:V(({titleId:Q,titleClass:P})=>[l("div",oy,[l("span",{id:Q,class:N(P)},ie(d.value),11,sy),w(Y,{class:"close-icon",onClick:h},{default:V(()=>[w(n(ht))]),_:1})])]),footer:V(()=>[l("div",iy,[w(D,{onClick:j,disabled:a.value},{default:V(()=>B[6]||(B[6]=[Ie("清除选中")])),_:1,__:[6]},8,["disabled"]),w(D,{type:"primary",onClick:B[4]||(B[4]=Q=>R()),disabled:a.value},{default:V(()=>B[7]||(B[7]=[Ie("确定")])),_:1,__:[7]},8,["disabled"])])]),default:V(()=>[l("div",ly,[i.tabType==="stickers"||i.tabType==="textImage"?(f(),I("div",ay,[l("div",{class:N(["switch-item",T.value?"active":""]),onClick:B[0]||(B[0]=Q=>k(!0))}," 贴图 ",2),l("div",{class:N(["switch-item",T.value?"":"active"]),onClick:B[1]||(B[1]=Q=>k(!1))}," 带文字图片 ",2)])):X("",!0),i.tabType==="lastFrames"||i.tabType==="textVideo"?(f(),I("div",ny,[l("div",{class:N(["switch-item",b.value?"active":""]),onClick:B[2]||(B[2]=Q=>g(!0))}," 尾帧视频 ",2),l("div",{class:N(["switch-item",b.value?"":"active"]),onClick:B[3]||(B[3]=Q=>g(!1))}," 带文字视频 ",2)])):X("",!0),w(Ci,{ref:"resourceListEL",tabType:C.value,onTransferCheckedList:x,"max-checked":F.count,propCheckedList:F.propCheckedList,propTagsObject:F.propTagsObject,propActiveTabType:F.propActiveTabType,isFromReading:F.isFromReading,propFrom:F.from},null,8,["tabType","max-checked","propCheckedList","propTagsObject","propActiveTabType","isFromReading","propFrom"])])]),_:1},8,["modelValue"])}}}),_i=xt(ry,[["__scopeId","data-v-4d18ba74"]]),cy={class:"task-info-section"},uy={class:"task-info-card"},dy={class:"card-content"},fy={class:"flex-row-container"},vy={class:"group-count-buttons"},py={__name:"TaskInfoCard",props:{formData:{type:Object,required:!0},source:{type:String,default:"novel"}},emits:["update:formData"],setup(e,{emit:o}){const t=e,s=o,a=u=>{s("update:formData",{...t.formData,taskName:u})},c=u=>{s("update:formData",{...t.formData,count:u})},i=u=>{t.formData.groupCount!==u&&s("update:formData",{...t.formData,groupCount:u})};return(u,p)=>{const y=oo,_=ho,v=os;return f(),I("div",cy,[l("div",uy,[p[3]||(p[3]=l("div",{class:"card-header"},[l("div",{class:"card-title"},"任务信息")],-1)),l("div",dy,[w(_,{label:"任务名称",prop:"taskName","label-position":"top"},{default:V(()=>[w(y,{"model-value":e.formData.taskName,"onUpdate:modelValue":a,placeholder:"请输入任务名称",maxlength:"100","show-word-limit":""},null,8,["model-value"])]),_:1}),l("div",fy,[w(_,{label:"条数",prop:"count","label-position":"top",class:"half-width"},{default:V(()=>[w(v,{"model-value":e.formData.count,"onUpdate:modelValue":c,min:1,max:20},null,8,["model-value"])]),_:1}),e.source===n(lt).NOVEL?(f(),se(_,{key:0,label:"固定组合数",prop:"groupCount","label-position":"top",class:"half-width"},{default:V(()=>[l("div",vy,[l("div",{class:N(["group-button",{active:e.formData.groupCount===0}]),onClick:p[0]||(p[0]=$=>i(0))}," 无 ",2),l("div",{class:N(["group-button",{active:e.formData.groupCount===2}]),onClick:p[1]||(p[1]=$=>i(2))}," 2 ",2),l("div",{class:N(["group-button",{active:e.formData.groupCount===3}]),onClick:p[2]||(p[2]=$=>i(3))}," 3 ",2)])]),_:1})):X("",!0)])])])])}}},wi=ot(py,[["__scopeId","data-v-e97e22cf"]]),my={class:"main-collapse-icon"},gy={key:0},hy={key:1},yy={key:0,class:"material-settings"},ky={class:"material-section"},by={class:"section-content"},Cy={class:"material-item"},_y={class:"material-selection"},wy={key:0,class:"music-card pre-video-card"},Iy={class:"music-card-header"},Ty={key:0,class:"music-selected-info"},xy=["title"],Fy={class:"el-icon"},Sy={class:"el-icon"},Ey={class:"music-card-content"},$y={class:"music-settings"},Ry={class:"setting-item"},Py={class:"el-icon"},Oy={key:1,class:"material-selection"},Vy={class:"el-icon"},Ly={class:"el-icon"},By={class:"material-section"},Ay={class:"section-content"},jy={class:"material-selection"},Qy={class:"selection-content"},Hy={class:"el-icon selection-icon"},My={key:0},Uy=["title"],zy={key:1,class:"material-selection"},Ny={class:"el-icon"},Ky={class:"el-icon"},Dy={class:"material-item"},Xy={class:"material-selection"},Gy={key:0,class:"music-card"},Yy={class:"music-card-header"},qy={key:0,class:"music-selected-info"},Wy=["title"],Zy={class:"el-icon"},Jy={class:"el-icon"},e1={class:"music-card-content"},t1={class:"music-settings"},o1={class:"setting-item"},s1={class:"setting-item"},l1={class:"position-selector"},a1=["onClick"],n1={key:1,class:"material-selection"},i1={class:"el-icon"},r1={class:"el-icon"},c1={class:"material-item"},u1={class:"material-selection"},d1={class:"selection-content"},f1={class:"el-icon selection-icon"},v1={key:0},p1=["title"],m1={key:2,class:"disabled-tip"},g1={class:"music-card-header"},h1={key:0,class:"music-selected-info"},y1={key:0,class:"disabled-tip"},k1=["title"],b1={key:0,class:"disabled-tip"},C1={class:"el-icon"},_1={class:"search-box-settings"},w1={class:"setting-item"},I1={key:2,class:"material-selection"},T1={class:"el-icon"},x1={key:0,class:"disabled-tip"},F1={class:"el-icon"},S1={key:0,class:"upload-disabled-tip"},E1={class:"material-section"},$1={class:"section-content"},R1={class:"material-item"},P1={class:"material-selection"},O1={class:"selection-content"},V1={class:"el-icon selection-icon"},L1={key:0},B1=["title"],A1={key:2,class:"disabled-tip"},j1={class:"music-card-header"},Q1={key:0,class:"music-selected-info"},H1={key:0,class:"disabled-tip"},M1=["title"],U1={key:0,class:"disabled-tip"},z1={class:"el-icon"},N1={class:"search-box-settings"},K1={class:"setting-item"},D1={key:2,class:"material-selection"},X1={class:"el-icon"},G1={key:0,class:"disabled-tip"},Y1={class:"el-icon"},q1={key:0,class:"upload-disabled-tip"},W1={key:1,class:"material-settings"},Z1={class:"material-section"},J1={class:"section-content"},ek={class:"material-item"},tk={class:"material-selection"},ok={class:"selection-content"},sk={class:"el-icon selection-icon"},lk={key:0},ak=["title"],nk={key:2,class:"disabled-tip"},ik={key:1,class:"material-selection"},rk={class:"el-icon"},ck={key:0,class:"disabled-tip"},uk={class:"el-icon"},dk={key:0,class:"upload-disabled-tip"},fk={class:"material-section"},vk={class:"section-content"},pk={class:"material-item"},mk={class:"material-selection"},gk={class:"selection-content"},hk={key:0},yk={key:1,class:"material-selection"},kk={class:"el-icon"},bk={key:0,class:"disabled-tip"},Ck={class:"el-icon"},_k={key:0,class:"upload-disabled-tip"},wk={__name:"MaterialsSection",props:{readFormData:{type:Object,required:!0},checkedData:{type:Object,required:!0},displayTags:{type:Object,required:!0},rules:{type:Object,required:!0},musicStartPositionOptions:{type:Array,required:!0},musicDbValue:{type:Number,required:!0},mainSearchBoxText:{type:String,required:!0},endSearchBoxText:{type:String,required:!0},showMaterialConfig:{type:Boolean,required:!0},isFromMaterialChecked:{type:Object,required:!0},preVideoDbValue:{type:Number,required:!0},source:{type:String,required:!0}},emits:["update:showMaterialConfig","update:musicDbValue","update:musicStartPosition","update:mainSearchBoxText","update:endSearchBoxText","selectMaterial","uploadMaterial","openTitleSettings","update:preVideoDbValue"],setup(e,{emit:o}){const t=e,s=o,a=M(()=>t.readFormData.groupCount>1),c=()=>{s("update:showMaterialConfig",!t.showMaterialConfig)},i=m=>{s("selectMaterial",m)},u=m=>{s("uploadMaterial",m)},p=()=>{s("openTitleSettings")},y=m=>{s("update:musicDbValue",m)},_=m=>{s("update:musicStartPosition",m)},v=m=>{s("update:mainSearchBoxText",m)},$=m=>{s("update:endSearchBoxText",m)},S=m=>{s("update:preVideoDbValue",m)};return(m,r)=>{var g,h,x,R,j,F,B,Y,D,Z,Q,P,O,U,ae,ue,oe;const T=ss,b=en,C=ho,d=ls,k=oo;return f(),I("div",{class:N(["main-section",{"main-section-active":e.showMaterialConfig}])},[l("div",{class:"main-header",onClick:c},[r[29]||(r[29]=l("h3",null,"素材",-1)),l("div",my,[e.showMaterialConfig?(f(),I("span",gy,"−")):(f(),I("span",hy,"+"))])]),l("div",{class:N(["main-content",{hidden:!e.showMaterialConfig}])},[e.source===n(lt).NOVEL?(f(),I("div",yy,[l("div",ky,[r[35]||(r[35]=l("div",{class:"divider-title"},[l("span",null,"首帧")],-1)),l("div",by,[l("div",Cy,[r[34]||(r[34]=l("div",{class:"material-label"},"首帧视频",-1)),l("div",_y,[(g=e.checkedData.checkedFirstFrames)!=null&&g.length?(f(),I("div",wy,[l("div",Iy,[e.isFromMaterialChecked.firstFrames?(f(),I("div",Ty," 已选择 "+ie(e.checkedData.checkedFirstFrames.length)+" 条首帧视频 ",1)):(f(),I("span",{key:1,class:"music-selected-info",title:e.displayTags.firstFramesTags.map(H=>H.label).join("、")},"已选标签: "+ie(e.displayTags.firstFramesTags.map(H=>H.label).join("、")),9,xy)),l("div",{class:"continue-select-btn",onClick:r[0]||(r[0]=H=>i("firstFrames"))},[l("i",Fy,[w(n(Je))]),r[30]||(r[30]=l("span",null,"继续选择",-1))]),l("div",{class:"upload-icon-btn",onClick:r[1]||(r[1]=H=>u("firstFrames")),style:ye(e.readFormData.count===((h=e.checkedData.checkedFirstFrames)==null?void 0:h.length)?{cursor:"not-allowed",opacity:.6}:{})},[l("i",Sy,[w(n(st))])],4)]),l("div",Ey,[l("div",$y,[l("div",Ry,[r[31]||(r[31]=l("div",{class:"setting-label"},"音量",-1)),w(T,{class:"volume-slider","model-value":e.preVideoDbValue,"onUpdate:modelValue":S,min:-20,max:20,step:.1,"format-tooltip":H=>H.toFixed(1)+" dB"},null,8,["model-value","format-tooltip"])])])]),l("div",{class:"edit-title-tip",onClick:Re(p,["stop"])},[l("i",Py,[w(b)]),r[32]||(r[32]=l("span",null,"编辑标题",-1))])])):(f(),I("div",Oy,[l("div",{class:"select-btn",onClick:r[2]||(r[2]=H=>i("firstFrames"))},[l("i",Vy,[w(n(Je))]),r[33]||(r[33]=l("span",null,"选择首帧视频",-1))]),l("div",{class:"upload-icon-btn",onClick:r[3]||(r[3]=H=>u("firstFrames"))},[l("i",Ly,[w(n(st))])])]))])])])]),l("div",By,[r[46]||(r[46]=l("div",{class:"divider-title"},[l("span",null,"正片")],-1)),l("div",Ay,[w(d,{model:e.readFormData,"label-width":"100px",rules:e.rules,ref:"ruleFormRef","require-asterisk-position":"right"},{default:V(()=>[w(C,{label:"背景图",prop:"background","label-position":"top",class:"background-btn"},{default:V(()=>{var H,re,G;return[l("div",jy,[((H=e.checkedData.checkedBackgroundList)==null?void 0:H.length)>0?(f(),I("div",{key:0,class:"material-selection-card",onClick:r[4]||(r[4]=L=>i("background"))},[l("div",Qy,[l("i",Hy,[w(n(St))]),e.isFromMaterialChecked.background?(f(),I("span",My,"已选 "+ie((re=e.checkedData.checkedBackgroundList)==null?void 0:re.length)+" 项",1)):(f(),I("span",{key:1,class:"selection-text",title:e.displayTags.backgroundTag.map(L=>L.label).join("、")},"已选标签: "+ie(e.displayTags.backgroundTag.map(L=>L.label).join("、")),9,Uy))])])):(f(),I("div",zy,[l("div",{class:"select-btn",onClick:r[5]||(r[5]=L=>i("background"))},[l("i",Ny,[w(n(Je))]),r[36]||(r[36]=l("span",null,"选择背景图",-1))])])),l("div",{class:"upload-icon-btn",onClick:r[6]||(r[6]=L=>u("background")),style:ye(e.readFormData.count===((G=e.checkedData.checkedBackgroundList)==null?void 0:G.length)?{cursor:"not-allowed",opacity:.6}:{})},[l("i",Ky,[w(n(st))])],4)])]}),_:1})]),_:1},8,["model","rules"]),l("div",Dy,[r[41]||(r[41]=l("div",{class:"material-label"},"背景音乐",-1)),l("div",Xy,[e.checkedData.checkedMusic.length?(f(),I("div",Gy,[l("div",Yy,[e.isFromMaterialChecked.music?(f(),I("div",qy," 已选择 "+ie(e.checkedData.checkedMusic.length)+" 条音乐 ",1)):(f(),I("span",{key:1,class:"music-selected-info",title:e.displayTags.musicTag.map(H=>H.label).join("、")},"已选标签: "+ie(e.displayTags.musicTag.map(H=>H.label).join("、")),9,Wy)),l("div",{class:"continue-select-btn",onClick:r[7]||(r[7]=H=>i("music"))},[l("i",Zy,[w(n(Je))]),r[37]||(r[37]=l("span",null,"继续选择",-1))]),l("div",{class:"upload-icon-btn",onClick:r[8]||(r[8]=H=>u("music")),style:ye(e.readFormData.count===((x=e.checkedData.checkedMusic)==null?void 0:x.length)?{cursor:"not-allowed",opacity:.6}:{})},[l("i",Jy,[w(n(st))])],4)]),l("div",e1,[l("div",t1,[l("div",o1,[r[38]||(r[38]=l("div",{class:"setting-label"},"音量",-1)),w(T,{class:"volume-slider","model-value":e.musicDbValue,"onUpdate:modelValue":y,min:-20,max:20,step:.1,"format-tooltip":H=>H.toFixed(1)+" dB"},null,8,["model-value","format-tooltip"])]),l("div",s1,[r[39]||(r[39]=l("div",{class:"setting-label"},"开始位置",-1)),l("div",l1,[(f(!0),I(Ee,null,He(e.musicStartPositionOptions,H=>(f(),I("div",{key:H.value,class:N(["position-option",{selected:e.readFormData.musicStartPosition===H.value}]),onClick:re=>_(H.value)},ie(H.label),11,a1))),128))])])])])])):(f(),I("div",n1,[l("div",{class:"select-btn",onClick:r[9]||(r[9]=H=>i("music"))},[l("i",i1,[w(n(Je))]),r[40]||(r[40]=l("span",null,"选择背景音乐",-1))]),l("div",{class:"upload-icon-btn",onClick:r[10]||(r[10]=H=>u("music"))},[l("i",r1,[w(n(st))])])]))])]),l("div",c1,[r[45]||(r[45]=l("div",{class:"material-label"},"贴图",-1)),l("div",u1,[(R=e.checkedData.checkedStickers)!=null&&R.length?(f(),I("div",{key:0,class:"material-selection-card",onClick:r[11]||(r[11]=H=>a.value?null:i("stickers")),style:ye(a.value?{cursor:"not-allowed"}:{})},[l("div",d1,[l("i",f1,[w(n(St))]),e.isFromMaterialChecked.stickers?(f(),I("span",v1,"已选 "+ie((j=e.checkedData.checkedStickers)==null?void 0:j.length)+" 项贴图",1)):(f(),I("span",{key:1,class:"selection-text",title:e.displayTags.stickersTags.map(H=>H.label).join("、")},"已选标签: "+ie(e.displayTags.stickersTags.map(H=>H.label).join("、")),9,p1)),a.value?(f(),I("span",m1)):X("",!0)])],4)):e.checkedData.checkedTextImages.length?(f(),I("div",{key:1,class:"music-card search-box-card",onClick:r[14]||(r[14]=H=>a.value?null:i("textImage")),style:ye(a.value?{cursor:"not-allowed"}:{cursor:"pointer"})},[l("div",g1,[e.isFromMaterialChecked.textImage?(f(),I("div",h1,[Ie(" 已选择 "+ie(e.checkedData.checkedTextImages.length)+" 项搜索框 ",1),a.value?(f(),I("span",y1)):X("",!0)])):(f(),I("span",{key:1,class:"music-selected-info",title:e.displayTags.textImageTags.map(H=>H.label).join("、")},[Ie("已选标签: "+ie(e.displayTags.textImageTags.map(H=>H.label).join("、"))+" ",1),a.value?(f(),I("span",b1)):X("",!0)],8,k1)),l("div",{class:"continue-select-btn",onClick:r[12]||(r[12]=H=>a.value?null:i("textImage")),style:ye(a.value?{cursor:"not-allowed",opacity:.6}:{})},[l("i",C1,[w(n(Je))]),r[42]||(r[42]=l("span",null,"重新选择",-1))],4)]),l("div",{class:"music-card-content",onClick:r[13]||(r[13]=H=>{H.stopPropagation()})},[l("div",_1,[l("div",w1,[r[43]||(r[43]=l("div",{class:"setting-label"},"内容",-1)),w(k,{"model-value":e.mainSearchBoxText,"onUpdate:modelValue":v,placeholder:"请输入搜索框显示的文本",clearable:""},null,8,["model-value"])])])])],4)):(f(),I("div",I1,[l("div",{class:"select-btn",onClick:r[15]||(r[15]=H=>a.value?null:i("stickers")),style:ye(a.value?{cursor:"not-allowed",opacity:.6}:{})},[l("i",T1,[w(n(Je))]),r[44]||(r[44]=l("span",null,"选择贴图",-1)),a.value?(f(),I("span",x1)):X("",!0)],4)])),l("div",{class:"upload-icon-btn",onClick:r[16]||(r[16]=H=>a.value?null:u(e.checkedData.checkedTextImages.length?"textImage":"stickers")),style:ye(a.value||e.readFormData.count===(((F=e.checkedData.checkedStickers)==null?void 0:F.length)||((B=e.checkedData.checkedTextImages)==null?void 0:B.length))?{cursor:"not-allowed",opacity:.6}:{})},[l("i",F1,[w(n(st))]),a.value?(f(),I("span",S1)):X("",!0)],4)])])])]),l("div",E1,[r[51]||(r[51]=l("div",{class:"divider-title"},[l("span",null,"尾帧")],-1)),l("div",$1,[l("div",R1,[r[50]||(r[50]=l("div",{class:"material-label"},"尾帧",-1)),l("div",P1,[(Y=e.checkedData.checkedLastFrames)!=null&&Y.length?(f(),I("div",{key:0,class:"material-selection-card",onClick:r[17]||(r[17]=H=>a.value?null:i("lastFrames")),style:ye(a.value?{cursor:"not-allowed"}:{})},[l("div",O1,[l("i",V1,[w(n(St))]),e.isFromMaterialChecked.lastFrames?(f(),I("span",L1,"已选择 "+ie((D=e.checkedData.checkedLastFrames)==null?void 0:D.length)+" 条尾帧视频",1)):(f(),I("span",{key:1,class:"selection-text",title:e.displayTags.lastFrameTag.map(H=>H.label).join("、")},"已选标签: "+ie(e.displayTags.lastFrameTag.map(H=>H.label).join("、")),9,B1)),a.value?(f(),I("span",A1)):X("",!0)])],4)):e.checkedData.checkedTextVideos.length?(f(),I("div",{key:1,class:"music-card search-box-card",onClick:r[20]||(r[20]=H=>a.value?null:i("textVideo")),style:ye(a.value?{cursor:"not-allowed"}:{cursor:"pointer"})},[l("div",j1,[e.isFromMaterialChecked.textVideo?(f(),I("div",Q1,[Ie(" 已选择 "+ie(e.checkedData.checkedTextVideos.length)+" 项尾帧搜索框 ",1),a.value?(f(),I("span",H1)):X("",!0)])):(f(),I("span",{key:1,class:"music-selected-info",title:e.displayTags.textVideoTags.map(H=>H.label).join("、")},[Ie("已选标签: "+ie(e.displayTags.textVideoTags.map(H=>H.label).join("、"))+" ",1),a.value?(f(),I("span",U1)):X("",!0)],8,M1)),l("div",{class:"continue-select-btn",onClick:r[18]||(r[18]=H=>a.value?null:i("textVideo")),style:ye(a.value?{cursor:"not-allowed",opacity:.6}:{})},[l("i",z1,[w(n(Je))]),r[47]||(r[47]=l("span",null,"重新选择",-1))],4)]),l("div",{class:"music-card-content",onClick:r[19]||(r[19]=H=>{H.stopPropagation()})},[l("div",N1,[l("div",K1,[r[48]||(r[48]=l("div",{class:"setting-label"},"内容",-1)),w(k,{"model-value":e.endSearchBoxText,"onUpdate:modelValue":$,placeholder:"请输入搜索框显示的文本",clearable:""},null,8,["model-value"])])])])],4)):(f(),I("div",D1,[l("div",{class:"select-btn",onClick:r[21]||(r[21]=H=>a.value?null:i("lastFrames")),style:ye(a.value?{cursor:"not-allowed",opacity:.6}:{})},[l("i",X1,[w(n(Je))]),r[49]||(r[49]=l("span",null,"选择尾帧",-1)),a.value?(f(),I("span",G1)):X("",!0)],4)])),l("div",{class:"upload-icon-btn",onClick:r[22]||(r[22]=H=>a.value?null:u(e.checkedData.checkedTextVideos.length?"textVideo":"lastFrames")),style:ye(a.value||e.readFormData.count===(((Z=e.checkedData.checkedLastFrames)==null?void 0:Z.length)||((Q=e.checkedData.checkedTextVideos)==null?void 0:Q.length))?{cursor:"not-allowed",opacity:.6}:{})},[l("i",Y1,[w(n(st))]),a.value?(f(),I("span",q1)):X("",!0)],4)])])])])])):e.source===n(lt).SHORT_PLAY?(f(),I("div",W1,[l("div",Z1,[r[54]||(r[54]=l("div",{class:"divider-title"},[l("span",null,"正片")],-1)),l("div",J1,[l("div",ek,[r[53]||(r[53]=l("div",{class:"material-label required"},"贴图",-1)),l("div",tk,[(P=e.checkedData.checkedShortPlayStickers)!=null&&P.length?(f(),I("div",{key:0,class:"material-selection-card",onClick:r[23]||(r[23]=H=>a.value?null:i("shortPlayStickers")),style:ye(a.value?{cursor:"not-allowed"}:{})},[l("div",ok,[l("i",sk,[w(n(St))]),e.isFromMaterialChecked.shortPlayStickers?(f(),I("span",lk,"已选 "+ie((O=e.checkedData.checkedShortPlayStickers)==null?void 0:O.length)+" 项贴图",1)):(f(),I("span",{key:1,class:"selection-text",title:e.displayTags.shortPlayStickersTag.map(H=>H.label).join("、")},"已选标签: "+ie(e.displayTags.shortPlayStickersTag.map(H=>H.label).join("、")),9,ak)),a.value?(f(),I("span",nk)):X("",!0)])],4)):(f(),I("div",ik,[l("div",{class:"select-btn",onClick:r[24]||(r[24]=H=>a.value?null:i("shortPlayStickers")),style:ye(a.value?{cursor:"not-allowed",opacity:.6}:{})},[l("i",rk,[w(n(Je))]),r[52]||(r[52]=l("span",null,"选择贴图",-1)),a.value?(f(),I("span",ck)):X("",!0)],4)])),l("div",{class:"upload-icon-btn",onClick:r[25]||(r[25]=H=>a.value?null:u("shortPlayStickers")),style:ye(a.value||e.readFormData.count===((U=e.checkedData.checkedShortPlayStickers)==null?void 0:U.length)?{cursor:"not-allowed",opacity:.6}:{})},[l("i",uk,[w(n(st))]),a.value?(f(),I("span",dk)):X("",!0)],4)])])])]),l("div",fk,[r[57]||(r[57]=l("div",{class:"divider-title"},[l("span",null,"尾帧")],-1)),l("div",vk,[l("div",pk,[r[56]||(r[56]=l("div",{class:"material-label required"},"尾帧",-1)),l("div",mk,[(ae=e.checkedData.checkedShortPlayLastFrames)!=null&&ae.length?(f(),I("div",{key:0,class:"material-selection-card",onClick:r[26]||(r[26]=H=>a.value?null:i("shortPlayLastFrames")),style:ye(a.value?{cursor:"not-allowed"}:{})},[l("div",gk,[e.checkedData.checkedShortPlayLastFrames?(f(),I("span",hk,"已选择 "+ie((ue=e.checkedData.checkedShortPlayLastFrames)==null?void 0:ue.length)+" 条尾帧视频",1)):X("",!0)])],4)):(f(),I("div",yk,[l("div",{class:"select-btn",onClick:r[27]||(r[27]=H=>a.value?null:i("shortPlayLastFrames")),style:ye(a.value?{cursor:"not-allowed",opacity:.6}:{})},[l("i",kk,[w(n(Je))]),r[55]||(r[55]=l("span",null,"选择尾帧",-1)),a.value?(f(),I("span",bk)):X("",!0)],4)])),l("div",{class:"upload-icon-btn",onClick:r[28]||(r[28]=H=>a.value?null:u("shortPlayLastFrames")),style:ye((oe=e.checkedData.checkedShortPlayLastFrames)!=null&&oe.length?{cursor:"not-allowed",opacity:.6}:{})},[l("i",Ck,[w(n(st))]),a.value?(f(),I("span",_k)):X("",!0)],4)])])])])])):X("",!0)],2)],2)}}},Ik=ot(wk,[["__scopeId","data-v-d81d15d5"]]),Tk={class:"main-collapse-icon"},xk={key:0},Fk={key:1},Sk={class:"material-settings"},Ek={class:"divider-title"},$k={key:0,class:"group-name-edit"},Rk=["value","onInput","onBlur","onKeyup"],Pk={key:1},Ok=["onClick"],Vk={class:"section-content"},Lk={class:"material-item"},Bk={class:"material-selection"},Ak=["onClick"],jk={class:"selection-content"},Qk={class:"el-icon selection-icon"},Hk={key:1,class:"music-card search-box-card"},Mk={class:"music-card-header"},Uk={class:"music-selected-info"},zk=["onClick"],Nk={class:"el-icon"},Kk={class:"search-box-settings"},Dk={class:"setting-item"},Xk={key:2,class:"material-selection"},Gk=["onClick"],Yk={class:"el-icon"},qk=["onClick"],Wk={class:"el-icon"},Zk={class:"material-item"},Jk={class:"material-selection"},eb=["onClick"],tb={class:"selection-content"},ob={class:"el-icon selection-icon"},sb={key:1,class:"music-card search-box-card"},lb={class:"music-card-header"},ab={class:"music-selected-info"},nb=["onClick"],ib={class:"el-icon"},rb={class:"search-box-settings"},cb={class:"setting-item"},ub={key:2,class:"material-selection"},db=["onClick"],fb={class:"el-icon"},vb=["onClick"],pb={class:"el-icon"},mb={__name:"GroupSection",props:{formData:{type:Object,required:!0},groupData:{type:Object,required:!0},showGroupConfig:{type:Boolean,required:!0},checkedData:{type:Object,required:!0},videoType:{type:String,required:!0}},emits:["update:showGroupConfig","selectGroupMaterial","uploadMaterial","update:groupData"],setup(e,{emit:o}){const t=E(-1),s=e,a=o,c=()=>{a("update:showGroupConfig",!s.showGroupConfig)},i=d=>{if(!s.groupData.groupNames){const k={...s.groupData};k.groupNames=[],a("update:groupData",k)}for(;s.groupData.groupNames.length<=d;){const k={...s.groupData};k.groupNames.push(`组合 ${k.groupNames.length+1}`),a("update:groupData",k)}t.value=d,Ae(()=>{const k=`.material-section:nth-child(${d+1}) .group-name-edit .group-name-input`,g=document.querySelector(k);g&&(g.focus(),g.select())})},u=(d,k)=>{const g={...s.groupData};g.groupNames||(g.groupNames=[]),g.groupNames[d]=k,a("update:groupData",g)},p=d=>{if(!s.groupData.groupNames[d]){const k={...s.groupData};k.groupNames[d]=`组合 ${d+1}`,a("update:groupData",k)}t.value=-1},y=async()=>{let d=[];const k=Math.max(s.groupData.groupStickers.length,s.groupData.groupLastFrames.length,s.groupData.groupTextImages.length,s.groupData.groupTextVideos.length,s.groupData.groupTextImageTexts.length,s.groupData.groupTextVideoTexts.length);d=Array.from({length:k},(h,x)=>{var Q,P,O,U,ae,ue,oe,H,re,G;const R=((Q=s.groupData.groupTextImages[x])==null?void 0:Q.length)>0?void 0:((O=(P=s.groupData.groupStickers[x])==null?void 0:P[0])==null?void 0:O.id)||void 0,j=((ae=(U=s.groupData.groupTextImages[x])==null?void 0:U[0])==null?void 0:ae.id)||void 0,F=s.groupData.groupTextImageTexts[x]||"",B=((ue=s.groupData.groupTextVideos[x])==null?void 0:ue.length)>0?void 0:((H=(oe=s.groupData.groupLastFrames[x])==null?void 0:oe[0])==null?void 0:H.id)||void 0,Y=((G=(re=s.groupData.groupTextVideos[x])==null?void 0:re[0])==null?void 0:G.id)||void 0,D=s.groupData.groupTextVideoTexts[x]||"",Z=s.groupData.groupNames[x]||`组合 ${x+1}`;return{sticker_id:R,post_video_id:B,template_image_id:j,template_image_text:F,template_video_id:Y,template_video_text:D,group_name:Z}});const g={category:s.videoType,material_group:d};try{(await Sr(g)).code===0?ge.success("已保存组合配置"):ge.error("组合配置保存失败，请重试")}catch(h){ge.error(h)}},_=()=>{Er({category:s.videoType}).then(d=>{if(d.code===0){const k=d.data.material_group||[],g=d.data.materials||[],h={groupStickers:[],groupLastFrames:[],groupTextImages:[],groupTextVideos:[],groupTextImageTexts:[],groupTextVideoTexts:[]};h.groupNames=[];const x={};g.forEach(R=>{x[R.id]=R}),k.forEach((R,j)=>{if(R.group_name?h.groupNames[j]=R.group_name:h.groupNames[j]=`组合 ${j+1}`,R.sticker_id){const F=x[R.sticker_id];F&&(h.groupStickers[j]||(h.groupStickers[j]=[]),h.groupStickers[j].push({...F,showUrl:F.key_frame_url||F.file_url,_refreshTimestamp:Date.now()}))}if(R.post_video_id){const F=x[R.post_video_id];F&&(h.groupLastFrames[j]||(h.groupLastFrames[j]=[]),h.groupLastFrames[j].push({...F,showUrl:F.key_frame_url||F.file_url,_refreshTimestamp:Date.now()}))}if(R.template_image_id){const F=x[R.template_image_id];F&&(h.groupTextImages[j]||(h.groupTextImages[j]=[]),h.groupTextImages[j].push({...F,showUrl:F.key_frame_url||F.file_url,_refreshTimestamp:Date.now()}))}if(R.template_video_id){const F=x[R.template_video_id];F&&(h.groupTextVideos[j]||(h.groupTextVideos[j]=[]),h.groupTextVideos[j].push({...F,showUrl:F.key_frame_url||F.file_url,_refreshTimestamp:Date.now()}))}R.template_image_text&&(h.groupTextImageTexts[j]=R.template_image_text),R.template_video_text&&(h.groupTextVideoTexts[j]=R.template_video_text)}),a("update:groupData",h),ge.success("已载入组合配置")}else ge.error("组合配置载入失败，请重试")})},v=d=>s.groupData.groupStickers[d-1]||[],$=d=>s.groupData.groupLastFrames[d-1]||[],S=d=>s.groupData.groupTextImages[d-1]||[],m=d=>s.groupData.groupTextVideos[d-1]||[],r=(d,k)=>{a("selectGroupMaterial",{type:d,groupIndex:k})},T=(d,k)=>{a("uploadMaterial",{type:d,groupIndex:k})},b=(d,k)=>{const g={...s.groupData};g.groupTextImageTexts[d]=k,a("update:groupData",g)},C=(d,k)=>{const g={...s.groupData};g.groupTextVideoTexts[d]=k,a("update:groupData",g)};return me(()=>s.formData.groupCount,d=>{if(d>1&&(a("update:showGroupConfig",!0),!s.groupData.groupNames||s.groupData.groupNames.length<d)){const k={...s.groupData};k.groupNames||(k.groupNames=[]);for(let g=k.groupNames.length;g<d;g++)k.groupNames.push(`组合 ${g+1}`);a("update:groupData",k)}}),me(()=>s.checkedData.checkedNovel,d=>{var k,g;if(d&&d.length>0){const h=d[0].name;for(let x=0;x<s.formData.groupCount;x++)((k=s.groupData.groupTextImages[x])==null?void 0:k.length)>0&&(!s.groupData.groupTextImageTexts[x]||s.groupData.groupTextImageTexts[x]==="")&&b(x,h),((g=s.groupData.groupTextVideos[x])==null?void 0:g.length)>0&&(!s.groupData.groupTextVideoTexts[x]||s.groupData.groupTextVideoTexts[x]==="")&&C(x,h)}},{deep:!0,immediate:!0}),me(()=>s.groupData.groupTextImages,d=>{var k;if(s.checkedData.checkedNovel&&s.checkedData.checkedNovel.length>0){const g=s.checkedData.checkedNovel[0].name;for(let h=0;h<d.length;h++)((k=d[h])==null?void 0:k.length)>0&&(!s.groupData.groupTextImageTexts[h]||s.groupData.groupTextImageTexts[h]==="")&&b(h,g)}},{deep:!0}),me(()=>s.groupData.groupTextVideos,d=>{var k;if(s.checkedData.checkedNovel&&s.checkedData.checkedNovel.length>0){const g=s.checkedData.checkedNovel[0].name;for(let h=0;h<d.length;h++)((k=d[h])==null?void 0:k.length)>0&&(!s.groupData.groupTextVideoTexts[h]||s.groupData.groupTextVideoTexts[h]==="")&&C(h,g)}},{deep:!0}),(d,k)=>{const g=$o,h=oo;return e.formData.groupCount>1?(f(),I("div",{key:0,class:N(["main-section group-main-section",{"main-section-active":e.showGroupConfig}])},[l("div",{class:"main-header",onClick:c},[k[2]||(k[2]=l("h3",null,"组合",-1)),l("div",Tk,[e.showGroupConfig?(f(),I("span",xk,"−")):(f(),I("span",Fk,"+"))])]),l("div",{class:N(["main-content group-main-content",{hidden:!e.showGroupConfig}])},[l("div",{class:"group-config-actions"},[l("button",{class:"config-action-btn",onClick:y},"保存配置"),l("button",{class:"config-action-btn",onClick:_},"载入配置")]),l("div",Sk,[(f(!0),I(Ee,null,He(e.formData.groupCount,x=>{var R,j,F,B,Y,D,Z,Q;return f(),I("div",{key:x,class:"material-section"},[l("div",Ek,[t.value===x-1?(f(),I("div",$k,[l("input",{value:s.groupData.groupNames[x-1],onInput:P=>u(x-1,P.target.value),class:"group-name-input",placeholder:"请输入组合名称",onBlur:P=>p(x-1),onKeyup:_t(P=>p(x-1),["enter"]),ref_for:!0,ref:"groupNameInput"},null,40,Rk)])):(f(),I("span",Pk,[Ie(ie(s.groupData.groupNames[x-1]||`组合 ${x}`)+" ",1),l("i",{class:"edit-icon",onClick:Re(P=>i(x-1),["stop","prevent"]),title:"编辑组合名称"},[w(g,null,{default:V(()=>[w(n(cr))]),_:1})],8,Ok)]))]),l("div",Vk,[l("div",Lk,[k[6]||(k[6]=l("div",{class:"material-label"},"贴图",-1)),l("div",Bk,[(R=v(x))!=null&&R.length?(f(),I("div",{key:0,class:"material-selection-card",onClick:P=>r("stickers",x)},[l("div",jk,[l("i",Qk,[w(n(St))]),l("span",null,"已选 "+ie(v(x).length)+" 项贴图",1)])],8,Ak)):(j=S(x))!=null&&j.length?(f(),I("div",Hk,[l("div",Mk,[l("div",Uk," 已选择 "+ie(S(x).length)+" 项搜索框 ",1),l("div",{class:"continue-select-btn",onClick:P=>r("textImage",x)},[l("i",Nk,[w(n(Je))]),k[3]||(k[3]=l("span",null,"重新选择",-1))],8,zk)]),l("div",{class:"music-card-content",onClick:k[0]||(k[0]=P=>{P.stopPropagation()})},[l("div",Kk,[l("div",Dk,[k[4]||(k[4]=l("div",{class:"setting-label"},"内容",-1)),w(h,{"model-value":e.groupData.groupTextImageTexts[x-1],"onUpdate:modelValue":P=>b(x-1,P),placeholder:"请输入搜索框显示的文本",clearable:""},null,8,["model-value","onUpdate:modelValue"])])])])])):(f(),I("div",Xk,[l("div",{class:"select-btn",onClick:P=>r("stickers",x)},[l("i",Yk,[w(n(Je))]),k[5]||(k[5]=l("span",null,"选择贴图",-1))],8,Gk)])),l("div",{class:"upload-icon-btn",onClick:P=>{var O;return T((O=S(x))!=null&&O.length?"textImage":"stickers",x)},style:ye((F=v(x))!=null&&F.length||(B=S(x))!=null&&B.length?{cursor:"not-allowed",opacity:.6}:{})},[l("i",Wk,[w(n(st))])],12,qk)])]),l("div",Zk,[k[10]||(k[10]=l("div",{class:"material-label"},"尾帧",-1)),l("div",Jk,[(Y=$(x))!=null&&Y.length?(f(),I("div",{key:0,class:"material-selection-card",onClick:P=>r("lastFrames",x)},[l("div",tb,[l("i",ob,[w(n(St))]),l("span",null,"已选择 "+ie($(x).length)+" 条尾帧视频",1)])],8,eb)):(D=m(x))!=null&&D.length?(f(),I("div",sb,[l("div",lb,[l("div",ab," 已选择 "+ie(m(x).length)+" 项尾帧搜索框 ",1),l("div",{class:"continue-select-btn",onClick:P=>r("textVideo",x)},[l("i",ib,[w(n(Je))]),k[7]||(k[7]=l("span",null,"重新选择",-1))],8,nb)]),l("div",{class:"music-card-content",onClick:k[1]||(k[1]=P=>{P.stopPropagation()})},[l("div",rb,[l("div",cb,[k[8]||(k[8]=l("div",{class:"setting-label"},"内容",-1)),w(h,{"model-value":e.groupData.groupTextVideoTexts[x-1],"onUpdate:modelValue":P=>C(x-1,P),placeholder:"请输入搜索框显示的文本",clearable:""},null,8,["model-value","onUpdate:modelValue"])])])])])):(f(),I("div",ub,[l("div",{class:"select-btn",onClick:P=>r("lastFrames",x)},[l("i",fb,[w(n(Je))]),k[9]||(k[9]=l("span",null,"选择尾帧",-1))],8,db)])),l("div",{class:"upload-icon-btn",onClick:P=>{var O;return T((O=m(x))!=null&&O.length?"textVideo":"lastFrames",x)},style:ye((Z=$(x))!=null&&Z.length||(Q=m(x))!=null&&Q.length?{cursor:"not-allowed",opacity:.6}:{})},[l("i",pb,[w(n(st))])],12,vb)])])])])}),128))])],2)],2)):X("",!0)}}},Ii=ot(mb,[["__scopeId","data-v-b3b2a26d"]]),gb={class:"novel-select-container"},hb={class:"novel-select-area-wrapper"},yb={class:"select-btn"},kb={class:"el-icon"},bb={class:"el-icon"},Cb={class:"selection-content"},_b={class:"centered-content"},wb={class:"el-icon selection-icon"},Ib={key:0,class:"selection-text"},Tb={key:1,class:"selection-text"},xb={class:"el-icon"},Fb={__name:"NovelSelection",props:{checkedData:{type:Object,required:!0},isFromMaterialChecked:{type:Object,required:!0},tagValue:{type:Object,required:!0}},emits:["selectMaterial","uploadMaterial"],setup(e,{emit:o}){const t=o,s=()=>{t("selectMaterial","novel")},a=()=>{t("uploadMaterial","novel")};return(c,i)=>{const u=ho;return f(),I("div",gb,[w(u,{label:"",prop:"novel",class:"novel-label",style:{width:"100%"}},{default:V(()=>{var p,y,_;return[l("div",hb,[(p=e.checkedData.checkedNovel)!=null&&p.length?(f(),I("div",{key:1,class:"material-selection-card",onClick:s},[l("div",Cb,[l("div",_b,[l("i",wb,[w(n(St))]),e.isFromMaterialChecked.novel?(f(),I("span",Ib,"已选 "+ie((_=e.checkedData.checkedNovel[0])==null?void 0:_.name),1)):(f(),I("span",Tb," 已选标签: "+ie(e.tagValue.novelTags.map(v=>v.label).join("、")),1))])]),l("div",{class:"upload-icon-btn",onClick:Re(a,["stop"]),style:ye(e.checkedData.checkedNovel.length?{cursor:"not-allowed",opacity:.6}:{})},[l("i",xb,[w(n(st))])],4)])):(f(),I("div",{key:0,class:N(["material-selection",{"selected-state":(y=e.checkedData.checkedNovel)==null?void 0:y.length}]),onClick:s},[l("div",yb,[l("i",kb,[w(n(Je))]),i[0]||(i[0]=l("span",null,"选择小说",-1))]),l("div",{class:"upload-icon-btn",onClick:Re(a,["stop"])},[l("i",bb,[w(n(st))])])],2))])]}),_:1})])}}},Ti=ot(Fb,[["__scopeId","data-v-f17cd810"]]),Sb={class:"novel-select-container"},Eb={class:"novel-select-area-wrapper"},$b={class:"upload-icon-btn"},Rb={class:"el-icon"},Pb={key:1,class:"material-selection-card"},Ob={class:"selection-content"},Vb={class:"centered-content"},Lb={class:"el-icon selection-icon"},Bb={key:0,class:"selection-text"},Ab={class:"el-icon"},jb={__name:"ShortPlaySelection",props:{checkedData:{type:Object,required:!0},isFromMaterialChecked:{type:Object,required:!0},tagValue:{type:Object,required:!0}},emits:["selectMaterial","uploadMaterial"],setup(e,{emit:o}){const t=o,s=()=>{t("uploadMaterial","shortPlayVideo")};return(a,c)=>{const i=ho;return f(),I("div",Sb,[w(i,{label:"",prop:"novel",class:"novel-label",style:{width:"100%"}},{default:V(()=>{var u,p,y;return[l("div",Eb,[(u=e.checkedData.checkedShortPlay)!=null&&u.length?(f(),I("div",Pb,[l("div",Ob,[l("div",Vb,[l("i",Lb,[w(n(St))]),e.isFromMaterialChecked.shortPlay?(f(),I("span",Bb,"已选 "+ie((y=e.checkedData.checkedShortPlay[0])==null?void 0:y.name),1)):X("",!0)])]),l("div",{class:"upload-icon-btn",onClick:Re(s,["stop"])},[l("i",Ab,[w(n(st))])])])):(f(),I("div",{key:0,class:N(["material-selection",{"selected-state":(p=e.checkedData.checkedShortPlay)==null?void 0:p.length}])},[l("div",{class:"select-btn",onClick:Re(s,["stop"])},[l("div",$b,[l("i",Rb,[w(n(st))])]),c[0]||(c[0]=l("span",null,"上传短剧",-1))])],2))])]}),_:1})])}}},Qb=ot(jb,[["__scopeId","data-v-124223fb"]]),Hb={class:"dialog-content"},Mb={class:"main-content"},Ub={class:"left-side"},zb={class:"task-info-section"},Nb={class:"task-info-card"},Kb={class:"card-content"},Db={class:"main-collapse-icon"},Xb={key:0},Gb={key:1},Yb={key:0},qb={key:1,class:"empty-firstframe-tip"},Wb={key:1},Ma=4,Ua=6,Zb={__name:"index",props:{source:{type:String,default:"novel"}},setup(e){const o=so(),t="/api/",s=Be({taskName:"",fontFamily:"",novelFontSize:35,lineHeight:1.5,letterSpacing:0,paragraphSpacing:56,firstLineIndent:2,backgroundColor:"rgba(255, 255, 255, 0)",roundedCorners:!0,scrollStart:0,scrollDelay:0,scrollSpeed:2.5,volume:1,count:1,groupCount:0,firstFrameVideo:[],firstFrameKeepAudio:!0,selectedAudio:"",musicStartPosition:"首帧",pre_video_volume:1}),a=E({}),c=E([]),i=E(-1),u=E(-1),p=E(-1),y=E(-1),_=E(-1),v=E(-1),$=E(-1),S=E(-1),m=E(-1),r=M({get:()=>20*Math.log10(Math.max(1e-4,s.volume)),set:Qe=>{s.volume=Math.max(1e-4,Math.pow(10,Qe/20))}}),T=M({get:()=>20*Math.log10(Math.max(1e-4,s.pre_video_volume)),set:Qe=>{s.pre_video_volume=Math.max(1e-4,Math.pow(10,Qe/20))}}),b=Be({checkedBackgroundList:[],checkedFirstFrames:[],checkedMusic:[],checkedLastFrames:[],checkedStickers:[],checkedNovel:[],checkedTextImages:[],checkedTextVideos:[],checkedShortPlay:[],checkedShortPlayStickers:[],checkedShortPlayLastFrames:[]}),C=Be({groupStickers:[],groupLastFrames:[],groupTextImages:[],groupTextVideos:[],groupTextImageTexts:[],groupTextVideoTexts:[],groupNames:[]}),d=E(null),k=E(null),g=E(),h=Be({novelTags:[],firstFramesTags:[],backgroundTag:[],musicTag:[],stickersTags:[],textImageTags:[],lastFrameTag:[],textVideoTags:[],shortPlayTag:[],shortPlayStickersTag:[],shortPlayLastFrameTag:[]}),x=Be({novelComponentList:[],firstFramesComponentList:[],backgroundComponentList:[],musicComponentList:[],stickersComponentList:[],textImagesComponentList:[],lastFramesComponentList:[],textVideosComponentList:[],shortPlayComponentList:[],shortPlayStickersComponentList:[],shortPlayLastFramesComponentList:[]}),R=Be({novelActiveTab:"",firstFramesActiveTab:"",backgroundActiveTab:"",musicActiveTab:"",stickersActiveTab:"",textImagesActiveTab:"",lastFramesActiveTab:"",textVideosActiveTab:"",shortPlayActiveTab:"",shortPlayStickersActiveTab:"",shortPlayLastFramesActiveTab:""}),j=Be({novel:{start_date:"",end_date:""},firstFrames:{start_date:"",end_date:""},background:{start_date:"",end_date:""},music:{start_date:"",end_date:""},stickers:{start_date:"",end_date:""},textImage:{start_date:"",end_date:""},lastFrames:{start_date:"",end_date:""},textVideo:{start_date:"",end_date:""},shortPlay:{start_date:"",end_date:""},shortPlayStickers:{start_date:"",end_date:""},shortPlayLastFrames:{start_date:"",end_date:""}}),F=Be({novel:!0,firstFrames:!0,background:!0,music:!0,stickers:!0,textImage:!0,lastFrames:!0,textVideo:!0,shortPlay:!0,shortPlayStickers:!0,shortPlayLastFrames:!0}),B=E(!1),Y=E(!1),D=E(!1),Z=E(!0),Q=E(!1),P=E(""),O=E(""),U=E(null);Le(()=>{U.value&&Mo.setLoadConfigFn(U.value.loadSavedConfigs)});const ae=()=>{const Qe=localStorage.getItem("readFormDataMusicVolume");Qe&&(s.volume=JSON.parse(Qe))},ue=()=>{const Qe=JSON.parse(localStorage.getItem("titleTextInfo"));if(Qe){const bt={firstFrameVideo:Qe.firstFrameVideo.map(Ft=>({...Ft,background_color:ct(Ft.background_color),fill:ct(Ft.fill),stroke_fill:ct(Ft.stroke_fill)}))};Object.assign(s,bt)}};Le(async()=>{await kn({baseUrl:t,fontFamilyOptions:c,formData:s}),ae(),e.source===lt.NOVEL&&ue(),pe(),We.on("jumpToNovelTask",Qe=>{Qe.category==="ReadingSimu"&&pe()}),We.on("jumpToShortPlayTask",()=>{pe()})});const oe=M(()=>Mo.isGroupModeActive.value),H=E(""),{renderPreviewFirstFrameUrl:re,renderPreviewBackgroundUrl:G,renderPreviewLastFrameUrl:L,renderPreviewStickerUrl:ne,renderPreviewTextImageUrl:fe,renderPreviewTextVideoUrl:A,renderPreviewShortPlayUrl:K,renderPreviewShortPlayStickerUrl:J,renderPreviewShortPlayLastFrameUrl:ce,initializeTaskData:pe,renderPreviewBackgroundPosition:ve,renderPreviewBackgroundNeedMask:he,renderPreviewBackgroundTextFill:Pe,renderPreviewFirstFrameId:_e,renderPreviewBackgroundId:W,renderPreviewLastFrameId:Fe,renderPreviewStickerId:$e,renderPreviewTextImageId:be,renderPreviewTextVideoId:Ce,renderPreviewShortPlayId:te,renderPreviewShortPlayStickerId:ee,renderPreviewShortPlayLastFrameId:q}=Fu(s,b,i,u,p,v,C,P,O,$),{selectDialogVisible:z,dialogTitle:le,tabType:Ve,tagsObject:we,isGroupSelection:je,currentGroupIndex:mt,selectMaterial:$t,handleSelectGroupMaterial:Ut,getCheckedListByType:bo,getComponentListByType:Co,getActiveTabByType:ze,transferCheckedList:xe,handleCloseDialog:at}=Ru(s,b,h,j,x,R,F,re,_e,G,W,L,Fe,ne,$e,fe,be,A,Ce,K,te,J,ee,ce,q,i,p,u,y,_,v,$,ve,he,Pe,oe,C,g),qt=Qe=>{Qo(Qe,Oe=>{var bt;(bt=d.value)==null||bt.handleUploadProgress(Oe)})},{uploadLoading:Rt,uploadMaterial:Xe,handleSubmitFormRes:Qo,handleSubmitNovelRes:_o,propUploadTypeDisabled:wo,propUploadTypeChange:Wt}=$u(s,b,h,j,C,F,H,mt,oe,d,k,g,re,G,L,ne,fe,A,K,J,ce,_e,W,Fe,$e,be,Ce,te,ee,q,i,p,u,y,_,v,$,S,m,ve,he,Pe,e.source),Ho=()=>{Y.value=!0,D.value=!1,B.value=!1,Q.value=!1},fs=Qe=>{Object.assign(s,Qe)},Mo=Eu(s,b,h,j,C,F,P,O,We,c,x,R,ue,ae,e.source,a),jl=Mo.rules,Ql=Mo.createVideoDisabled,Hl=Mo.generateVideo,xi=[{label:"正片",value:"正片"},{label:"首帧",value:"首帧"}],Fi=M(()=>{var Qe,Oe,bt,Ft,Ze,vs,ps,Uo,zo,zt,Io,To,No,Ko,Do,Nl,Kl,Dl,Xl,Gl,Yl,ql;return{novelTags:[...((Qe=h.novelTags)==null?void 0:Qe.shared)||[],...((Oe=h.novelTags)==null?void 0:Oe.personal)||[]],firstFramesTags:[...((bt=h.firstFramesTags)==null?void 0:bt.shared)||[],...((Ft=h.firstFramesTags)==null?void 0:Ft.personal)||[]],backgroundTag:[...((Ze=h.backgroundTag)==null?void 0:Ze.shared)||[],...((vs=h.backgroundTag)==null?void 0:vs.personal)||[]],musicTag:[...((ps=h.musicTag)==null?void 0:ps.shared)||[],...((Uo=h.musicTag)==null?void 0:Uo.personal)||[]],stickersTags:[...((zo=h.stickersTags)==null?void 0:zo.shared)||[],...((zt=h.stickersTags)==null?void 0:zt.personal)||[]],textImageTags:[...((Io=h.textImageTags)==null?void 0:Io.shared)||[],...((To=h.textImageTags)==null?void 0:To.personal)||[]],lastFrameTag:[...((No=h.lastFrameTag)==null?void 0:No.shared)||[],...((Ko=h.lastFrameTag)==null?void 0:Ko.personal)||[]],textVideoTags:[...((Do=h.textVideoTags)==null?void 0:Do.shared)||[],...((Nl=h.textVideoTags)==null?void 0:Nl.personal)||[]],shortPlayTag:[...((Kl=h.shortPlayTag)==null?void 0:Kl.shared)||[],...((Dl=h.shortPlayTag)==null?void 0:Dl.personal)||[]],shortPlayStickersTag:[...((Xl=h.shortPlayStickersTag)==null?void 0:Xl.shared)||[],...((Gl=h.shortPlayStickersTag)==null?void 0:Gl.personal)||[]],shortPlayLastFrameTag:[...((Yl=h.shortPlayLastFrameTag)==null?void 0:Yl.shared)||[],...((ql=h.shortPlayLastFrameTag)==null?void 0:ql.personal)||[]]}});Pu(b,{currentFirstFrameIndex:i,currentLastFrameIndex:u,currentBackgroundIndex:p,currentStickerIndex:y,currentTextImageIndex:_,currentTextVideoIndex:v,currentShortPlayStickerIndex:$},{mainSearchBoxText:P,endSearchBoxText:O}),Lt(()=>{o.setTaskGenerateParams({})});const Si=()=>{Y.value=!Y.value,Y.value&&(B.value=!1,D.value=Q.value=!1)},Ei=(Qe=[])=>Qe.map(Oe=>({font_id:Oe.font_id,font_size:Oe.font_size,title_color_random:Oe.firstFrameColorMode,fill:dt(Oe.fill),stroke_fill:dt(Oe.stroke_fill),stroke_width:Oe.stroke_width,background_color:dt(Oe.background_color),y:Oe.y})),$i=()=>{const Qe={firstFrameVideo:Ei(s.firstFrameVideo)};localStorage.setItem("titleTextInfo",JSON.stringify(Qe)),ge.success("配置已保存")},Ml=(Qe,Oe)=>{const bt={firstFrame:{data:b.checkedFirstFrames,currentIndex:i,url:re,id:_e},lastFrame:{data:b.checkedLastFrames,currentIndex:u,url:L,id:Fe},background:{data:b.checkedBackgroundList,currentIndex:p,url:G,id:W,extraUpdate:To=>{var No,Ko,Do;Object.assign(ve,(No=b.checkedBackgroundList[To])==null?void 0:No.border),he.value=(Ko=b.checkedBackgroundList[To])==null?void 0:Ko.need_mask,Pe.value=(Do=b.checkedBackgroundList[To])==null?void 0:Do.text_fill}},stickers:{data:b.checkedStickers,currentIndex:y,url:ne,id:$e},textImage:{data:b.checkedTextImages,currentIndex:_,url:fe,id:be},textVideo:{data:b.checkedTextVideos,currentIndex:v,url:A,id:Ce},shortPlayStickers:{data:b.checkedShortPlayStickers,currentIndex:$,url:J,id:ee}},{data:Ft,currentIndex:Ze,url:vs,id:ps,extraUpdate:Uo}=bt[Qe],zo=Ft.length-1,zt=Oe==="next"?Math.min(Ze.value+1,zo):Math.max(Ze.value-1,0);if(zt===Ze.value||zt<0||zt>zo)return;Ze.value=zt;const Io=Ft[zt];vs.value=Io.key_frame_url||Io.file_url,ps.value=Io.id,Uo&&Uo(zt)},Ul=Qe=>Ml(Qe,"prev"),zl=Qe=>Ml(Qe,"next");me(()=>s.groupCount,Qe=>{Qe>1&&(Z.value=!0)});const Ri=Qe=>{Object.assign(C,Qe)};return Le(()=>{We.on("updateBackgroundPreview",Qe=>{if(b.checkedBackgroundList&&b.checkedBackgroundList.some(Oe=>Oe.id===Qe.id)){const Oe=b.checkedBackgroundList.findIndex(bt=>bt.id===Qe.id);Oe!==-1&&(b.checkedBackgroundList[Oe]={...Qe})}})}),(Qe,Oe)=>{const bt=ls,Ft=nn;return f(),se(Ft,{class:"create-task-card"},{default:V(()=>[l("div",Hb,[l("div",Mb,[l("div",Ub,[w(bt,{model:s,"label-width":"120px",rules:n(jl),ref_key:"ruleFormRef",ref:g,onSubmit:Oe[9]||(Oe[9]=Re(()=>{},["prevent"])),onKeydown:Oe[10]||(Oe[10]=_t(Re(()=>{},["prevent"]),["enter"])),"require-asterisk-position":"right"},{default:V(()=>[w(wi,{"form-data":s,source:e.source,"onUpdate:formData":fs},null,8,["form-data","source"]),l("div",zb,[l("div",Nb,[Oe[15]||(Oe[15]=l("div",{class:"card-header"},[l("div",{class:"card-title"},"视频配置")],-1)),l("div",Kb,[e.source===n(lt).NOVEL?(f(),se(Ti,{key:0,checkedData:b,isFromMaterialChecked:F,tagValue:h,onSelectMaterial:n($t),onUploadMaterial:n(Xe)},null,8,["checkedData","isFromMaterialChecked","tagValue","onSelectMaterial","onUploadMaterial"])):X("",!0),e.source===n(lt).SHORT_PLAY?(f(),se(Qb,{key:1,checkedData:b,isFromMaterialChecked:F,tagValue:h,onSelectMaterial:n($t),onUploadMaterial:n(Xe)},null,8,["checkedData","isFromMaterialChecked","tagValue","onSelectMaterial","onUploadMaterial"])):X("",!0),e.source===n(lt).NOVEL?(f(),se(sd,{key:2,"form-data":s,"font-family-options":c.value,"show-text-config":B.value,"onUpdate:formData":fs,"onUpdate:showTextConfig":Oe[0]||(Oe[0]=Ze=>B.value=Ze),ref_key:"mainContentRef",ref:U},null,8,["form-data","font-family-options","show-text-config"])):X("",!0),e.source===n(lt).NOVEL?(f(),se(Ii,{key:3,videoType:"ReadingSimu",formData:s,groupData:C,showGroupConfig:Z.value,checkedData:b,"onUpdate:showGroupConfig":Oe[1]||(Oe[1]=Ze=>Z.value=Ze),"onUpdate:groupData":Ri,onSelectGroupMaterial:n(Ut),onUploadMaterial:n(Xe)},null,8,["formData","groupData","showGroupConfig","checkedData","onSelectGroupMaterial","onUploadMaterial"])):X("",!0),w(Ik,{readFormData:s,checkedData:b,displayTags:Fi.value,rules:n(jl),musicStartPositionOptions:xi,musicDbValue:r.value,mainSearchBoxText:P.value,endSearchBoxText:O.value,showMaterialConfig:D.value,isFromMaterialChecked:F,preVideoDbValue:T.value,source:e.source,"onUpdate:showMaterialConfig":Oe[2]||(Oe[2]=Ze=>D.value=Ze),"onUpdate:musicDbValue":Oe[3]||(Oe[3]=Ze=>r.value=Ze),"onUpdate:musicStartPosition":Oe[4]||(Oe[4]=Ze=>s.musicStartPosition=Ze),"onUpdate:mainSearchBoxText":Oe[5]||(Oe[5]=Ze=>P.value=Ze),"onUpdate:endSearchBoxText":Oe[6]||(Oe[6]=Ze=>O.value=Ze),onSelectMaterial:n($t),onUploadMaterial:n(Xe),onOpenTitleSettings:Ho,"onUpdate:preVideoDbValue":Oe[7]||(Oe[7]=Ze=>T.value=Ze)},null,8,["readFormData","checkedData","displayTags","rules","musicDbValue","mainSearchBoxText","endSearchBoxText","showMaterialConfig","isFromMaterialChecked","preVideoDbValue","source","onSelectMaterial","onUploadMaterial"]),l("div",{class:N(["main-section",{"main-section-active":Y.value}])},[l("div",{class:"main-header",onClick:Si},[Oe[13]||(Oe[13]=l("h3",null,"标题",-1)),l("div",Db,[Y.value?(f(),I("span",Xb,"−")):(f(),I("span",Gb,"+"))])]),l("div",{class:N(["main-content",{hidden:!Y.value}])},[e.source===n(lt).NOVEL?(f(),I("div",Yb,[l("div",{class:"config-actions"},[l("button",{class:"config-action-btn",onClick:$i}," 保存配置 ")]),b.checkedFirstFrames.length?(f(),se(ua,{key:0,formData:s,checkedData:b,fontFamilyOptions:c.value,source:e.source,"onUpdate:formData":fs},null,8,["formData","checkedData","fontFamilyOptions","source"])):(f(),I("div",qb,Oe[14]||(Oe[14]=[l("div",{class:"no-firstframe-message"},' 请先在"素材"中选择首帧视频，才能添加首帧标题 ',-1)])))])):e.source===n(lt).SHORT_PLAY?(f(),I("div",Wb,[w(ua,{formData:s,checkedData:b,fontFamilyOptions:c.value,source:e.source,"onUpdate:formData":fs,"onUpdate:selectedVideoNameInfo":Oe[8]||(Oe[8]=Ze=>a.value=Ze)},null,8,["formData","checkedData","fontFamilyOptions","source"])])):X("",!0)],2)],2)])])])]),_:1},8,["model","rules"])]),e.source===n(lt).NOVEL?(f(),se(Qc,{key:0,formData:s,checkedData:b,fontFamilyOptions:c.value,renderPreviewFirstFrameUrl:n(re),renderPreviewBackgroundUrl:n(G),renderPreviewLastFrameUrl:n(L),renderPreviewStickerUrl:n(ne),renderPreviewTextImageUrl:n(fe),renderPreviewTextVideoUrl:n(A),renderPreviewBackgroundPosition:n(ve),renderPreviewBackgroundNeedMask:n(he),renderPreviewBackgroundTextFill:n(Pe),currentFirstFrameIndex:i.value,currentLastFrameIndex:u.value,currentBackgroundIndex:p.value,currentTextVideoIndex:v.value,createVideoDisabled:n(Ql),videoFontZoom:Ma,firstAndLastVideoZoom:Ua,count:s.count,groupCount:s.groupCount,onSwitchToPrevious:Ul,onSwitchToNext:zl,onStopResize:Qe.stopResize,onGenerateVideo:Oe[11]||(Oe[11]=Ze=>n(Hl)(g.value))},null,8,["formData","checkedData","fontFamilyOptions","renderPreviewFirstFrameUrl","renderPreviewBackgroundUrl","renderPreviewLastFrameUrl","renderPreviewStickerUrl","renderPreviewTextImageUrl","renderPreviewTextVideoUrl","renderPreviewBackgroundPosition","renderPreviewBackgroundNeedMask","renderPreviewBackgroundTextFill","currentFirstFrameIndex","currentLastFrameIndex","currentBackgroundIndex","currentTextVideoIndex","createVideoDisabled","count","groupCount","onStopResize"])):X("",!0),e.source===n(lt).SHORT_PLAY?(f(),se(tu,{key:1,formData:s,checkedData:b,fontFamilyOptions:c.value,renderPreviewShortPlayLastFrameUrl:n(ce),createVideoDisabled:n(Ql),videoFontZoom:Ma,firstAndLastVideoZoom:Ua,count:s.count,selectedVideoNameInfo:a.value,renderPreviewShortPlayStickerUrl:n(J),currentShortPlayStickerIndex:$.value,renderPreviewShortPlayUrl:n(K),onSwitchToPrevious:Ul,onSwitchToNext:zl,onStopResize:Qe.stopResize,onGenerateVideo:Oe[12]||(Oe[12]=Ze=>n(Hl)(g.value))},null,8,["formData","checkedData","fontFamilyOptions","renderPreviewShortPlayLastFrameUrl","createVideoDisabled","count","selectedVideoNameInfo","renderPreviewShortPlayStickerUrl","currentShortPlayStickerIndex","renderPreviewShortPlayUrl","onStopResize"])):X("",!0)])]),n(z)?(f(),se(n(_i),{key:0,ref:"comSelectDialogRef",title:n(le),tabType:n(Ve),count:n(je)?1:s.count,propCheckedList:n(bo)(n(Ve)),propComponentList:n(Co)(n(Ve)),propTagsObject:n(we),propActiveTabType:n(ze)(n(Ve)),onSubmit:n(xe),onCloseDialog:n(at),isFromReading:!0,isGroupSelection:n(je)},null,8,["title","tabType","count","propCheckedList","propComponentList","propTagsObject","propActiveTabType","onSubmit","onCloseDialog","isGroupSelection"])):X("",!0),w(n(Bl),{ref_key:"createVideoRef",ref:d,onSubmitForm:qt,"v-loading":n(Rt),propUploadTypeChange:n(Wt),propUploadTypeDisabled:n(wo)},null,8,["v-loading","propUploadTypeChange","propUploadTypeDisabled"]),w(n(Ll),{ref_key:"createNovelRef",ref:k,onSubmitForm:n(_o),"v-loading":n(Rt)},null,8,["onSubmitForm","v-loading"])]),_:1})}}},za=ot(Zb,[["__scopeId","data-v-253a8c07"]]);function Jb(e,o,t,s,a,c,i,u,p,y,_){const v=so(),$=E(""),S=E(""),m=E(""),r=E(""),T=E(""),b=E(""),C=E(""),d=E(""),k=E(""),g=E(""),h=E(""),x=E("");function R(F){const B={shared:[],personal:[]};return F.forEach(Y=>{const D={value:Y.id.toString(),label:Y.name,type:1,parent_id:null};Y.is_public?B.shared.push(D):B.personal.push(D)}),B}return{renderPreviewFirstFrameUrl:$,renderPreviewVideoUrl:S,renderPreviewLastFrameUrl:m,renderPreviewStickerUrl:r,renderPreviewTextImageUrl:T,renderPreviewTextVideoUrl:b,initializeTaskData:()=>{var P,O,U,ae,ue,oe,H,re,G,L,ne,fe,A,K,J,ce,pe,ve,he,Pe,_e;const{taskGenerateParams:F}=v;if(!Object.keys(F).length||F.category!=="Relaxation")return;e.taskName=F.name||"",e.fontFamily=F.novel.font_id,e.novelFontSize=F.novel.font_size,e.novelStrokeWidth=F.novel.stroke_width,e.novelColorMode=F.novel.title_color_random,e.novelForegroundColor=ct(F.novel.fill),e.novelBackgroundColor=ct(F.novel.background_color),e.novelStrokeColor=ct(F.novel.stroke_fill),e.novelTopMargin=F.novel.y,e.novelVolume=F.novel.volume,e.volume=((P=F.background_music)==null?void 0:P.volume)||.5,e.count=F.generate_count,e.groupCount=F.group_count||0,e.pre_video_volume=F.pre_video.volume||.5,o.checkedNovel=F.materials.filter(W=>W.category==="小说"),o.checkedFirstFrames=F.materials.filter(W=>W.category==="首帧视频"),o.checkedTopVideo=(O=F.top_main_video.id_list)==null?void 0:O.map(W=>{const Fe=F.materials.find($e=>$e.id===W);return Fe?{...Fe}:null}).filter(Boolean);const B=F.materials.filter(W=>W.category==="背景音乐"),Y=B==null?void 0:B.map(W=>({id:W.id,is_public:W.is_public,name:W.name,file_id:W.file_id,file_url:W.file_url,duration:W.duration,tags:W.tags,create_time:W.create_time}));o.checkedMusic=Y,e.groupCount===0&&(o.checkedStickers=F.materials.filter(W=>W.category==="贴片"),o.checkedLastFrames=F.materials.filter(W=>W.category==="尾帧视频"),o.checkedTextImages=F.materials.filter(W=>W.category==="模板图片"),o.checkedTextVideos=F.materials.filter(W=>W.category==="模板视频"),y.value=((U=F.template_image)==null?void 0:U.text)||"",_.value=((ae=F.template_video)==null?void 0:ae.text)||""),o.checkedVideo=F.materials.filter(W=>W.category==="解压视频"),o.checkedVideo=(ue=F.main_video.id_list)==null?void 0:ue.map(W=>{const Fe=F.materials.find($e=>$e.id===W);return Fe?{...Fe}:null}).filter(Boolean),e.firstFrameVideo=F.pre_video_titles.map(W=>({font_id:W.font_id,text:W.text??"",font_size:W.font_size,stroke_width:W.stroke_width,fill:ct(W.fill),background_color:ct(W.background_color),stroke_fill:ct(W.stroke_fill),y:W.y,firstFrameColorMode:W.title_color_random})),e.fixedTitle=F.main_titles.map(W=>({font_id:W.font_id,text:W.text??"",font_size:W.font_size,stroke_width:W.stroke_width,fill:ct(W.fill),background_color:ct(W.background_color),stroke_fill:ct(W.stroke_fill),y:W.y,fixTitleColorMode:W.title_color_random})),e.musicStartPosition=(oe=F.background_music)==null?void 0:oe.start_position,$.value=o.checkedFirstFrames&&((H=o.checkedFirstFrames[0])==null?void 0:H.key_frame_url)||"",S.value=o.checkedVideo&&((re=o.checkedVideo[0])==null?void 0:re.key_frame_url)||"",m.value=o.checkedLastFrames&&((G=o.checkedLastFrames[0])==null?void 0:G.key_frame_url)||"",r.value=o.checkedStickers&&((L=o.checkedStickers[0])==null?void 0:L.file_url)||"",T.value=o.checkedTextImages&&((ne=o.checkedTextImages[0])==null?void 0:ne.file_url)||"",b.value=o.checkedTextVideos&&((fe=o.checkedTextVideos[0])==null?void 0:fe.key_frame_url)||"",C.value=o.checkedFirstFrames&&((A=o.checkedFirstFrames[0])==null?void 0:A.id)||0,d.value=o.checkedVideo&&((K=o.checkedVideo[0])==null?void 0:K.id)||0,k.value=o.checkedLastFrames&&((J=o.checkedLastFrames[0])==null?void 0:J.id)||0,g.value=o.checkedStickers&&((ce=o.checkedStickers[0])==null?void 0:ce.id)||0,h.value=o.checkedTextImages&&((pe=o.checkedTextImages[0])==null?void 0:pe.id)||0,x.value=o.checkedTextVideos&&((ve=o.checkedTextVideos[0])==null?void 0:ve.id)||0;const D=(he=F.tags)==null?void 0:he.filter(W=>W.category==="解压视频"),Z=R(D);t.unzipVideoTag=Z,s.video.start_date=((Pe=F.main_video)==null?void 0:Pe.start_date)||"",s.video.end_date=((_e=F.main_video)==null?void 0:_e.end_date)||"",o.checkedFirstFrames.length&&(a.value=0),o.checkedVideo.length&&(c.value=0),o.checkedTextVideos.length&&(i.value=0),o.checkedLastFrames.length&&(u.value=0);const Q={};F.materials.forEach(W=>{Q[W.id]=W}),e.groupCount>0?(p.groupStickers=F.material_group.map(W=>{if(W.sticker_id===void 0||W.sticker_id===null)return[];{const Fe=Q[W.sticker_id];return Fe?[Fe]:[]}}),p.groupLastFrames=F.material_group.map(W=>{if(W.post_video_id===void 0||W.post_video_id===null)return[];{const Fe=Q[W.post_video_id];return Fe?[Fe]:[]}}),p.groupTextImages=F.material_group.map(W=>{if(W.template_image_id===void 0||W.template_image_id===null)return[];{const Fe=Q[W.template_image_id];return Fe?[Fe]:[]}}),p.groupTextVideos=F.material_group.map(W=>{if(W.template_video_id===void 0||W.template_video_id===null)return[];{const Fe=Q[W.template_video_id];return Fe?[Fe]:[]}}),p.groupTextImageTexts=F.material_group.map(W=>W.template_image_text||""),p.groupTextVideoTexts=F.material_group.map(W=>W.template_video_text||""),p.groupNames=F.material_group.map((W,Fe)=>W.group_name||`组合 ${Fe+1}`),o.checkedStickers=[],o.checkedLastFrames=[],o.checkedTextImages=[],o.checkedTextVideos=[],y.value="",_.value=""):(p.groupStickers=[],p.groupLastFrames=[],p.groupTextImages=[],p.groupTextVideos=[],p.groupTextImageTexts=[],p.groupTextVideoTexts=[],p.groupNames=[])},renderPreviewFirstFrameId:C,renderPreviewVideoId:d,renderPreviewLastFrameId:k,renderPreviewStickerId:g,renderPreviewTextImageId:h,renderPreviewTextVideoId:x}}function eC(e,o,t,s,a,c,i,u,p,y,_,v,$,S){const m=E(!1);let r=null;const T=B=>{r=B},b=(B,Y,D)=>{var Z;(Z=o.checkedVideo)!=null&&Z.length?D():D(new Error("请选择解压视频"))},C=Be({taskName:[{required:!0,message:"任务名称必填",trigger:"blur"}],fontFamily:[{required:!0,message:"请选择字体",trigger:"change"}],novelFontSize:[{required:!0,trigger:"change"}],novelForegroundColor:[{required:!0,trigger:"change"}],count:[{required:!0,trigger:"change"}],video:[{validator:b,trigger:"change"}]}),d=B=>a.groupStickers[B-1]||[],k=B=>a.groupLastFrames[B-1]||[],g=B=>a.groupTextImages[B-1]||[],h=B=>a.groupTextVideos[B-1]||[],x=M(()=>e.groupCount===2||e.groupCount===3),R=()=>{const B=[];if(e.taskName.trim()||B.push("请输入任务名称"),o.checkedNovel.length||B.push("请选择小说"),o.checkedVideo.length||B.push("请选择解压视频"),e.groupCount>1)for(let Y=1;Y<=e.groupCount;Y++){const D=d(Y),Z=g(Y),Q=k(Y),P=h(Y),O=D.length>0||Z.length>0,U=Q.length>0||P.length>0;e.groupCount===2&&(O||B.push(`组合${Y}请选择贴图`),U||B.push(`组合${Y}请选择尾帧`)),e.groupCount===3&&(O||B.push(`组合${Y}请选择贴图`),U||B.push(`组合${Y}请选择尾帧`))}return B},j=async B=>{if(!B)return;const Y=R();if(Y.length>0){ge.error(Y.join("、"));return}const D=e.volume;localStorage.setItem("relaxFormDataMusicVolume",JSON.stringify(D)),await B.validate(async(Z,Q)=>{var P,O;if(Z){m.value=!0;const U=oe=>{var H,re;return[...((H=oe==null?void 0:oe.shared)==null?void 0:H.map(G=>parseInt(G.value)))||[],...((re=oe==null?void 0:oe.personal)==null?void 0:re.map(G=>parseInt(G.value)))||[]]};let ae=[];e.groupCount>1&&(ae=Array.from({length:e.groupCount},(oe,H)=>{var G,L,ne,fe,A,K,J,ce,pe;const re=((G=a.groupNames)==null?void 0:G[H])||`组合 ${H+1}`;return{sticker_id:((ne=(L=a.groupStickers[H])==null?void 0:L[0])==null?void 0:ne.id)||void 0,post_video_id:((A=(fe=a.groupLastFrames[H])==null?void 0:fe[0])==null?void 0:A.id)||void 0,template_image_id:((J=(K=a.groupTextImages[H])==null?void 0:K[0])==null?void 0:J.id)||void 0,template_image_text:a.groupTextImageTexts[H]||"",template_video_id:((pe=(ce=a.groupTextVideos[H])==null?void 0:ce[0])==null?void 0:pe.id)||void 0,template_video_text:a.groupTextVideoTexts[H]||"",group_name:re}}));const ue={name:e.taskName,novel:{text_id:(P=o.checkedNovel[0])==null?void 0:P.id,audio_file_id:(O=o.checkedNovel[0])==null?void 0:O.audio_id,volume:e.novelVolume,font_id:e.fontFamily,font_size:e.novelFontSize,stroke_width:e.novelStrokeWidth,title_color_random:e.novelColorMode,fill:dt(e.novelForegroundColor),background_color:dt(e.novelBackgroundColor),stroke_fill:dt(e.novelStrokeColor),y:e.novelTopMargin},generate_count:e.count,group_count:e.groupCount,main_video:{id_list:o.checkedVideo.map(oe=>oe.id),tag_id_list:c.video?[]:U(t.unzipVideoTag),start_date:s.video.start_date||"",end_date:s.video.end_date||""},top_main_video:{id_list:o.checkedTopVideo.map(oe=>oe.id),tag_id_list:c.topVideo?[]:U(t.topVideoTags),start_date:s.topVideo.start_date||"",end_date:s.topVideo.end_date||""},main_titles:e.fixedTitle.map(oe=>({text:oe.text||"",font_id:oe.font_id,font_size:oe.font_size,stroke_width:oe.stroke_width,y:oe.y,fill:dt(oe.fill),background_color:dt(oe.background_color),stroke_fill:dt(oe.stroke_fill),title_color_random:oe.fixTitleColorMode})),background_music:{id_list:o.checkedMusic.map(oe=>oe.id),start_position:e.musicStartPosition,volume:e.volume,tag_id_list:c.music?[]:U(t.musicTags),start_date:s.music.start_date||"",end_date:s.music.end_date||""},sticker:{id_list:x.value?[]:o.checkedStickers.map(oe=>oe.id),tag_id_list:x.value?[]:c.stickers?[]:U(t.stickersTags),start_date:x.value?"":s.stickers.start_date||"",end_date:x.value?"":s.stickers.end_date||""},pre_video:{id_list:o.checkedFirstFrames.map(oe=>oe.id),tag_id_list:c.firstFrames?[]:U(t.firstFramesTags),start_date:s.firstFrames.start_date||"",end_date:s.firstFrames.end_date||"",volume:e.pre_video_volume},pre_video_titles:o.checkedFirstFrames.length?e.firstFrameVideo.map(oe=>({text:oe.text||"",font_id:oe.font_id,font_size:oe.font_size,stroke_width:oe.stroke_width,fill:dt(oe.fill),background_color:dt(oe.background_color),stroke_fill:dt(oe.stroke_fill),y:oe.y,title_color_random:oe.firstFrameColorMode})):[],post_video:{id_list:x.value?[]:o.checkedLastFrames.map(oe=>oe.id),tag_id_list:x.value?[]:c.lastFrames?[]:U(t.lastFrameTags),start_date:x.value?"":s.lastFrames.start_date||"",end_date:x.value?"":s.lastFrames.end_date||""},template_image:{id_list:x.value?[]:o.checkedTextImages.map(oe=>oe.id),tag_id_list:x.value?[]:c.textImage?[]:U(t.textImageTags),text:i.value,start_date:x.value?"":s.textImage.start_date||"",end_date:x.value?"":s.textImage.end_date||""},template_video:{id_list:x.value?[]:o.checkedTextVideos.map(oe=>oe.id),tag_id_list:x.value?[]:c.textVideo?[]:U(t.textVideoTags),text:u.value,start_date:x.value?"":s.textVideo.start_date||"",end_date:x.value?"":s.textVideo.end_date||""},material_group:ae};try{const oe=await $r(ue);if(oe.code===0)ge.success("已加入任务列表"),B.resetFields(),F(),p.emit("jumpToHistoryTask"),p.emit("refreshHistoryList"),m.value=!1;else throw oe.code===10020?ge.error(oe.message):ge.error("视频生成失败，请重试"),m.value=!1,new Error(oe.message)}catch(oe){console.error(oe),m.value=!1}}else ge.error("表单信息不完整")})},F=()=>{var Y;p.emit("resetNovelAllChecked"),Object.assign(e,{taskName:"",fontFamily:((Y=y.value.find(D=>D.name.split(".").slice(0,-1).join(".")==="方正黑体简体"))==null?void 0:Y.id)||y.value[0].id,novelFontSize:35,lineHeight:1.5,scrollStart:0,novelStrokeWidth:2,novelColorMode:!1,novelForegroundColor:"rgba(255, 255, 255, 1)",novelBackgroundColor:"rgba(255, 255, 0, 1)",novelStrokeColor:"rgba(0, 0, 0, 1)",novelTopMargin:.7,novelVolume:1,count:1,groupCount:0,firstFrameVideo:[],firstFrameKeepAudio:!0,selectedAudio:"",musicStartPosition:"首帧",fixedTitle:[],previewUnzipVideoList:[],template:"",volume:1,pre_video_volume:1});for(const D in o)Object.prototype.hasOwnProperty.call(o,D)&&(o[D]=[]);for(const D in t)Object.prototype.hasOwnProperty.call(t,D)&&(t[D]={shared:[],personal:[]});for(const D in s)s[D].start_date="",s[D].end_date="";for(const D in _)_[D]=[];for(const D in v)v[D]="";for(const D in c)c[D]=!0;for(const D in a)a[D]=[];const B=document.getElementById("srtPreview");B&&(B.innerHTML=""),$(),S(),r&&r()};return{rules:C,validateVideo:b,validateAllRequiredFields:R,generateVideo:j,createVideoDisabled:m,isGroupModeActive:x,getGroupSelectedStickers:d,getGroupSelectedLastFrames:k,getGroupSelectedTextImages:g,getGroupSelectedTextVideos:h,resetAll:F,setLoadConfigFn:T}}function tC(e,o,t,s,a,c,i,u,p,y,_,v,$,S,m,r,T,b,C,d,k,g,h,x,R,j,F,B,Y,D){const Z=E(!1),Q=E("videoUpload"),P=E(!1),O={video:"解压视频",background:"背景图片",novel:"小说",firstFrames:"首帧视频",lastFrames:"尾帧视频",stickers:"贴片",music:"背景音乐",textImage:"模板图片",textVideo:"模板视频"},U=A=>O[A]||null,ae={};for(const A in O){const K=O[A];ae[K]=A}const ue=A=>A==="贴片"?"stickers":ae[A]||null,oe=(A,K)=>{var ve,he,Pe,_e,W,Fe,$e,be,Ce,te,ee;let J,ce;if(typeof A=="object"&&A!==null)J=A.type,ce=A.groupIndex;else if(J=A,p.value&&(J==="stickers"||J==="lastFrames"||J==="textImage"||J==="textVideo")){ge.warning(`组合模式下，请在各个组合中上传${J==="stickers"||J==="textImage"?"贴图":"尾帧"}`);return}if(typeof ce<"u"){const q=ce-1;if(J==="stickers"||J==="textImage"){if((ve=a.groupStickers[q])!=null&&ve.length||(he=a.groupTextImages[q])!=null&&he.length){ge.warning(`组合${ce}的贴图数量已达上限`);return}}else if((J==="lastFrames"||J==="textVideo")&&((Pe=a.groupLastFrames[q])!=null&&Pe.length||(_e=a.groupTextVideos[q])!=null&&_e.length)){ge.warning(`组合${ce}的尾帧数量已达上限`);return}u.value=ce}else{const q={novel:o.checkedNovel.length,firstFrames:e.count===((W=o.checkedFirstFrames)==null?void 0:W.length),lastFrames:e.count===((Fe=o.checkedLastFrames)==null?void 0:Fe.length),music:e.count===(($e=o.checkedMusic)==null?void 0:$e.length),textImage:e.count===((be=o.checkedTextImages)==null?void 0:be.length),textVideo:e.count===((Ce=o.checkedTextVideos)==null?void 0:Ce.length),video:e.count*10===((te=o.checkedVideo)==null?void 0:te.length),stickers:e.count===((ee=o.checkedStickers)==null?void 0:ee.length)};if(K){if(o.checkedTopVideo.length===10)return}else if(q[J])return;u.value=0}i.value=J;let pe={type:J,title:""};if(J=="novel"){if(o.checkedNovel.length)return;pe.title="添加小说",_.value.init(pe,!0,[],U(J))}else pe.title=K?"添加置顶视频":`添加${O[J]}`,y.value.init(pe,!0,U(J),K?10-o.checkedTopVideo.length:H(J),!1);K&&(Q.value="topVideoUpload")},H=A=>{const K={video:"checkedVideo",topVideo:"checkedTopVideo",firstFrames:"checkedFirstFrames",lastFrames:"checkedLastFrames",music:"checkedMusic",textImage:"checkedTextImages",textVideo:"checkedTextVideos",stickers:"checkedStickers"};let J;return A==="video"?J=e.count*10-o[K[A]].length:J=e.count-o[K[A]].length,u.value>0?1:J},re=(A,K)=>{let J;J=K?A.data.list:[A.data];const ce={novel:{dataKey:"checkedNovel",extraUpdate:()=>{}},firstFrames:{dataKey:"checkedFirstFrames",indexRef:R,urlRef:$,idRef:C},lastFrames:{dataKey:"checkedLastFrames",indexRef:F,urlRef:m,idRef:k},stickers:{dataKey:"checkedStickers",indexRef:B,urlRef:r,idRef:g},music:{dataKey:"checkedMusic"},video:{dataKey:"checkedVideo",indexRef:j,urlRef:S,idRef:d},topVideo:{dataKey:"checkedTopVideo"},textImage:{dataKey:"checkedTextImages",indexRef:Y,urlRef:T,idRef:h},textVideo:{dataKey:"checkedTextVideos",indexRef:D,urlRef:b,idRef:x}},pe=ue(K);if(u.value>0){const ve=u.value-1;pe==="stickers"?(a.groupStickers[ve]||(a.groupStickers[ve]=[]),a.groupStickers[ve]=[...a.groupStickers[ve],...J]):pe==="textImage"?(a.groupTextImages[ve]||(a.groupTextImages[ve]=[]),a.groupTextImages[ve]=[...a.groupTextImages[ve],...J],a.groupTextImageTexts[ve]||(a.groupTextImageTexts[ve]="")):pe==="lastFrames"?(a.groupLastFrames[ve]||(a.groupLastFrames[ve]=[]),a.groupLastFrames[ve]=[...a.groupLastFrames[ve],...J]):pe==="textVideo"&&(a.groupTextVideos[ve]||(a.groupTextVideos[ve]=[]),a.groupTextVideos[ve]=[...a.groupTextVideos[ve],...J],a.groupTextVideoTexts[ve]||(a.groupTextVideoTexts[ve]=""))}else{const ve=Q.value==="topVideoUpload"?ce.topVideo:ce[pe||"novel"];if(ve){if(o[ve.dataKey]=[...o[ve.dataKey],...J],ve.indexRef!==void 0){ve.indexRef.value=o[ve.dataKey].length-1;const he=o[ve.dataKey][ve.indexRef.value];ve.urlRef&&ve.idRef&&(ve.urlRef.value=he.key_frame_url||he.file_url,ve.idRef.value=he.id),ve.extraUpdate&&ve.extraUpdate()}else ve.extraUpdate&&ve.extraUpdate();if(["novel","video"].includes(i.value)){const he=ve.dataKey==="checkedNovel"?"novel":"video";v.value.validateField(he)}Q.value="videoUpload"}}},G=async A=>{const{uploadType:K}=A;let J=new FormData;A.fileData.length>=1&&A.fileData.forEach(pe=>{J.append("file",pe)}),J.append("category",K),J.append("is_public",A.is_public),A.tags.length>=1&&A.tags.forEach(pe=>{J.append("tag_ids",pe)}),Z.value=!0;const ce=await cn(!1,J);if(ce.code===0)re(ce,K),y.value.init("",!1,U(i.value)),ge.success("新增成功!"),Z.value=!1,i.value="";else throw Z.value=!1,i.value="",new Error(ce.message)},L=async A=>{Z.value=!0,await rn(A).then(K=>{if(K.code===0)re(K),_.value.init("",!1,[],U(i.value)),ge.success("新增成功!");else throw ge.error("新增失败!"),new Error(K.message)}).catch(K=>{ge.error(K),Z.value=!1})},ne=M(()=>i.value==="stickers"||i.value==="textImage"||i.value==="lastFrames"||i.value==="textVideo"),fe=M(()=>p.value?!1:i.value==="stickers"||i.value==="textImage"?o.checkedStickers.length||o.checkedTextImages.length:i.value==="lastFrames"||i.value==="textVideo"?o.checkedLastFrames.length||o.checkedTextVideos.length:!1);return{uploadLoading:Z,currentUploadType:i,currentUploadVideoType:Q,isGroupSelection:P,uploadMaterial:oe,handleSubmitFormRes:G,handleSubmitNovelRes:L,propUploadTypeDisabled:fe,TypeToCategory:U,categoryToType:ue,addUploadCheckedList:re,propUploadTypeChange:ne}}function oC(e,o,t,s,a,c,i,u,p,y,_,v,$,S,m,r,T,b,C,d,k,g,h,x,R,j){const F=E(!1),B=E(""),Y=E(""),D=E("video"),Z=E({}),Q=({type:H,from:re})=>{P(H,re)},P=(H,re,G=!1)=>{if(!G&&j.value&&(H==="stickers"||H==="lastFrames"||H==="textImage"||H==="textVideo")){ge.warning(`组合模式下，请在各个组合中选择${H==="stickers"||H==="textImage"?"贴图":"尾帧"}`);return}if(Y.value=H,H==="stickers"&&o.checkedTextImages.length||H==="textImage"&&o.checkedStickers.length||H==="lastFrames"&&o.checkedTextVideos.length||H==="textVideo"&&o.checkedLastFrames.length)return;const L={novel:"选择小说",video:"选择解压视频",firstFrames:"选择首帧视频",lastFrames:"选择尾帧视频",music:"选择背景音乐",stickers:"选择贴图",textImage:"选择带文字图片库素材",textVideo:"选择带文字视频库素材"};B.value=L[H]||"选择素材",H==="video"&&re==="top"&&(B.value="选择置顶视频"),re==="top"?D.value="topVideo":D.value="video";const ne={novel:t.novelTags,firstFrames:t.firstFramesTags,video:t.unzipVideoTag,topVideo:t.topVideoTags,music:t.musicTags,stickers:t.stickersTags,textImage:t.textImageTags,lastFrames:t.lastFrameTags,textVideo:t.textVideoTags};Z.value=ne[H]||{},H==="video"&&re==="top"&&(Z.value=t.topVideoTags||{}),F.value=!0};return{selectDialogVisible:F,dialogTitle:B,tabType:Y,videoFrom:D,tagsObject:Z,handleMaterialSelect:Q,selectMaterial:P,getCheckedListByType:(H,re,G=!1,L={},ne)=>{var fe;if(G){const A={stickers:"Stickers",lastFrames:"LastFrames",textImage:"TextImages",textVideo:"TextVideos"},K=ne.value-1;if((fe=L[`group${A[H]}`])!=null&&fe.length)return L[`group${A[H]}`][K]||[]}else return H==="video"&&re==="topVideo"?o.checkedTopVideo:{novel:o.checkedNovel,firstFrames:o.checkedFirstFrames,video:o.checkedVideo,topVideo:o.checkedTopVideo,music:o.checkedMusic,stickers:o.checkedStickers,textImage:o.checkedTextImages,lastFrames:o.checkedLastFrames,textVideo:o.checkedTextVideos}[H]||[];return[]},getComponentListByType:H=>({novel:a.novelComponentList,firstFrames:a.firstFramesComponentList,video:a.videoComponentList,topVideo:a.topVideoComponentList,music:a.musicComponentList,stickers:a.stickersComponentList,textImage:a.textImagesComponentList,lastFrames:a.lastFramesComponentList,textVideo:a.textVideosComponentList})[H]||[],getActiveTabByType:H=>({novel:c.novelActiveTab,firstFrames:c.firstFramesActiveTab,video:c.videoActiveTab,topVideo:c.topVideoActiveTab,music:c.musicActiveTab,stickers:c.stickersActiveTab,textImage:c.textImagesActiveTab,lastFrames:c.lastFramesActiveTab,textVideo:c.textVideosActiveTab})[H]||"",transferCheckedList:(H,re,G,L,ne,fe,A,K,J,ce=!1,pe={},ve)=>{if(F.value=!1,L&&(s[L].start_date=fe,s[L].end_date=A),ce){const _e=ve.value-1;L==="stickers"?(pe.groupStickers[_e]=H,pe.groupTextImages[_e]=[]):L==="lastFrames"?(pe.groupLastFrames[_e]=H,pe.groupTextVideos[_e]=[]):L==="textImage"?(pe.groupTextImages[_e]=H,pe.groupStickers[_e]=[]):L==="textVideo"&&(pe.groupTextVideos[_e]=H,pe.groupLastFrames[_e]=[]);return}const Pe={novel:()=>{o.checkedNovel=H,t.novelTags=re,a.novelComponentList=ne,c.novelActiveTab=G,i.novel=J},firstFrames:()=>{var _e,W;o.checkedFirstFrames=H,u.value=(_e=o.checkedFirstFrames[0])==null?void 0:_e.key_frame_url,p.value=(W=o.checkedFirstFrames[0])==null?void 0:W.id,d.value=0,t.firstFramesTags=re,a.firstFramesComponentList=ne,c.firstFramesActiveTab=G,i.firstFrames=J},lastFrames:()=>{var _e,W;o.checkedTextVideos.splice(0,o.checkedTextVideos.length),t.textVideoTags={shared:[],personal:[]},a.textVideosComponentList=[],c.textVideosActiveTab="",b.value="",C.value="",R.value=-1,o.checkedLastFrames=H,v.value=(_e=o.checkedLastFrames[0])==null?void 0:_e.key_frame_url,$.value=(W=o.checkedLastFrames[0])==null?void 0:W.id,g.value=0,t.lastFrameTags=re,a.lastFramesComponentList=ne,c.lastFramesActiveTab=G,i.lastFrames=J},stickers:()=>{var _e,W;o.checkedTextImages.splice(0,o.checkedTextImages.length),t.textImageTags={shared:[],personal:[]},a.textImagesComponentList=[],c.textImagesActiveTab="",r.value="",T.value="",x.value=-1,o.checkedStickers=H,S.value=(_e=o.checkedStickers[0])==null?void 0:_e.file_url,m.value=(W=o.checkedStickers[0])==null?void 0:W.id,h.value=0,t.stickersTags=re,a.stickersComponentList=ne,c.stickersActiveTab=G,i.stickers=J},music:()=>{e.selectedAudio="",o.checkedMusic=H,t.musicTags=re,a.musicComponentList=ne,c.musicActiveTab=G,i.music=J},video:()=>{var _e,W;K==="video"?(o.checkedVideo=H,y.value=(_e=o.checkedVideo[0])==null?void 0:_e.key_frame_url,_.value=(W=o.checkedVideo[0])==null?void 0:W.id,k.value=0,t.unzipVideoTag=re,a.videoComponentList=ne,c.videoActiveTab=G,i.video=J):K==="topVideo"&&(o.checkedTopVideo=H,t.topVideoTags=re,a.topVideoComponentList=ne,c.topVideoActiveTab=G,i.topVideo=J)},textImage:()=>{var _e,W;o.checkedStickers.splice(0,o.checkedStickers.length),t.stickersTags={shared:[],personal:[]},a.stickersComponentList=[],c.stickersActiveTab="",S.value="",m.value="",h.value=-1,o.checkedTextImages=H,r.value=(_e=o.checkedTextImages[0])==null?void 0:_e.file_url,T.value=(W=o.checkedTextImages[0])==null?void 0:W.id,x.value=0,t.textImageTags=re,a.textImagesComponentList=ne,c.textImagesActiveTab=G,i.textImage=J},textVideo:()=>{var _e,W;o.checkedLastFrames.splice(0,o.checkedLastFrames.length),t.lastFrameTags={shared:[],personal:[]},a.lastFramesComponentList=[],c.lastFramesActiveTab="",v.value="",$.value="",g.value=-1,o.checkedTextVideos=H,b.value=(_e=o.checkedTextVideos[0])==null?void 0:_e.key_frame_url,C.value=(W=o.checkedTextVideos[0])==null?void 0:W.id,R.value=0,t.textVideoTags=re,a.textVideosComponentList=ne,c.textVideosActiveTab=G,i.textVideo=J}}[L];Pe&&Pe()},handleCloseDialog:()=>{F.value=!1}}}function sC({checkedData:e,currentFirstFrameIndex:o,currentLastFrameIndex:t,currentUnzipVideoIndex:s,currentStickerIndex:a,currentTextImageIndex:c,currentTextVideoIndex:i,mainSearchBoxText:u,endSearchBoxText:p,relaxFormData:y,baseUrl:_,showTextConfig:v,showTitleConfig:$,showMaterialConfig:S}){me(()=>e.checkedFirstFrames,r=>{r.length===0&&(o.value=-1)},{deep:!0}),me(()=>e.checkedLastFrames,r=>{r.length===0&&(t.value=-1)},{deep:!0}),me(()=>e.checkedVideo,r=>{r.length===0&&(s.value=-1)},{deep:!0}),me(()=>e.checkedStickers,r=>{r.length===0&&(a.value=-1)},{deep:!0}),me(()=>e.checkedTextImages,r=>{r.length===0&&(c.value=-1)},{deep:!0}),me(()=>e.checkedTextVideos,r=>{r.length===0&&(i.value=-1)},{deep:!0}),me(()=>e.checkedNovel,r=>{if(r.length>0&&!u.value&&!p.value){const T=r[0].name;u.value=T,p.value=T}},{deep:!0,immediate:!0}),me(()=>e.checkedNovel,r=>{r.length?m():document.getElementById("srtPreview")&&(document.getElementById("srtPreview").innerHTML="")}),me(()=>y.groupCount,r=>{r>1&&(y.value=!0)}),me(()=>v.value,r=>{r&&($.value=!1,S.value=!1)});async function m(){var r,T,b,C;fetch((r=e.checkedNovel[0])!=null&&r.subtitle_url?_+((T=e.checkedNovel[0])==null?void 0:T.subtitle_url):_+((C=JSON.parse((b=e.checkedNovel[0])==null?void 0:b.extra))==null?void 0:C.subtitle_url)).then(d=>d.text().then(k=>{const g=document.getElementById("srtPreview");g.innerHTML=gr(k)}))}}const lC={class:"titles-container-wrapper"},aC={class:"titles-scroll-area"},nC={class:"title-input-wrapper"},iC={class:"title-tools"},rC=["title"],cC={class:"style-panel"},uC={class:"style-section"},dC={class:"style-section"},fC={class:"style-section"},vC={class:"style-section"},pC={class:"color-pickers"},mC={class:"color-picker-item"},gC={class:"color-picker-item"},hC={class:"color-picker-item"},yC={class:"style-section"},kC={class:"style-section"},bC={class:"apply-global-options"},CC={class:"apply-options"},_C={key:0,class:"add-title-row"},wC={__name:"TitleSettings",props:{formData:Object,checkedData:Object,fontFamilyOptions:Array,type:{type:String,default:"firstFrame",validator:e=>["firstFrame","fixed"].includes(e)},disabled:{type:Boolean,default:!1}},emits:["update:formData"],setup(e,{emit:o}){const t=e,s=o,a=Be({...t.formData}),c=()=>{(!a.fixedTitle||!Array.isArray(a.fixedTitle))&&(a.fixedTitle=[]),(!a.firstFrameVideo||!Array.isArray(a.firstFrameVideo))&&(a.firstFrameVideo=[])};c();const i=M(()=>t.type==="fixed"?a.fixedTitle:a.firstFrameVideo),u=Be({font:!1,fontSize:!1,stroke:!1,colors:!1,position:!1}),p=M(()=>u.font||u.fontSize||u.stroke||u.colors||u.position),y=M(()=>t.type==="fixed"||t.checkedData&&t.checkedData.checkedFirstFrames&&t.checkedData.checkedFirstFrames.length>0),_=M(()=>t.disabled||t.type==="firstFrame"&&!y.value),v=()=>{s("update:formData",a)},$=()=>{v()},S=()=>{v()},m=()=>{v()},r=(k,g,h)=>{k[g]=h,v()},T=()=>{v()},b=(k,g)=>{(t.type==="fixed"?a.fixedTitle:a.firstFrameVideo).forEach((x,R)=>{R!==g&&(u.font&&(x.font_id=k.font_id),u.fontSize&&(x.font_size=k.font_size),u.stroke&&(x.stroke_width=k.stroke_width,x.stroke_fill=k.stroke_fill),u.colors&&(x.fill=k.fill,x.background_color=k.background_color,x.firstFrameColorMode=k.firstFrameColorMode),u.position&&(x.y=k.y))}),Object.keys(u).forEach(x=>{u[x]=!1}),v()};me(()=>t.formData,k=>{Object.assign(a,JSON.parse(JSON.stringify(k))),c()},{deep:!0,immediate:!0});const C=()=>{var h;const k=t.fontFamilyOptions.length>0?((h=t.fontFamilyOptions.find(x=>x.name.split(".").slice(0,-1).join(".")==="方正黑体简体"))==null?void 0:h.id)||t.fontFamilyOptions[0].id:"",g={key:Date.now(),text:"",font_id:k,font_size:35,stroke_width:2,fill:"rgba(255, 255, 255, 1)",background_color:"rgba(255, 255, 0, 1)",stroke_fill:"rgba(0, 0, 0, 1)",y:.2};t.type==="fixed"?(a.fixedTitle||(a.fixedTitle=[]),a.fixedTitle.push(g)):(a.firstFrameVideo||(a.firstFrameVideo=[]),a.firstFrameVideo.push(g)),v()},d=k=>{const g=t.type==="fixed"?a.fixedTitle:a.firstFrameVideo,h=g.indexOf(k);h!==-1&&(g.splice(h,1),v())};return(k,g)=>{const h=oo,x=Vs,R=Os,j=os,F=fl,B=ss,Y=Ls,D=Mt,Z=Za;return f(),I("div",{class:N(["title-settings",{"title-settings-disabled":t.disabled}])},[l("div",lC,[l("div",aC,[(f(!0),I(Ee,null,He(i.value,(Q,P)=>(f(),I("div",{key:Q.key,class:"title-row"},[l("div",nC,[w(h,{modelValue:Q.text,"onUpdate:modelValue":O=>Q.text=O,placeholder:t.type==="fixed"?"请输入固定标题":"请输入首帧标题",onInput:g[0]||(g[0]=O=>$()),class:"title-input",disabled:_.value},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled"])]),l("div",iC,[w(Z,{placement:"bottom",width:"320",trigger:"click","popper-class":"custom-popover",disabled:_.value},{reference:V(()=>[l("div",{class:N(["tool-btn",{disabled:_.value}]),title:t.type==="fixed"?"固定标题样式":"首帧标题样式"},g[8]||(g[8]=[l("svg",{class:"icon-svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[l("path",{d:"M12 20h9"}),l("path",{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"})],-1)]),10,rC)]),default:V(()=>[l("div",cC,[l("div",uC,[g[9]||(g[9]=l("div",{class:"style-section-header"},[l("svg",{class:"icon-svg section-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[l("text",{x:"5",y:"19",style:{"font-size":"17px","font-weight":"400"}},"A")]),l("span",null,"字体")],-1)),w(R,{modelValue:Q.font_id,"onUpdate:modelValue":O=>Q.font_id=O,placeholder:"选择字体",style:{width:"100%"},onChange:v,filterable:"",size:"small",teleported:!1},{default:V(()=>[(f(!0),I(Ee,null,He(e.fontFamilyOptions,O=>(f(),se(x,{key:O.id,label:O.name.split(".").slice(0,-1).join("."),value:O.id},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),l("div",dC,[g[10]||(g[10]=l("div",{class:"style-section-header"},[l("svg",{class:"icon-svg section-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[l("text",{x:"5",y:"19",style:{"font-size":"14px"}},"123")]),l("span",null,"字号")],-1)),w(j,{modelValue:Q.font_size,"onUpdate:modelValue":O=>Q.font_size=O,min:1,max:100,onChange:v,onInput:g[1]||(g[1]=O=>S()),size:"small"},null,8,["modelValue","onUpdate:modelValue"])]),l("div",fC,[g[11]||(g[11]=l("div",{class:"style-section-header"},[l("svg",{class:"icon-svg section-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[l("circle",{cx:"12",cy:"12",r:"10"}),l("circle",{cx:"12",cy:"12",r:"6"})]),l("span",null,"描边")],-1)),w(j,{modelValue:Q.stroke_width,"onUpdate:modelValue":O=>Q.stroke_width=O,min:1,max:20,step:1,onInput:g[2]||(g[2]=O=>m()),onChange:v,size:"small"},null,8,["modelValue","onUpdate:modelValue"])]),l("div",vC,[g[15]||(g[15]=l("div",{class:"style-section-header"},[l("svg",{class:"icon-svg section-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[l("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})]),l("span",null,"颜色")],-1)),l("div",pC,[l("div",mC,[g[12]||(g[12]=l("span",null,"字体色",-1)),w(F,{modelValue:Q.fill,"onUpdate:modelValue":O=>Q.fill=O,"show-alpha":"",onChange:O=>r(Q,"fill",O),size:"small",teleported:!1},null,8,["modelValue","onUpdate:modelValue","onChange"])]),l("div",gC,[g[13]||(g[13]=l("span",null,"背景色",-1)),w(F,{modelValue:Q.background_color,"onUpdate:modelValue":O=>Q.background_color=O,"show-alpha":"",onChange:O=>r(Q,"background_color",O),size:"small",teleported:!1},null,8,["modelValue","onUpdate:modelValue","onChange"])]),l("div",hC,[g[14]||(g[14]=l("span",null,"描边色",-1)),w(F,{modelValue:Q.stroke_fill,"onUpdate:modelValue":O=>Q.stroke_fill=O,"show-alpha":"",onChange:O=>r(Q,"stroke_fill",O),size:"small",teleported:!1},null,8,["modelValue","onUpdate:modelValue","onChange"])])])]),l("div",yC,[g[16]||(g[16]=l("div",{class:"style-section-header"},[l("svg",{class:"icon-svg section-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[l("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),l("polyline",{points:"19 12 12 19 5 12"})]),l("span",null,"位置")],-1)),w(B,{modelValue:Q.y,"onUpdate:modelValue":O=>Q.y=O,min:0,max:1,step:.01,"format-tooltip":O=>`${Math.round(O*100)}%`,onInput:g[3]||(g[3]=O=>T()),onChange:v},null,8,["modelValue","onUpdate:modelValue","format-tooltip"])]),l("div",kC,[g[18]||(g[18]=l("div",{class:"style-section-header"},[l("svg",{class:"icon-svg section-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[l("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),l("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"})]),l("span",null,"应用于全局")],-1)),l("div",bC,[l("div",CC,[w(Y,{modelValue:u.font,"onUpdate:modelValue":g[4]||(g[4]=O=>u.font=O),label:"字体",border:"",size:"small"},null,8,["modelValue"]),w(Y,{modelValue:u.fontSize,"onUpdate:modelValue":g[5]||(g[5]=O=>u.fontSize=O),label:"字号",border:"",size:"small"},null,8,["modelValue"]),w(Y,{modelValue:u.stroke,"onUpdate:modelValue":g[6]||(g[6]=O=>u.stroke=O),label:"描边",border:"",size:"small"},null,8,["modelValue"]),w(Y,{modelValue:u.colors,"onUpdate:modelValue":g[7]||(g[7]=O=>u.colors=O),label:"颜色",border:"",size:"small"},null,8,["modelValue"])]),w(D,{onClick:O=>b(Q,P),type:"primary",size:"small",class:"apply-btn",disabled:!p.value},{default:V(()=>g[17]||(g[17]=[Ie(" 应用选中项到所有标题 ")])),_:2,__:[17]},1032,["onClick","disabled"])])])])]),_:2},1032,["disabled"]),w(D,{type:"text",onClick:Re(O=>d(Q),["prevent"]),class:"delete-btn",size:"small",disabled:_.value},{default:V(()=>g[19]||(g[19]=[l("svg",{class:"icon-svg delete-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[l("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])),_:2,__:[19]},1032,["onClick","disabled"])])]))),128))]),i.value.length<5?(f(),I("div",_C,[w(D,{type:"primary",onClick:Re(C,["prevent"]),class:"add-title-btn",disabled:i.value.length>=5||_.value},{default:V(()=>[g[20]||(g[20]=l("svg",{class:"icon-svg plus-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[l("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),l("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1)),Ie(" 添加"+ie(t.type==="fixed"?"固定":"首帧")+"标题 ",1)]),_:1,__:[20]},8,["disabled"])])):X("",!0)])],2)}}},Na=ot(wC,[["__scopeId","data-v-cd5bf165"]]),IC={class:"right-side"},TC={class:"preview-container"},xC={class:"preview-frame preview-frame-first"},FC=["src"],SC={class:"switch-operate"},EC={class:"switch-container"},$C={class:"counter"},RC={class:"preview-frame preview-frame-main"},PC={key:0,class:"videoPreview"},OC=["src"],VC={key:1,class:"imagePreview"},LC=["src"],BC={class:"imagePreview"},AC=["src"],jC={class:"switch-operate"},QC={class:"switch-container"},HC={class:"counter"},MC={class:"preview-frame preview-frame-last"},UC=["src"],zC=["src"],NC={class:"switch-operate"},KC={key:0,class:"switch-container"},DC={class:"counter"},XC={key:1,class:"switch-operate"},GC={class:"switch-container"},YC={class:"counter"},qC={class:"create-button-right"},WC={__name:"PreviewArea",props:{formData:{type:Object,required:!0},checkedData:{type:Object,required:!0},fontFamilyOptions:{type:Array,required:!0},baseUrl:{type:String,required:!0},renderPreviewFirstFrameUrl:{type:String,default:""},renderPreviewVideoUrl:{type:String,default:""},renderPreviewLastFrameUrl:{type:String,default:""},renderPreviewStickerUrl:{type:String,default:""},renderPreviewTextImageUrl:{type:String,default:""},renderPreviewTextVideoUrl:{type:String,default:""},currentFirstFrameIndex:{type:Number,default:0},currentUnzipVideoIndex:{type:Number,default:0},currentLastFrameIndex:{type:Number,default:0},currentTextVideoIndex:{type:Number,default:0},firstAndLastVideoZoom:{type:Number,default:1},videoFontZoom:{type:Number,default:1},createVideoDisabled:{type:Boolean,default:!1},count:{type:Number,default:1},groupCount:{type:Number,default:0}},emits:["switchToPrevious","switchToNext","generateVideo"],setup(e,{emit:o}){const t=e,s=o,a=E(null),c=E(null),i=E(null),u=_=>{s("switchToPrevious",_)},p=_=>{s("switchToNext",_)},y=()=>{s("generateVideo")};return Le(()=>{a.value&&(a.value.style.width=`${Ue(720/t.firstAndLastVideoZoom)*Me()}rem`,a.value.style.minWidth=`${Ue(720/t.firstAndLastVideoZoom)*Me()}rem`,a.value.style.height=`${Ue(1280/t.firstAndLastVideoZoom)*Me()}rem`),c.value&&(c.value.style.width=`${Ue(720/t.videoFontZoom)*Me()}rem`,c.value.style.minWidth=`${Ue(720/t.videoFontZoom)*Me()}rem`,c.value.style.height=`${Ue(1280/t.videoFontZoom)*Me()}rem`),i.value&&(i.value.style.width=`${Ue(720/t.firstAndLastVideoZoom)*Me()}rem`,i.value.style.minWidth=`${Ue(720/t.firstAndLastVideoZoom)*Me()}rem`,i.value.style.height=`${Ue(1280/t.firstAndLastVideoZoom)*Me()}rem`)}),(_,v)=>{var S,m,r,T,b,C;const $=Mt;return f(),I("div",IC,[l("div",TC,[l("div",xC,[v[8]||(v[8]=l("div",{class:"frame-title"},"首帧视频预览",-1)),l("div",{class:"frame-content",ref_key:"firstPreview",ref:a},[e.checkedData.checkedFirstFrames.length?(f(),I("img",{key:0,src:e.baseUrl+e.renderPreviewFirstFrameUrl,alt:"",class:"videoPreview"},null,8,FC)):X("",!0),(f(!0),I(Ee,null,He(e.formData.firstFrameVideo,d=>{var k;return f(),I("div",{class:"firstFrameText",key:d.id,style:ye({color:d.fill,backgroundColor:d.background_color,fontSize:`${n(Ue)(d.font_size/e.firstAndLastVideoZoom)*n(Me)()}rem`,webkitTextStroke:`${n(Ue)(d.stroke_width/e.firstAndLastVideoZoom)*n(Me)()}rem ${d.stroke_fill}`,top:`${d.y*100}%`,fontFamily:`${(k=e.fontFamilyOptions.find(g=>g.id===d.font_id))==null?void 0:k.name.split(".").slice(0,-1).join(".")}`})},ie(d.text),5)}),128))],512),l("div",SC,[l("div",EC,[l("div",{onClick:v[0]||(v[0]=d=>u("firstFrame")),class:"previous-btn"}),l("div",$C,ie(`${e.currentFirstFrameIndex+1}/${(S=e.checkedData.checkedFirstFrames)==null?void 0:S.length}`),1),l("div",{onClick:v[1]||(v[1]=d=>p("firstFrame")),class:"next-btn"})])])]),l("div",RC,[v[9]||(v[9]=l("div",{class:"frame-title"},"正片预览",-1)),l("div",{class:"frame-content",ref_key:"mainPreview",ref:c},[(m=e.checkedData.checkedVideo)!=null&&m.length?(f(),I("div",PC,[l("img",{src:e.baseUrl+e.renderPreviewVideoUrl,alt:"",class:"unzipVideoImage"},null,8,OC)])):X("",!0),l("div",{class:"textPreview",id:"srtPreview",style:ye({fontSize:`${n(Ue)(e.formData.novelFontSize/e.videoFontZoom)*n(Me)()}rem`,fontFamily:`${(r=e.fontFamilyOptions.find(d=>d.id===e.formData.fontFamily))==null?void 0:r.name.split(".").slice(0,-1).join(".")}`,color:e.formData.novelForegroundColor,backgroundColor:e.formData.novelBackgroundColor,webkitTextStroke:`${n(Ue)(e.formData.novelStrokeWidth/e.videoFontZoom)*n(Me)()}rem ${e.formData.novelStrokeColor}`,top:`${e.formData.novelTopMargin*100}%`,borderRadius:`${n(Ue)(5*n(Me)())}rem`})},null,4),(f(!0),I(Ee,null,He(e.formData.fixedTitle,d=>{var k;return f(),I("div",{class:"firstFrameText",key:d.id,style:ye({color:d.fill,backgroundColor:d.background_color,fontSize:`${n(Ue)(d.font_size/e.videoFontZoom)*n(Me)()}rem`,webkitTextStroke:`${n(Ue)(d.stroke_width/e.videoFontZoom)*n(Me)()}rem ${d.stroke_fill}`,top:`${d.y*100}%`,fontFamily:`${(k=e.fontFamilyOptions.find(g=>g.id===d.font_id))==null?void 0:k.name.split(".").slice(0,-1).join(".")}`})},ie(d.text),5)}),128)),e.checkedData.checkedStickers.length?(f(),I("div",VC,[l("img",{src:e.baseUrl+e.renderPreviewStickerUrl,class:"image"},null,8,LC)])):X("",!0),l("div",BC,[e.checkedData.checkedTextImages.length?(f(),I("img",{key:0,src:e.baseUrl+e.renderPreviewTextImageUrl,class:"image"},null,8,AC)):X("",!0)])],512),l("div",jC,[l("div",QC,[l("div",{onClick:v[2]||(v[2]=d=>u("unzipVideo")),class:"previous-btn"}),l("div",HC,ie(`${e.currentUnzipVideoIndex+1}/${(T=e.checkedData.checkedVideo)==null?void 0:T.length}`),1),l("div",{onClick:v[3]||(v[3]=d=>p("unzipVideo")),class:"next-btn"})])])]),l("div",MC,[v[10]||(v[10]=l("div",{class:"frame-title"},"尾帧视频预览",-1)),l("div",{class:"frame-content",ref_key:"lastPreview",ref:i},[e.checkedData.checkedLastFrames.length?(f(),I("img",{key:0,src:e.baseUrl+e.renderPreviewLastFrameUrl,alt:"",class:"videoPreview"},null,8,UC)):X("",!0),e.checkedData.checkedTextVideos.length?(f(),I("img",{key:1,src:e.baseUrl+e.renderPreviewTextVideoUrl,class:"videoPreview"},null,8,zC)):X("",!0)],512),l("div",NC,[e.checkedData.checkedTextVideos.length?X("",!0):(f(),I("div",KC,[l("div",{onClick:v[4]||(v[4]=d=>u("lastFrame")),class:"previous-btn"}),l("div",DC,ie(`${e.currentLastFrameIndex+1}/${(b=e.checkedData.checkedLastFrames)==null?void 0:b.length}`),1),l("div",{onClick:v[5]||(v[5]=d=>p("lastFrame")),class:"next-btn"})])),e.checkedData.checkedTextVideos.length?(f(),I("div",XC,[l("div",GC,[l("div",{onClick:v[6]||(v[6]=d=>u("textVideo")),class:"previous-btn"}),l("div",YC,ie(`${e.currentTextVideoIndex+1}/${(C=e.checkedData.checkedTextVideos)==null?void 0:C.length}`),1),l("div",{onClick:v[7]||(v[7]=d=>p("textVideo")),class:"next-btn"})])])):X("",!0)])])]),l("div",qC,[w($,{type:"primary",onClick:y,loading:e.createVideoDisabled,disabled:e.createVideoDisabled},{default:V(()=>[Ie(ie(`创建任务 （共${e.groupCount===0?e.count:e.count*e.groupCount}条）`),1)]),_:1},8,["loading","disabled"])])])}}},ZC=ot(WC,[["__scopeId","data-v-c8134078"]]),JC={class:"task-info-section"},e2={class:"task-info-card material-card"},t2={class:"collapse-icon"},o2={key:0},s2={key:1},l2={class:"card-content material-content"},a2={class:"material-row"},n2={class:"material-controls"},i2={key:0,class:"music-card pre-video-card"},r2={class:"music-card-header"},c2={key:0,class:"music-selected-info"},u2=["title"],d2={class:"el-icon"},f2={class:"el-icon"},v2={class:"music-card-content"},p2={class:"music-settings"},m2={class:"setting-item"},g2={class:"el-icon"},h2={key:1,class:"select-material-btn"},y2={class:"el-icon"},k2={class:"el-icon"},b2={class:"material-row"},C2={class:"material-controls"},_2={class:"el-icon"},w2={key:0},I2=["title"],T2={class:"el-icon"},x2={class:"el-icon"},F2={class:"material-row"},S2={class:"material-controls"},E2={class:"el-icon"},$2={key:0},R2=["title"],P2={class:"el-icon"},O2={class:"el-icon"},V2={class:"material-row"},L2={class:"material-controls"},B2={key:0,class:"music-card search-box-card",style:{cursor:"pointer"}},A2={class:"music-card-header"},j2={key:0,class:"music-selected-info"},Q2=["title"],H2={class:"el-icon"},M2={class:"el-icon"},U2={class:"music-settings"},z2={class:"setting-item"},N2={class:"setting-item"},K2={class:"position-selector"},D2=["onClick"],X2={class:"el-icon"},G2={class:"el-icon"},Y2={class:"material-row"},q2={class:"material-controls"},W2={class:"el-icon"},Z2={key:0},J2=["title"],e_={key:2,class:"disabled-tip"},t_={class:"music-card-header"},o_={key:0,class:"music-selected-info"},s_={key:0,class:"disabled-tip"},l_=["title"],a_={key:0,class:"disabled-tip"},n_={class:"el-icon"},i_={class:"search-box-settings"},r_={class:"setting-item"},c_={class:"el-icon"},u_={key:0,class:"disabled-tip"},d_={class:"el-icon"},f_={key:0,class:"upload-disabled-tip"},v_={class:"material-row"},p_={class:"material-controls"},m_={class:"el-icon"},g_={key:0},h_=["title"],y_={key:2,class:"disabled-tip"},k_={class:"music-card-header"},b_={key:0,class:"music-selected-info"},C_={key:0,class:"disabled-tip"},__=["title"],w_={key:0,class:"disabled-tip"},I_={class:"el-icon"},T_={class:"search-box-settings"},x_={class:"setting-item"},F_={class:"el-icon"},S_={key:0,class:"disabled-tip"},E_={class:"el-icon"},$_={key:0,class:"upload-disabled-tip"},R_={__name:"MaterialsSection",props:{formData:{type:Object,required:!0},checkedData:{type:Object,required:!0},tagValue:{type:Object,required:!0},rules:{type:Object,required:!0},musicStartPositionOptions:{type:Array,required:!0},musicDbValue:{type:Number,required:!0},mainSearchBoxText:{type:String,required:!0},endSearchBoxText:{type:String,required:!0},showMaterialConfig:{type:Boolean,required:!0},isGroupModeActive:{type:Boolean,default:!1},isFromMaterialChecked:{type:Object,required:!0},preVideoDbValue:{type:Number,required:!0}},emits:["update:showMaterialConfig","update:musicDbValue","update:mainSearchBoxText","update:endSearchBoxText","update:formData","selectMaterial","uploadMaterial","update:preVideoDbValue","openTitleSettings"],setup(e,{emit:o}){const t=e,s=o,a=()=>{s("update:showMaterialConfig",!t.showMaterialConfig)},c=(m,r)=>{s("selectMaterial",{type:m,from:r})},i=(m,r)=>{s("uploadMaterial",{type:m,from:r})},u=m=>m?[...m.shared||[],...m.personal||[]]:[],p=m=>{s("update:musicDbValue",m)},y=m=>{s("update:mainSearchBoxText",m)},_=m=>{s("update:endSearchBoxText",m)},v=m=>{const r={...t.formData,musicStartPosition:m};s("update:formData",r)},$=m=>{s("update:preVideoDbValue",m)},S=()=>{s("openTitleSettings")};return(m,r)=>{var d,k,g,h,x,R,j,F,B,Y,D,Z,Q,P,O,U,ae,ue,oe,H,re,G;const T=ss,b=en,C=oo;return f(),I("div",JC,[l("div",e2,[l("div",{class:"card-header",onClick:a},[r[28]||(r[28]=l("div",{class:"card-title"},"素材",-1)),l("div",t2,[e.showMaterialConfig?(f(),I("span",o2,"−")):(f(),I("span",s2,"+"))])]),qe(l("div",l2,[r[50]||(r[50]=l("div",{class:"section-divider"},[l("span",{class:"divider-text"},"首帧")],-1)),l("div",a2,[r[33]||(r[33]=l("div",{class:"material-label"},"首帧视频",-1)),l("div",n2,[(d=e.checkedData.checkedFirstFrames)!=null&&d.length?(f(),I("div",i2,[l("div",r2,[e.isFromMaterialChecked.firstFrames?(f(),I("div",c2," 已选择 "+ie(e.checkedData.checkedFirstFrames.length)+" 条首帧视频 ",1)):(f(),I("span",{key:1,class:"music-selected-info",title:(k=u(e.tagValue.firstFramesTags))==null?void 0:k.map(L=>L.label).join("、")},"已选标签: "+ie(u(e.tagValue.firstFramesTags).map(L=>L.label).join("、")),9,u2)),l("div",{class:"continue-select-btn",onClick:r[0]||(r[0]=L=>c("firstFrames"))},[l("i",d2,[w(n(Je))]),r[29]||(r[29]=l("span",null,"继续选择",-1))]),l("div",{class:"upload-icon-btn",onClick:r[1]||(r[1]=L=>i("firstFrames")),style:ye(e.formData.count===((g=e.checkedData.checkedFirstFrames)==null?void 0:g.length)?{cursor:"not-allowed",opacity:.6}:{})},[l("i",f2,[w(n(st))])],4)]),l("div",v2,[l("div",p2,[l("div",m2,[r[30]||(r[30]=l("div",{class:"setting-label"},"音量",-1)),w(T,{class:"volume-slider","model-value":e.preVideoDbValue,"onUpdate:modelValue":$,min:-20,max:20,step:.1,"format-tooltip":L=>L.toFixed(1)+" dB"},null,8,["model-value","format-tooltip"])])])]),l("div",{class:"edit-title-tip",onClick:Re(S,["stop"])},[l("i",g2,[w(b)]),r[31]||(r[31]=l("span",null,"编辑标题",-1))])])):(f(),I("div",h2,[l("div",{class:"select-btn",onClick:r[2]||(r[2]=L=>c("firstFrames"))},[l("i",y2,[w(n(Je))]),r[32]||(r[32]=l("span",null,"选择首帧视频",-1))])])),(h=e.checkedData.checkedFirstFrames)!=null&&h.length?X("",!0):(f(),I("div",{key:2,class:"upload-btn",onClick:r[3]||(r[3]=L=>i("firstFrames"))},[l("i",k2,[w(n(st))])]))])]),r[51]||(r[51]=l("div",{class:"section-divider"},[l("span",{class:"divider-text"},"正片")],-1)),l("div",b2,[r[35]||(r[35]=l("div",{class:"material-label required-label"},"解压视频",-1)),l("div",C2,[((x=e.checkedData.checkedVideo)==null?void 0:x.length)>0?(f(),I("div",{key:0,class:"selected-material",onClick:r[4]||(r[4]=L=>c("video"))},[l("i",_2,[w(n(St))]),e.isFromMaterialChecked.video?(f(),I("span",w2,"已选 "+ie(e.checkedData.checkedVideo.length)+" 项",1)):(f(),I("span",{key:1,class:"selection-text",title:(R=u(e.tagValue.unzipVideoTag))==null?void 0:R.map(L=>L.label).join("、")},"已选标签: "+ie(u(e.tagValue.unzipVideoTag).map(L=>L.label).join("、")),9,I2))])):(f(),I("div",{key:1,class:"select-material-btn",onClick:r[5]||(r[5]=L=>c("video"))},[l("i",T2,[w(n(Je))]),r[34]||(r[34]=l("span",null,"选择解压视频",-1))])),l("div",{class:"upload-btn",onClick:r[6]||(r[6]=L=>i("video")),style:ye(e.formData.count===((j=e.checkedData.checkedVideo)==null?void 0:j.length)?{cursor:"not-allowed",opacity:.6}:{})},[l("i",x2,[w(n(st))])],4)])]),l("div",F2,[r[37]||(r[37]=l("div",{class:"material-label"},"置顶视频",-1)),l("div",S2,[((F=e.checkedData.checkedTopVideo)==null?void 0:F.length)>0?(f(),I("div",{key:0,class:"selected-material",onClick:r[7]||(r[7]=L=>c("video","top"))},[l("i",E2,[w(n(St))]),e.isFromMaterialChecked.topVideo?(f(),I("span",$2,"已选 "+ie(e.checkedData.checkedTopVideo.length)+" 项",1)):(f(),I("span",{key:1,class:"selection-text",title:(B=u(e.tagValue.topVideoTags))==null?void 0:B.map(L=>L.label).join("、")},"已选标签: "+ie(u(e.tagValue.topVideoTags).map(L=>L.label).join("、")),9,R2))])):(f(),I("div",{key:1,class:"select-material-btn",onClick:r[8]||(r[8]=L=>c("video","top"))},[l("i",P2,[w(n(Je))]),r[36]||(r[36]=l("span",null,"选择置顶视频",-1))])),l("div",{class:"upload-btn",onClick:r[9]||(r[9]=L=>i("video","topVideo"))},[l("i",O2,[w(n(st))])])])]),l("div",V2,[r[41]||(r[41]=l("div",{class:"material-label"},"背景音乐",-1)),l("div",L2,[(Y=e.checkedData.checkedMusic)!=null&&Y.length?(f(),I("div",B2,[l("div",A2,[e.isFromMaterialChecked.music?(f(),I("div",j2," 已选择 "+ie(e.checkedData.checkedMusic.length)+" 项音乐 ",1)):(f(),I("span",{key:1,class:"music-selected-info",title:(D=u(e.tagValue.musicTags))==null?void 0:D.map(L=>L.label).join("、")},"已选标签: "+ie(u(e.tagValue.musicTags).map(L=>L.label).join("、")),9,Q2)),l("div",{class:"continue-select-btn",onClick:r[11]||(r[11]=Re(L=>c("music"),["stop"]))},[l("i",H2,[w(n(Je))]),l("span",{onClick:r[10]||(r[10]=Re(L=>c("music"),["stop"]))},"继续选择")]),l("div",{class:"upload-btn",onClick:r[12]||(r[12]=L=>i("music")),style:ye(e.formData.count===((Z=e.checkedData.checkedMusic)==null?void 0:Z.length)?{cursor:"not-allowed",opacity:.6}:{})},[l("i",M2,[w(n(st))])],4)]),l("div",{class:"music-card-content",onClick:r[13]||(r[13]=Re(()=>{},["stop"]))},[l("div",U2,[l("div",z2,[r[38]||(r[38]=l("div",{class:"setting-label"},"音量",-1)),w(T,{"model-value":e.musicDbValue,"onUpdate:modelValue":p,min:-20,max:20,step:.1,"format-tooltip":L=>L.toFixed(1)+" dB"},null,8,["model-value","format-tooltip"])]),l("div",N2,[r[39]||(r[39]=l("div",{class:"setting-label"},"开始位置",-1)),l("div",K2,[(f(!0),I(Ee,null,He(e.musicStartPositionOptions,L=>(f(),I("div",{key:L.value,class:N(["position-option",{selected:e.formData.musicStartPosition===L.value}]),onClick:Re(ne=>v(L.value),["stop"])},ie(L.label),11,D2))),128))])])])])])):(f(),I("div",{key:1,class:"select-material-btn",onClick:r[14]||(r[14]=L=>c("music"))},[l("i",X2,[w(n(Je))]),r[40]||(r[40]=l("span",null,"选择背景音乐",-1))])),(Q=e.checkedData.checkedMusic)!=null&&Q.length?X("",!0):(f(),I("div",{key:2,class:"upload-btn",onClick:r[15]||(r[15]=L=>i("music")),style:ye(e.formData.count===((P=e.checkedData.checkedMusic)==null?void 0:P.length)?{cursor:"not-allowed",opacity:.6}:{})},[l("i",G2,[w(n(st))])],4))])]),l("div",Y2,[r[45]||(r[45]=l("div",{class:"material-label"},"贴图",-1)),l("div",q2,[(O=e.checkedData.checkedStickers)!=null&&O.length?(f(),I("div",{key:0,class:"selected-material",onClick:r[16]||(r[16]=L=>e.isGroupModeActive?null:c("stickers")),style:ye(e.isGroupModeActive?{cursor:"not-allowed"}:{})},[l("i",W2,[w(n(St))]),e.isFromMaterialChecked.stickers?(f(),I("span",Z2,"已选 "+ie((U=e.checkedData.checkedStickers)==null?void 0:U.length)+" 项贴图",1)):(f(),I("span",{key:1,class:"selection-text",title:u(e.tagValue.stickersTags).map(L=>L.label).join("、")},"已选标签: "+ie(u(e.tagValue.stickersTags).map(L=>L.label).join("、")),9,J2)),e.isGroupModeActive?(f(),I("span",e_)):X("",!0)],4)):e.checkedData.checkedTextImages.length?(f(),I("div",{key:1,class:"music-card search-box-card",onClick:r[19]||(r[19]=L=>e.isGroupModeActive?null:c("textImage")),style:ye(e.isGroupModeActive?{cursor:"not-allowed"}:{cursor:"pointer"})},[l("div",t_,[e.isFromMaterialChecked.textImage?(f(),I("div",o_,[Ie(" 已选择 "+ie(e.checkedData.checkedTextImages.length)+" 项搜索框 ",1),e.isGroupModeActive?(f(),I("span",s_)):X("",!0)])):(f(),I("span",{key:1,class:"music-selected-info",title:u(e.tagValue.textImageTags).map(L=>L.label).join("、")},[Ie("已选标签: "+ie(u(e.tagValue.textImageTags).map(L=>L.label).join("、"))+" ",1),e.isGroupModeActive?(f(),I("span",a_)):X("",!0)],8,l_)),l("div",{class:"continue-select-btn",onClick:r[17]||(r[17]=Re(L=>e.isGroupModeActive?null:c("textImage"),["stop"])),style:ye(e.isGroupModeActive?{cursor:"not-allowed",opacity:.6}:{})},[l("i",n_,[w(n(Je))]),r[42]||(r[42]=l("span",null,"继续选择",-1))],4)]),l("div",{class:"music-card-content",onClick:r[18]||(r[18]=L=>{L.stopPropagation()})},[l("div",i_,[l("div",r_,[r[43]||(r[43]=l("div",{class:"setting-label"},"内容",-1)),w(C,{"model-value":e.mainSearchBoxText,"onUpdate:modelValue":y,placeholder:"请输入搜索框显示的文本",clearable:""},null,8,["model-value"])])])])],4)):(f(),I("div",{key:2,class:"select-material-btn",onClick:r[20]||(r[20]=L=>e.isGroupModeActive?null:c("stickers")),style:ye(e.isGroupModeActive?{cursor:"not-allowed",opacity:.6}:{})},[l("i",c_,[w(n(Je))]),r[44]||(r[44]=l("span",null,"选择贴图",-1)),e.isGroupModeActive?(f(),I("span",u_)):X("",!0)],4)),l("div",{class:"upload-btn",onClick:r[21]||(r[21]=L=>e.isGroupModeActive?null:i(e.checkedData.checkedTextImages.length?"textImage":"stickers")),style:ye(e.isGroupModeActive||e.formData.count===(((ae=e.checkedData.checkedStickers)==null?void 0:ae.length)||((ue=e.checkedData.checkedTextImages)==null?void 0:ue.length))?{cursor:"not-allowed",opacity:.6}:{})},[l("i",d_,[w(n(st))]),e.isGroupModeActive?(f(),I("span",f_)):X("",!0)],4)])]),l("div",v_,[r[49]||(r[49]=l("div",{class:"material-label"},"尾帧",-1)),l("div",p_,[(oe=e.checkedData.checkedLastFrames)!=null&&oe.length?(f(),I("div",{key:0,class:"selected-material",onClick:r[22]||(r[22]=L=>e.isGroupModeActive?null:c("lastFrames")),style:ye(e.isGroupModeActive?{cursor:"not-allowed"}:{})},[l("i",m_,[w(n(St))]),e.isFromMaterialChecked.lastFrames?(f(),I("span",g_,"已选 "+ie((H=e.checkedData.checkedLastFrames)==null?void 0:H.length)+" 项尾帧视频",1)):(f(),I("span",{key:1,class:"selection-text",title:u(e.tagValue.lastFrameTags).map(L=>L.label).join("、")},"已选标签: "+ie(u(e.tagValue.lastFrameTags).map(L=>L.label).join("、")),9,h_)),e.isGroupModeActive?(f(),I("span",y_)):X("",!0)],4)):e.checkedData.checkedTextVideos.length?(f(),I("div",{key:1,class:"music-card search-box-card",onClick:r[25]||(r[25]=L=>e.isGroupModeActive?null:c("textVideo")),style:ye(e.isGroupModeActive?{cursor:"not-allowed"}:{cursor:"pointer"})},[l("div",k_,[e.isFromMaterialChecked.textVideo?(f(),I("div",b_,[Ie(" 已选择 "+ie(e.checkedData.checkedTextVideos.length)+" 项尾帧搜索框 ",1),e.isGroupModeActive?(f(),I("span",C_)):X("",!0)])):(f(),I("span",{key:1,class:"music-selected-info",title:u(e.tagValue.textVideoTags).map(L=>L.label).join("、")},[Ie("已选标签: "+ie(u(e.tagValue.textVideoTags).map(L=>L.label).join("、"))+" ",1),e.isGroupModeActive?(f(),I("span",w_)):X("",!0)],8,__)),l("div",{class:"continue-select-btn",onClick:r[23]||(r[23]=L=>e.isGroupModeActive?null:c("textVideo")),style:ye(e.isGroupModeActive?{cursor:"not-allowed",opacity:.6}:{})},[l("i",I_,[w(n(Je))]),r[46]||(r[46]=l("span",null,"继续选择",-1))],4)]),l("div",{class:"music-card-content",onClick:r[24]||(r[24]=L=>{L.stopPropagation()})},[l("div",T_,[l("div",x_,[r[47]||(r[47]=l("div",{class:"setting-label"},"内容",-1)),w(C,{"model-value":e.endSearchBoxText,"onUpdate:modelValue":_,placeholder:"请输入搜索框显示的文本",clearable:""},null,8,["model-value"])])])])],4)):(f(),I("div",{key:2,class:"select-material-btn",onClick:r[26]||(r[26]=L=>e.isGroupModeActive?null:c("lastFrames")),style:ye(e.isGroupModeActive?{cursor:"not-allowed",opacity:.6}:{})},[l("i",F_,[w(n(Je))]),r[48]||(r[48]=l("span",null,"选择尾帧",-1)),e.isGroupModeActive?(f(),I("span",S_)):X("",!0)],4)),l("div",{class:"upload-btn",onClick:r[27]||(r[27]=L=>e.isGroupModeActive?null:i(e.checkedData.checkedTextVideos.length?"textVideo":"lastFrames")),style:ye(e.isGroupModeActive||e.formData.count===(((re=e.checkedData.checkedLastFrames)==null?void 0:re.length)||((G=e.checkedData.checkedTextVideos)==null?void 0:G.length))?{cursor:"not-allowed",opacity:.6}:{})},[l("i",E_,[w(n(st))]),e.isGroupModeActive?(f(),I("span",$_)):X("",!0)],4)])])],512),[[pt,e.showMaterialConfig]])])])}}},P_=ot(R_,[["__scopeId","data-v-41423abb"]]),O_={class:"dialog-footer"},V_={__name:"SaveMainContentSectionDialog",props:{dialogVisible:{type:Boolean,default:!1},formData:{type:Object,default:()=>({})}},emits:["update:dialogVisible","confirm","load"],setup(e,{emit:o}){const t=e,s=o,a=M({get:()=>t.dialogVisible,set:v=>s("update:dialogVisible",v)}),c=E(),i=Be({configName:""}),u={configName:[{required:!0,message:"请输入配置名称",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}]},p=()=>{var v;a.value=!1,(v=c.value)==null||v.resetFields()},y=()=>{var v;a.value=!1,(v=c.value)==null||v.resetFields()},_=()=>{var v;(v=c.value)==null||v.validate($=>{var S;if($){let m=JSON.parse(localStorage.getItem("videoConfigs")||"[]");const r=Date.now().toString(),T={id:r,configName:i.configName,fontFamily:t.formData.fontFamily,novelFontSize:t.formData.novelFontSize,novelStrokeWidth:t.formData.novelStrokeWidth,novelColorMode:t.formData.novelColorMode,novelForegroundColor:t.formData.novelForegroundColor,novelBackgroundColor:t.formData.novelBackgroundColor,novelStrokeColor:t.formData.novelStrokeColor,novelTopMargin:t.formData.novelTopMargin,novelVolume:t.formData.novelVolume};m.push(T),localStorage.setItem("videoConfigs",JSON.stringify(m)),s("confirm",{config:T,id:r}),(S=c.value)==null||S.resetFields(),a.value=!1}else return!1})};return(v,$)=>{const S=oo,m=ho,r=ls,T=Mt,b=Ja;return f(),se(b,{modelValue:a.value,"onUpdate:modelValue":$[2]||($[2]=C=>a.value=C),title:"保存正文配置",width:"400","before-close":p},{footer:V(()=>[l("div",O_,[w(T,{onClick:y},{default:V(()=>$[3]||($[3]=[Ie("取消")])),_:1,__:[3]}),w(T,{type:"primary",onClick:_},{default:V(()=>$[4]||($[4]=[Ie("保存")])),_:1,__:[4]})])]),default:V(()=>[w(r,{model:i,"label-width":"auto",rules:u,ref_key:"formRef",ref:c,onSubmit:$[1]||($[1]=Re(()=>{},["prevent"]))},{default:V(()=>[w(m,{label:"配置名称",prop:"configName"},{default:V(()=>[w(S,{modelValue:i.configName,"onUpdate:modelValue":$[0]||($[0]=C=>i.configName=C),placeholder:"请输入配置名称",onKeyup:_t(_,["enter"])},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}},L_=ot(V_,[["__scopeId","data-v-368545d7"]]),B_={class:"main-collapse-icon"},A_={key:0},j_={key:1},Q_={class:"settings-container"},H_={class:"config-actions"},M_={class:"config-select-wrapper"},U_={class:"setting-block"},z_={class:"form-group"},N_={class:"form-row"},K_={class:"form-column"},D_={class:"form-column"},X_={class:"form-group"},G_={key:0},Y_={class:"form-group",style:{display:"flex"}},q_={class:"form-group"},W_={class:"setting-block"},Z_={class:"form-group"},J_={__name:"MainContentSection",props:{formData:{type:Object,required:!0},fontFamilyOptions:{type:Array,required:!0},showTextConfig:{type:Boolean,required:!0}},emits:["update:showTextConfig","update:formData","randomizeColors"],setup(e,{expose:o,emit:t}){const s=so(),a=e,c=t,i=M({get:()=>20*Math.log10(Math.max(1e-4,a.formData.novelVolume)),set:h=>{const x={...a.formData,novelVolume:Math.max(1e-4,Math.pow(10,h/20))};c("update:formData",x),g()}}),u=E(!1),p=E(!1),y=E(!1),_=E([]),v=E(""),$=()=>{c("update:showTextConfig",!a.showTextConfig)},S=()=>{u.value=!u.value},m=()=>{p.value=!p.value},r=()=>{const h=hr(),x={...a.formData,novelForegroundColor:h.fill,novelBackgroundColor:h.background_color,novelStrokeColor:h.stroke_fill};c("update:formData",x)},T=(h,x)=>{const R={...a.formData};R[h]=x,c("update:formData",R),g()},b=()=>{y.value=!0},C=h=>{d(),h&&h.id&&(v.value=h.id),ge.success("正文配置已保存")},d=()=>{try{const h=JSON.parse(localStorage.getItem("videoConfigs")||"[]");if(_.value=h,h.length>0){const x=h[h.length-1];v.value=x.id||x.configName,k()}}catch(h){console.error("加载配置失败",h),_.value=[]}},k=()=>{if(!v.value){const x=localStorage.getItem("videoConfig");if(x){const R=JSON.parse(x);c("update:formData",{...a.formData,...R})}return}const h=_.value.find(x=>x.id===v.value);if(h){const x={...a.formData,fontFamily:h.fontFamily,novelFontSize:h.novelFontSize,novelStrokeWidth:h.novelStrokeWidth,novelColorMode:h.novelColorMode,novelForegroundColor:h.novelForegroundColor,novelBackgroundColor:h.novelBackgroundColor,novelStrokeColor:h.novelStrokeColor,novelTopMargin:h.novelTopMargin,novelVolume:h.novelVolume};c("update:formData",x)}else ge.warning("未找到所选配置")},g=()=>{v.value&&(v.value="")};return Le(()=>{d(),s.isFromHistoryTask&&(v.value=""),s.setIsFromHistoryTask(!1)}),Lt(()=>{We.off("jumpToNovelTask")}),o({loadSavedVideoConfigs:d}),(h,x)=>{const R=Vs,j=Os,F=ho,B=os,Y=Mt,D=fl,Z=ss;return f(),I(Ee,null,[l("div",{class:N(["main-section",{"main-section-active":e.showTextConfig}])},[l("div",{class:"main-header",onClick:$},[x[10]||(x[10]=l("h3",null,"正文",-1)),l("div",B_,[e.showTextConfig?(f(),I("span",A_,"−")):(f(),I("span",j_,"+"))])]),l("div",{class:N(["main-content",{hidden:!e.showTextConfig}])},[l("div",Q_,[l("div",H_,[l("button",{class:"config-action-btn",onClick:b},"保存配置"),l("div",M_,[w(j,{modelValue:v.value,"onUpdate:modelValue":x[0]||(x[0]=Q=>v.value=Q),placeholder:"请选择配置",onChange:k,style:{width:"150px",height:"32px"}},{default:V(()=>[(f(!0),I(Ee,null,He(_.value,Q=>(f(),se(R,{key:Q.id||Q.configName,label:Q.configName,value:Q.id||Q.configName},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),l("div",U_,[l("div",{class:"setting-header",onClick:S},[x[11]||(x[11]=l("div",{class:"setting-title"},"文字样式",-1)),l("div",{class:N(["setting-collapse-icon",{collapsed:!u.value}])},"▼",2)]),l("div",{class:N(["setting-content",{hidden:!u.value}])},[l("div",z_,[w(F,{label:"字体",prop:"fontFamily","label-position":"top"},{default:V(()=>[w(j,{"model-value":e.formData.fontFamily,"onUpdate:modelValue":x[1]||(x[1]=Q=>T("fontFamily",Q)),placeholder:"选择字体",filterable:""},{default:V(()=>[(f(!0),I(Ee,null,He(e.fontFamilyOptions,Q=>(f(),se(R,{key:Q.id,label:Q.name,value:Q.id},null,8,["label","value"]))),128))]),_:1},8,["model-value"])]),_:1})]),l("div",N_,[l("div",K_,[w(F,{label:"字号",prop:"novelFontSize","label-position":"top"},{default:V(()=>[w(B,{"model-value":e.formData.novelFontSize,"onUpdate:modelValue":x[2]||(x[2]=Q=>T("novelFontSize",Q)),min:1,max:100,label:"字号"},null,8,["model-value"])]),_:1})]),l("div",D_,[w(F,{label:"描边宽度",prop:"novelStrokeWidth","label-position":"top"},{default:V(()=>[w(B,{"model-value":e.formData.novelStrokeWidth,"onUpdate:modelValue":x[3]||(x[3]=Q=>T("novelStrokeWidth",Q)),min:1,max:20,step:1},null,8,["model-value"])]),_:1})])]),l("div",X_,[e.formData.novelColorMode?(f(),I("div",G_,[w(Y,{onClick:r},{default:V(()=>x[12]||(x[12]=[Ie("生成随机配色")])),_:1,__:[12]})])):X("",!0)]),l("div",Y_,[w(F,{label:"字体色",prop:"novelForegroundColor","label-position":"top"},{default:V(()=>[w(D,{"model-value":e.formData.novelForegroundColor,"onUpdate:modelValue":x[4]||(x[4]=Q=>T("novelForegroundColor",Q)),"show-alpha":""},null,8,["model-value"])]),_:1}),w(F,{label:"背景色",prop:"novelBackgroundColor","label-position":"top"},{default:V(()=>[w(D,{"model-value":e.formData.novelBackgroundColor,"onUpdate:modelValue":x[5]||(x[5]=Q=>T("novelBackgroundColor",Q)),"show-alpha":""},null,8,["model-value"])]),_:1}),w(F,{label:"描边颜色",prop:"novelStrokeColor","label-position":"top"},{default:V(()=>[w(D,{"model-value":e.formData.novelStrokeColor,"onUpdate:modelValue":x[6]||(x[6]=Q=>T("novelStrokeColor",Q)),"show-alpha":""},null,8,["model-value"])]),_:1})]),l("div",q_,[w(F,{label:"顶部距离",prop:"novelTopMargin","label-position":"top"},{default:V(()=>[w(Z,{"model-value":e.formData.novelTopMargin,"onUpdate:modelValue":x[7]||(x[7]=Q=>T("novelTopMargin",Q)),min:0,max:1,step:.001,style:{width:"300px"}},null,8,["model-value"])]),_:1})])],2)]),l("div",W_,[l("div",{class:"setting-header",onClick:m},[x[13]||(x[13]=l("div",{class:"setting-title"},"音量设置",-1)),l("div",{class:N(["setting-collapse-icon",{collapsed:!p.value}])},"▼",2)]),l("div",{class:N(["setting-content",{hidden:!p.value}])},[l("div",Z_,[x[14]||(x[14]=l("label",null,"音量大小",-1)),w(Z,{modelValue:i.value,"onUpdate:modelValue":x[8]||(x[8]=Q=>i.value=Q),min:-20,max:20,step:.1,"format-tooltip":Q=>Q.toFixed(1)+" dB"},null,8,["modelValue","format-tooltip"])])],2)])])],2)],2),w(L_,{dialogVisible:y.value,"onUpdate:dialogVisible":x[9]||(x[9]=Q=>y.value=Q),formData:e.formData,onConfirm:C},null,8,["dialogVisible","formData"])],64)}}},ew=ot(J_,[["__scopeId","data-v-14d3148e"]]),tw={class:"dialog-content"},ow={class:"main-content"},sw={class:"left-side"},lw={class:"task-info-section"},aw={class:"task-info-card"},nw={class:"card-content"},iw={class:"task-info-section"},rw={class:"task-info-card title-card"},cw={class:"collapse-icon"},uw={key:0},dw={key:1},fw={class:"card-content"},vw={class:"title-section"},pw={class:"config-actions"},mw={class:"title-section"},gw={class:"section-title"},hw={class:"first-frame-settings-wrapper"},yw={class:"config-actions"},kw={key:0,class:"empty-first-frame-tip"},bw=6,Cw=4,_w={__name:"index",setup(e){const o=so(),t="/api/",s=Be({taskName:"",fontFamily:"",novelFontSize:35,lineHeight:1.5,scrollStart:0,novelStrokeWidth:2,novelColorMode:!1,novelForegroundColor:"rgba(255, 255, 255, 1)",novelBackgroundColor:"rgba(255, 255, 0, 1)",novelStrokeColor:"rgba(0, 0, 0, 1)",novelTopMargin:.7,novelVolume:1,count:1,groupCount:0,firstFrameVideo:[],firstFrameKeepAudio:!0,selectedAudio:"",musicStartPosition:"首帧",fixedTitle:[],previewUnzipVideoList:[],template:"",volume:1,pre_video_volume:1}),a=M({get:()=>20*Math.log10(Math.max(1e-4,s.volume)),set:ze=>{s.volume=Math.max(1e-4,Math.pow(10,ze/20))}}),c=M({get:()=>20*Math.log10(Math.max(1e-4,s.pre_video_volume)),set:ze=>{s.pre_video_volume=Math.max(1e-4,Math.pow(10,ze/20))}}),i=Be({checkedFirstFrames:[],checkedMusic:[],checkedLastFrames:[],checkedStickers:[],checkedNovel:[],checkedVideo:[],checkedTopVideo:[],checkedTextImages:[],checkedTextVideos:[]}),u=Be({groupStickers:[],groupLastFrames:[],groupTextImages:[],groupTextVideos:[],groupTextImageTexts:[],groupTextVideoTexts:[],groupNames:[]}),p=E(null),y=E(null),_=M(()=>Ce.isGroupModeActive.value),v=Be({novelTags:[],firstFramesTags:[],unzipVideoTag:[],topVideoTags:[],musicTags:[],stickersTags:[],textImageTags:[],lastFrameTags:[],textVideoTags:[]}),$=Be({novelComponentList:[],firstFramesComponentList:[],musicComponentList:[],lastFramesComponentList:[],stickersComponentList:[],videoComponentList:[],topVideoComponentList:[],textImagesComponentList:[],textVideosComponentList:[]}),S=Be({novelActiveTab:"",firstFramesActiveTab:"",videoActiveTab:"",topVideoActiveTab:"",musicActiveTab:"",stickersActiveTab:"",textImagesActiveTab:"",lastFramesActiveTab:"",textVideosActiveTab:""}),m=Be({novel:{start_date:"",end_date:""},firstFrames:{start_date:"",end_date:""},video:{start_date:"",end_date:""},topVideo:{start_date:"",end_date:""},music:{start_date:"",end_date:""},stickers:{start_date:"",end_date:""},textImage:{start_date:"",end_date:""},lastFrames:{start_date:"",end_date:""},textVideo:{start_date:"",end_date:""}}),r=Be({novel:!0,firstFrames:!0,video:!0,topVideo:!0,music:!0,stickers:!0,textImage:!0,lastFrames:!0,textVideo:!0}),T=E(!1),b=E(!1),C=E(!1),d=E(!0),k=E(""),g=E(""),h=E(null);Le(()=>{h.value&&Ce.setLoadConfigFn(h.value.loadSavedVideoConfigs)});const x=()=>{b.value=!b.value,b.value&&(T.value=!1,C.value=!1)},R=({type:ze,from:xe})=>{be.handleMaterialSelect({type:ze,from:xe})},j=({type:ze,from:xe})=>{$e.uploadMaterial(ze,xe)},F=M(()=>i&&Array.isArray(i.checkedFirstFrames)&&i.checkedFirstFrames.length>0),B=ze=>{if(ze==="fixed"){const xe={fixedTitle:s.fixedTitle.map(at=>({...at,text:""}))};localStorage.setItem("fixedTitleConfig",JSON.stringify(xe))}else{const xe={firstFrameVideo:s.firstFrameVideo.map(at=>({...at,text:""}))};localStorage.setItem("createVideoFirstTitleConfig",JSON.stringify(xe))}ge.success("配置已保存")},Y=ze=>{if(ze==="fixed"){const xe=localStorage.getItem("fixedTitleConfig");if(xe){const at=JSON.parse(xe);Object.assign(s,at)}}else{const xe=localStorage.getItem("createVideoFirstTitleConfig");if(xe){const at=JSON.parse(xe);Object.assign(s,at)}}},D=E(),Z=E(-1),Q=E(-1),P=E(-1),O=E(-1),U=E(-1),ae=E(-1),ue=()=>{Y("fixed"),Y("first")},oe=()=>{const ze=localStorage.getItem("relaxFormDataMusicVolume");ze&&(s.volume=JSON.parse(ze))};Le(async()=>{await kn({baseUrl:t,fontFamilyOptions:re,formData:s}),ue(),oe(),J(),We.on("jumpToNovelTask",ze=>{ze.category==="Relaxation"&&J()})});const H=ze=>{Object.assign(s,ze)},re=E([]),{renderPreviewFirstFrameUrl:G,renderPreviewVideoUrl:L,renderPreviewLastFrameUrl:ne,renderPreviewStickerUrl:fe,renderPreviewTextImageUrl:A,renderPreviewTextVideoUrl:K,initializeTaskData:J,renderPreviewFirstFrameId:ce,renderPreviewVideoId:pe,renderPreviewLastFrameId:ve,renderPreviewStickerId:he,renderPreviewTextImageId:Pe,renderPreviewTextVideoId:_e}=Jb(s,i,v,m,Z,P,ae,Q,u,k,g),W=E(0),Fe=E(""),$e=tC(s,i,v,m,u,r,Fe,W,_,p,y,D,G,L,ne,fe,A,K,ce,pe,ve,he,Pe,_e,Z,P,Q,O,U,ae),be=oC(s,i,v,m,$,S,r,G,ce,L,pe,ne,ve,fe,he,A,Pe,K,_e,Z,P,Q,O,U,ae,_),Ce=eC(s,i,v,m,u,r,k,g,We,re,$,S,ue,oe),te=E(Ce.rules),ee=E(Ce.generateVideo),q=E(Ce.createVideoDisabled),z=[{label:"正片",value:"正片"},{label:"首帧",value:"首帧"}],le=()=>{ee.value&&ee.value(D.value)};sC({checkedData:i,currentFirstFrameIndex:Z,currentLastFrameIndex:Q,currentUnzipVideoIndex:P,currentStickerIndex:O,currentTextImageIndex:U,currentTextVideoIndex:ae,mainSearchBoxText:k,endSearchBoxText:g,relaxFormData:s,baseUrl:t,showTextConfig:T,showTitleConfig:b,showMaterialConfig:C});const Ve=(ze,xe)=>{const at={firstFrame:{data:i.checkedFirstFrames,currentIndex:Z,url:G,id:ce},lastFrame:{data:i.checkedLastFrames,currentIndex:Q,url:ne,id:ve},unzipVideo:{data:i.checkedVideo,currentIndex:P,url:L,id:pe},stickers:{data:i.checkedStickers,currentIndex:O,url:fe,id:he},textImage:{data:i.checkedTextImages,currentIndex:U,url:A,id:Pe},textVideo:{data:i.checkedTextVideos,currentIndex:ae,url:K,id:_e}},{data:qt,currentIndex:Rt,url:Xe,id:Qo,extraUpdate:_o}=at[ze],wo=qt.length-1,Wt=xe==="next"?Math.min(Rt.value+1,wo):Math.max(Rt.value-1,0);if(Wt===Rt.value||Wt<0||Wt>wo)return;Rt.value=Wt;const Ho=qt[Wt];Xe.value=Ho.key_frame_url||Ho.file_url,Qo.value=Ho.id,_o&&_o(Wt)},we=ze=>Ve(ze,"prev"),je=ze=>Ve(ze,"next");Lt(()=>{o.setTaskGenerateParams({})});const mt=({type:ze,groupIndex:xe})=>{W.value=xe,be.selectMaterial(ze,null,!0),$e.isGroupSelection.value=!0},$t=ze=>{Object.assign(u,ze)},Ut=(ze,xe,at,qt,Rt,Xe,Qo,_o,wo)=>{be.transferCheckedList(ze,xe,at,qt,Rt,Xe,Qo,_o,wo,$e.isGroupSelection.value,u,W),$e.isGroupSelection.value=!1,$e.currentUploadType.value=""},bo=()=>{be.handleCloseDialog(),$e.isGroupSelection.value=!1,$e.currentUploadType.value=""},Co=()=>{b.value=!0,C.value=!1,T.value=!1};return(ze,xe)=>{const at=ul,qt=ls,Rt=nn;return f(),I(Ee,null,[w(Rt,{class:"create-task-card"},{default:V(()=>[l("div",tw,[l("div",ow,[l("div",sw,[w(qt,{model:s,"label-width":"100px",rules:te.value,ref_key:"ruleFormRef",ref:D,onSubmit:xe[13]||(xe[13]=Re(()=>{},["prevent"])),onKeydown:xe[14]||(xe[14]=_t(Re(()=>{},["prevent"]),["enter"])),"require-asterisk-position":"right"},{default:V(()=>[w(wi,{"form-data":s,"onUpdate:formData":H},null,8,["form-data"]),l("div",lw,[l("div",aw,[xe[20]||(xe[20]=l("div",{class:"card-header"},[l("div",{class:"card-title"},"视频配置")],-1)),l("div",nw,[w(Ti,{checkedData:i,isFromMaterialChecked:r,tagValue:v,onSelectMaterial:xe[0]||(xe[0]=Xe=>R({type:Xe})),onUploadMaterial:xe[1]||(xe[1]=Xe=>j({type:Xe}))},null,8,["checkedData","isFromMaterialChecked","tagValue"]),w(ew,{formData:s,fontFamilyOptions:re.value,showTextConfig:T.value,"onUpdate:showTextConfig":xe[2]||(xe[2]=Xe=>T.value=Xe),"onUpdate:formData":H,ref_key:"mainContentRef",ref:h},null,8,["formData","fontFamilyOptions","showTextConfig"]),w(Ii,{videoType:"Relaxation",formData:s,groupData:u,showGroupConfig:d.value,checkedData:i,"onUpdate:showGroupConfig":xe[3]||(xe[3]=Xe=>d.value=Xe),"onUpdate:groupData":$t,onSelectGroupMaterial:mt,onUploadMaterial:n($e).uploadMaterial},null,8,["formData","groupData","showGroupConfig","checkedData","onUploadMaterial"]),w(P_,{formData:s,checkedData:i,tagValue:v,rules:te.value,musicStartPositionOptions:z,musicDbValue:a.value,mainSearchBoxText:k.value,endSearchBoxText:g.value,showMaterialConfig:C.value,isGroupModeActive:_.value,isFromMaterialChecked:r,preVideoDbValue:c.value,"onUpdate:showMaterialConfig":xe[4]||(xe[4]=Xe=>C.value=Xe),"onUpdate:musicDbValue":xe[5]||(xe[5]=Xe=>a.value=Xe),"onUpdate:mainSearchBoxText":xe[6]||(xe[6]=Xe=>k.value=Xe),"onUpdate:endSearchBoxText":xe[7]||(xe[7]=Xe=>g.value=Xe),"onUpdate:formData":H,onSelectMaterial:R,onUploadMaterial:j,"onUpdate:preVideoDbValue":xe[8]||(xe[8]=Xe=>c.value=Xe),onOpenTitleSettings:Co},null,8,["formData","checkedData","tagValue","rules","musicDbValue","mainSearchBoxText","endSearchBoxText","showMaterialConfig","isGroupModeActive","isFromMaterialChecked","preVideoDbValue"]),l("div",iw,[l("div",rw,[l("div",{class:"card-header",onClick:x},[xe[15]||(xe[15]=l("div",{class:"card-title"},"标题",-1)),l("div",cw,[b.value?(f(),I("span",uw,"−")):(f(),I("span",dw,"+"))])]),qe(l("div",fw,[l("div",vw,[xe[16]||(xe[16]=l("h4",{class:"section-title"},"固定标题",-1)),l("div",pw,[l("button",{class:"config-action-btn",onClick:xe[9]||(xe[9]=Xe=>B("fixed"))}," 保存配置 ")]),w(Na,{formData:s,checkedData:i,fontFamilyOptions:re.value,type:"fixed","onUpdate:formData":xe[10]||(xe[10]=Xe=>Object.assign(s,Xe))},null,8,["formData","checkedData","fontFamilyOptions"])]),l("div",mw,[l("h4",gw,[xe[18]||(xe[18]=Ie(" 首帧标题 ")),F.value?X("",!0):(f(),se(at,{key:0,size:"small",type:"info",class:"inactive-tag"},{default:V(()=>xe[17]||(xe[17]=[Ie(" 需选择首帧视频 ")])),_:1,__:[17]}))]),l("div",hw,[l("div",yw,[l("button",{class:"config-action-btn",onClick:xe[11]||(xe[11]=Xe=>B("first"))}," 保存配置 ")]),w(Na,{formData:s,checkedData:i,fontFamilyOptions:re.value,type:"firstFrame",disabled:!F.value,"onUpdate:formData":xe[12]||(xe[12]=Xe=>Object.assign(s,Xe))},null,8,["formData","checkedData","fontFamilyOptions","disabled"]),F.value?X("",!0):(f(),I("div",kw,xe[19]||(xe[19]=[l("div",{class:"tip-content"},' 请先在"素材"中选择首帧视频，才能添加首帧标题 ',-1)])))])])],512),[[pt,b.value]])])])])])])]),_:1},8,["model","rules"])]),w(ZC,{formData:s,checkedData:i,fontFamilyOptions:re.value,baseUrl:n(t),renderPreviewFirstFrameUrl:n(G),renderPreviewVideoUrl:n(L),renderPreviewLastFrameUrl:n(ne),renderPreviewStickerUrl:n(fe),renderPreviewTextImageUrl:n(A),renderPreviewTextVideoUrl:n(K),currentFirstFrameIndex:Z.value,currentUnzipVideoIndex:P.value,currentLastFrameIndex:Q.value,currentTextVideoIndex:ae.value,firstAndLastVideoZoom:bw,videoFontZoom:Cw,createVideoDisabled:q.value,count:s.count,groupCount:s.groupCount,onSwitchToPrevious:we,onSwitchToNext:je,onGenerateVideo:le},null,8,["formData","checkedData","fontFamilyOptions","baseUrl","renderPreviewFirstFrameUrl","renderPreviewVideoUrl","renderPreviewLastFrameUrl","renderPreviewStickerUrl","renderPreviewTextImageUrl","renderPreviewTextVideoUrl","currentFirstFrameIndex","currentUnzipVideoIndex","currentLastFrameIndex","currentTextVideoIndex","createVideoDisabled","count","groupCount"])])])]),_:1}),n(be).selectDialogVisible.value?(f(),se(n(_i),{key:0,ref:"comSelectDialogRef",title:n(be).dialogTitle,tabType:n(be).tabType.value,count:n($e).isGroupSelection.value?1:s.count,propCheckedList:n(be).getCheckedListByType(n(be).tabType.value,n(be).videoFrom.value,n($e).isGroupSelection.value,u,W.value),propComponentList:n(be).getComponentListByType(n(be).tabType.value),propTagsObject:n(be).tagsObject,propActiveTabType:n(be).getActiveTabByType(n(be).tabType.value),onSubmit:Ut,onCloseDialog:bo,from:n(be).videoFrom.value,isFromReading:!1,isGroupSelection:n($e).isGroupSelection.value},null,8,["title","tabType","count","propCheckedList","propComponentList","propTagsObject","propActiveTabType","from","isGroupSelection"])):X("",!0),w(n(Bl),{ref_key:"createVideoRef",ref:p,onSubmitForm:n($e).handleSubmitFormRes,"v-loading":n($e).uploadLoading,propUploadTypeChange:n($e).propUploadTypeChange.value,propUploadTypeDisabled:n($e).propUploadTypeDisabled.value},null,8,["onSubmitForm","v-loading","propUploadTypeChange","propUploadTypeDisabled"]),w(n(Ll),{ref_key:"createNovelRef",ref:y,onSubmitForm:n($e).handleSubmitNovelRes,"v-loading":n($e).uploadLoading},null,8,["onSubmitForm","v-loading"])],64)}}},ww=ot(_w,[["__scopeId","data-v-84b51a63"]]),Iw={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"};function Tw(e,o){return f(),I("svg",Iw,o[0]||(o[0]=[l("path",{fill:"currentColor",d:"M317.056 128L128 344.064V896h768V344.064L706.944 128zm-14.528-64h418.944a32 32 0 0 1 24.064 10.88l206.528 236.096A32 32 0 0 1 960 332.032V928a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V332.032a32 32 0 0 1 7.936-21.12L278.4 75.008A32 32 0 0 1 302.528 64"},null,-1),l("path",{fill:"currentColor",d:"M64 320h896v64H64z"},null,-1),l("path",{fill:"currentColor",d:"M448 327.872V640h128V327.872L526.08 128h-28.16zM448 64h128l64 256v352a32 32 0 0 1-32 32H416a32 32 0 0 1-32-32V320z"},null,-1)]))}const xw=eo({name:"ep-box",render:Tw}),Fw={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"};function Sw(e,o){return f(),I("svg",Fw,o[0]||(o[0]=[l("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896a448 448 0 0 1 0-896m0 832a384 384 0 0 0 0-768a384 384 0 0 0 0 768m48-176a48 48 0 1 1-96 0a48 48 0 0 1 96 0m-48-464a32 32 0 0 1 32 32v288a32 32 0 0 1-64 0V288a32 32 0 0 1 32-32"},null,-1)]))}const Ew=eo({name:"ep-warning",render:Sw}),$w={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"};function Rw(e,o){return f(),I("svg",$w,o[0]||(o[0]=[l("path",{fill:"currentColor",d:"M160 832h704a32 32 0 1 1 0 64H160a32 32 0 1 1 0-64m384-253.696l236.288-236.352l45.248 45.248L508.8 704L192 387.2l45.248-45.248L480 584.704V128h64z"},null,-1)]))}const Pw=eo({name:"ep-download",render:Rw}),Ow={class:"pack-queue-panel"},Vw={class:"header-title"},Lw={key:0,class:"task-count"},Bw={class:"header-actions"},Aw={class:"panel-content"},jw={key:0,class:"empty-queue"},Qw={key:1,class:"queue-list"},Hw={class:"queue-item-content"},Mw={class:"queue-item-status"},Uw={class:"queue-item-info"},zw=["title"],Nw={class:"queue-details"},Kw={key:0,class:"queue-time"},Dw={key:1,class:"progress-bar-wrapper"},Xw={class:"progress-text"},Gw={class:"queue-item-actions"},Yw={__name:"PackQueueDrawer",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{expose:o,emit:t}){const s=e,a=t,c=M({get:()=>s.modelValue,set:F=>{a("update:modelValue",F)}}),i=E([]);let u=null;const p=new Set,y=E(null),_=E({right:80,bottom:80}),v=E(!1),$=E({x:0,y:0}),S=M(()=>({right:`${_.value.right}px`,bottom:`${_.value.bottom}px`})),m=F=>{F.preventDefault(),v.value=!0,$.value={x:F.clientX,y:F.clientY};const B={right:_.value.right,bottom:_.value.bottom};document.addEventListener("mousemove",Y),document.addEventListener("mouseup",D);function Y(Z){if(!v.value)return;const Q=Z.clientX-$.value.x,P=Z.clientY-$.value.y;_.value={right:Math.max(10,B.right-Q),bottom:Math.max(10,B.bottom-P)}}function D(){v.value=!1,document.removeEventListener("mousemove",Y),document.removeEventListener("mouseup",D)}},r=Be({page:1,pageSize:99}),T=async()=>{try{const F=await dl(r);if(F.code===0){const B=[...i.value];i.value=F.data.list||[],i.value.forEach(D=>{if(D.status==="Success"){const Z=B.find(Q=>Q.id===D.id);Z&&Z.status!=="Success"&&!p.has(D.id)&&(p.add(D.id),ra({title:"打包完成",message:`任务 "${D.name}" 已完成打包，可以下载了`,type:"success",duration:5e3,onClick:()=>{c.value=!0}}))}else if(D.status==="Failed"){const Z=B.find(Q=>Q.id===D.id);Z&&Z.status!=="Failed"&&!p.has(`failed_${D.id}`)&&(p.add(`failed_${D.id}`),ra({title:"打包失败",message:`任务 "${D.name}" 打包失败，请重试`,type:"error",duration:5e3,onClick:()=>{c.value=!0}}))}}),i.value.some(D=>D.status==="Pending")?g():h()}}catch(F){console.error("获取打包队列失败:",F)}},b=async F=>{try{const Y=`${"/api/".replace(/\/$/,"")}/gzip/download/${F.id}`,D=await fetch(Y),Z=D.headers.get("content-type");if(Z&&Z.includes("application/json")){const P=await D.json();if(P.code===10001){ge.error("文件已过期，请重新打包");return}ge.error(P.message||"下载失败");return}const Q=document.createElement("a");Q.href=Y,Q.style.display="none",document.body.appendChild(Q),Q.click(),document.body.removeChild(Q),ge.success("下载开始"),T()}catch(B){console.error("下载失败:",B),ge.error("下载失败，请稍后再试")}},C=async F=>{try{const B=await Pr(F.id);B.code===0?(ge.success("已重新提交打包"),We.emit("packQueueUpdated"),T()):ge.error(B.message||"重试失败")}catch(B){We.emit("packQueueUpdated"),console.error("重试打包失败:",B),ge.error("重试失败，请稍后再试")}},d=async(F,B=!0)=>{try{const Y=await Or(F.id);Y.code===0?(ge.success("已删除打包任务"),We.emit("packQueueUpdated"),T()):ge.error(Y.message||"清空失败")}catch(Y){return console.error("删除打包任务失败:",Y),B&&ge.error("删除打包任务失败"),!1}};let k=!1;const g=()=>{h(),!k&&(k=!0,u=setInterval(()=>{T()},3e3))},h=()=>{u&&(clearInterval(u),u=null,k=!1)},x=()=>{_.value={right:80,bottom:80},c.value=!0,T(),g()},R=()=>{c.value=!1,h()},j=async()=>{hn.confirm("确定要清空所有打包任务吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",customClass:"resource-list-dialog",showClose:!0,beforeClose:async(F,B,Y)=>{F==="confirm"&&(B.confirmButtonLoading=!0,B.confirmButtonText="清空中..."),Y()}}).then(async()=>{try{const F=await Rr();F.code===0?(ge.success("已清空打包队列"),i.value=[],We.emit("packQueueUpdated"),T()):ge.error(F.message||"清空失败")}catch(F){console.error("清空打包队列失败:",F),ge.error("清空队列失败，请稍后重试")}}).catch(()=>{})};return Le(()=>{}),ut(()=>{h()}),o({openDrawer:x,fetchPackQueue:T,visible:c}),(F,B)=>{const Y=yr,D=$o,Z=Mt,Q=tn,P=kr,O=br,U=on,ae=sn,ue=Pw,oe=ln;return qe((f(),I("div",{class:"pack-queue-float-container",style:ye(S.value),ref_key:"floatContainer",ref:y},[l("div",Ow,[l("div",{class:"panel-header",onMousedown:m},[l("div",Vw,[B[0]||(B[0]=Ie(" 打包队列 ")),i.value.length?(f(),I("small",Lw,ie(i.value.length)+"个任务",1)):X("",!0)]),l("div",Bw,[w(Q,{content:"一键清空",placement:"top",disabled:!i.value.length},{default:V(()=>[w(Z,{onClick:j,link:"",type:"info",size:"small",class:"clear-btn",disabled:!i.value.length},{default:V(()=>[w(D,null,{default:V(()=>[w(Y)]),_:1})]),_:1},8,["disabled"])]),_:1},8,["disabled"]),w(Z,{onClick:R,link:"",type:"danger",size:"small",class:"close-btn"},{default:V(()=>[w(D,null,{default:V(()=>[w(P)]),_:1})]),_:1})])],32),l("div",Aw,[i.value.length===0?(f(),I("div",jw,[w(O,{description:"暂无打包任务","image-size":50})])):(f(),I("div",Qw,[(f(!0),I(Ee,null,He(i.value,(H,re)=>(f(),I("div",{key:re,class:N(["queue-item",{active:H.status==="Success",Pending:H.status==="Pending",Failed:H.status==="Failed"}])},[l("div",Hw,[l("div",Mw,[H.status==="Pending"?(f(),se(D,{key:0,class:"status-icon"},{default:V(()=>[w(U)]),_:1})):H.status==="Success"?(f(),se(D,{key:1,class:"status-icon"},{default:V(()=>[w(ae)]),_:1})):H.status==="Failed"?(f(),se(D,{key:2,class:"status-icon"},{default:V(()=>[w(P)]),_:1})):X("",!0)]),l("div",Uw,[l("div",{class:"queue-name",title:H.name},ie(H.name),9,zw),l("div",Nw,[l("span",{class:N(["queue-status-text",H.status])},ie(H.status==="Pending"?"打包中":H.status==="Success"?"已完成":"打包失败"),3)]),H.status==="Success"?(f(),I("div",Kw,[l("div",null,"请在"+ie(H.expire_at)+"之前下载",1),B[1]||(B[1]=l("div",null,"超时可能过期",-1))])):X("",!0),H.status==="Pending"?(f(),I("div",Dw,[l("div",{class:"progress-bar",style:ye({width:`${H.progress_rate*100}%`})},null,4),l("span",Xw,ie(H.progress_rate*100||"0")+"%",1)])):X("",!0)]),l("div",Gw,[H.status==="Success"?(f(),se(Q,{key:0,content:"下载",placement:"top"},{default:V(()=>[w(Z,{type:"primary",size:"small",onClick:G=>b(H)},{default:V(()=>[w(D,null,{default:V(()=>[w(ue)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)):X("",!0),H.status==="Failed"?(f(),se(Q,{key:1,content:"重试",placement:"top"},{default:V(()=>[w(Z,{type:"warning",size:"small",onClick:G=>C(H)},{default:V(()=>[w(D,null,{default:V(()=>[w(oe)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)):X("",!0),H.status==="Pending"?(f(),se(Q,{key:2,content:"取消",placement:"top"},{default:V(()=>[w(Z,{type:"danger",size:"small",onClick:G=>d(H)},{default:V(()=>[w(D,null,{default:V(()=>[w(P)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)):X("",!0),["Success","Failed"].includes(H.status)?(f(),se(Q,{key:3,content:"删除",placement:"top"},{default:V(()=>[w(Z,{type:"info",size:"small",onClick:G=>d(H),style:{"margin-left":"0"}},{default:V(()=>[w(D,null,{default:V(()=>[w(Y)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)):X("",!0)])])],2))),128))]))])])],4)),[[pt,c.value]])}}},Al=ot(Yw,[["__scopeId","data-v-65046522"]]),qw={class:"table-wrapper"},Ww={class:"queue-info"},Zw={class:"flex items-center gap-[5px]"},Jw={class:"demo-pagination-block"},eI={class:"material-list"},tI={class:"name"},oI={class:"preview"},sI=["src","poster"],lI={class:"info"},aI={class:"details"},nI={class:"details"},iI={__name:"taskList",props:{videoType:{type:String,default:"ReadingSimu"},source:{type:String,default:"novel"}},setup(e,{expose:o}){const t=so(),s={QUEUING:"排队中",STOP:"已停止",PROGRESSING:"生成中",DONE:"已完成（全部成功）",STOP_PART_DONE:"已停止（部分成功）",DONE_PART_FAIL:"已完成（部分失败）"},a=E(!1),c=E([]),i=E([]),u="/api/",p=E(),y=E([]),_=E(!1),v=E("rtl"),$=E([]),S=E([]),m=E(0),r=Be({currentPage:1,pageSize:20,total:0}),T=Be({page:1,pageSize:99}),b=E(""),C=e,d=M(()=>C.source===lt.NOVEL),k=E(0),g=E(null),h=E(!1),x=E(!1);Le(()=>{F(),We.on("refreshHistoryList",()=>{F()}),ne()}),ut(()=>{});const R=A=>{A?i.value=c.value.map(K=>K.id):i.value=[]};me(x,A=>{},{deep:!0}),me(i,A=>{h.value=A.length===c.value.length},{deep:!0});const j=A=>{i.value=[],h.value=!1,A()},F=async(A,K="",J,ce)=>{A&&(b.value=K);try{a.value=!0;const pe=await Vr(!d.value,{page:J||r.currentPage,pagesize:ce||r.pageSize,name:b.value||""});if(pe.code===0){const ve=await D(pe.data.list.map(he=>he.id));if(ve){pe.data.list.forEach(Pe=>{const _e=ve[Pe.id]||{};_e.statusText=_e.status,delete _e.status,Pe=Object.assign(Pe,_e)});const he=await Z();m.value=he}$.value=pe.data.list,r.total=pe.data.count,a.value=!1}else throw ge.error("获取资源失败"),new Error(pe.message)}catch(pe){ge.error(pe)}},B={ReadingSimu:"模拟",Relaxation:"解压",ShortFilm:"短剧"},Y=A=>B[A]||A,D=async A=>(await Lr(!d.value,JSON.stringify({id_list:A}))).data,Z=async()=>(await Br(!d.value)).data,Q=A=>{r.pageSize=A,r.currentPage=1,F()},P=A=>{r.currentPage=A,F()};me(()=>C.videoType,A=>{A&&(r.currentPage=1,r.pageSize=20,F())});const O=async A=>{try{const K=await Ar(!d.value,A);if(K.code===0){if(d.value)t.setTaskGenerateParams(K.data),We.emit("jumpToNovelTask",K.data);else{const J=K.data;J.category="ShortFilm",t.setTaskGenerateParams(K.data),We.emit("jumpToShortPlayTask",K.data)}t.setIsFromHistoryTask(!0)}else ge.error(K.message||"获取资源失败")}catch(K){ge.error(K)}},U=async A=>{const K=S.value.reduce((ce,pe)=>(ce.task_ids=pe,ce),{}),J=Object.assign(K,{page:1,pagesize:60});try{const ce=await Hr(!d.value,J);if(ce.code===0)c.value=ce.data.list,A&&A(ce.data.list);else throw ge.error("获取资源失败"),new Error(ce.message)}catch(ce){ge.error(ce)}},ae=(A,K)=>{K||(_.value=!0);const J=[];J.push(A),S.value=J,U(K)},ue=A=>{y.value=A},oe=A=>{const K=A.target;document.querySelectorAll("video").forEach(ce=>{ce!==K&&ce.pause()})},H=async A=>{ae(A,async K=>{if(!K||K.length===0){ge.warning("没有可打包的视频");return}try{const J=await Mr(!d.value,A);J.code===0?(ge.success("已开始打包"),We.emit("packQueueUpdated"),We.emit("openPackQueueDrawer")):ge.error(J.message||"添加打包队列失败")}catch(J){ge.error("添加打包队列失败"),console.error(J)}})},re=A=>{hn.confirm("请确认是否需要提升本任务的优先级","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{if(!await Z()){ge.error("今日优先生成次数已用完");return}const J=d.value?{id:A}:{task_id:A};await jr(!d.value,J)&&ge.success("操作成功！")}).catch(()=>{})},G=A=>{const K=d.value?{id:A}:{task_id:A};Qr(!d.value,K).then(()=>{ge.success("操作成功！"),F()})},L=async()=>{if(!i.value.length){ge.warning("请先选择要打包的视频");return}try{const A=c.value.filter(ce=>i.value.includes(ce.id)),K={id_list:i.value},J=await un(!d.value,K);J.code===0?(ge.success("已开始打包"),i.value=[],h.value=!1,We.emit("packQueueUpdated"),We.emit("openPackQueueDrawer")):ge.error(J.message||"添加打包队列失败")}catch(A){ge.error("添加打包队列失败"),console.error(A)}},ne=()=>{fe()},fe=async()=>{try{const A=await dl(T);A.code===0&&(k.value=(A.data.list||[]).length)}catch(A){console.error("获取打包队列数量失败:",A)}};return o({getTaskList:F,packCount:k}),(A,K)=>{const J=Cr,ce=ul,pe=on,ve=$o,he=Ew,Pe=sn,_e=ln,W=Mt,Fe=tn,$e=wr,be=Zr,Ce=Ls,te=an,ee=Wr,q=gn;return f(),I(Ee,null,[l("div",qw,[qe((f(),se($e,{ref_key:"multipleTableRef",ref:p,data:$.value,style:{width:"100%"},onSelectionChange:ue},{default:V(()=>[w(J,{type:"selection",selectable:A.selectable,width:"55"},null,8,["selectable"]),w(J,{property:"name",label:"名称",width:"200","show-overflow-tooltip":""}),w(J,{property:"category",label:"类型",width:"100"},{default:V(z=>[w(ce,{type:z.row.category==="ReadingSimu"?"success":"warning"},{default:V(()=>[Ie(ie(Y(z.row.category)),1)]),_:2},1032,["type"])]),_:1}),w(J,{property:"create_time",label:"创建时间",width:"250"},{default:V(z=>[Ie(ie(n(_r)(z.row.create_time).format("YYYY-MM-DD HH:mm:ss")),1)]),_:1}),w(J,{property:"status",label:"数量(已完成/总数)",width:"200"}),w(J,{property:"advance",label:"状态",width:"250"},{default:V(z=>[l("div",Ww,[z.row.statusText===s.QUEUING?(f(),se(ve,{key:0,class:"queue-icon"},{default:V(()=>[w(pe)]),_:1})):X("",!0),z.row.statusText===s.STOP?(f(),se(ve,{key:1,class:"stop-icon"},{default:V(()=>[w(he)]),_:1})):X("",!0),z.row.statusText===s.PROGRESSING?(f(),se(ve,{key:2,class:"generating-icon"},{default:V(()=>[w(pe)]),_:1})):X("",!0),z.row.statusText===s.DONE?(f(),se(ve,{key:3,class:"completed-icon"},{default:V(()=>[w(Pe)]),_:1})):X("",!0),z.row.statusText===s.STOP_PART_DONE?(f(),se(ve,{key:4,class:"stop-icon"},{default:V(()=>[w(he)]),_:1})):X("",!0),z.row.statusText===s.DONE_PART_FAIL?(f(),se(ve,{key:5,class:"completed-part-fail-icon"},{default:V(()=>[w(he)]),_:1})):X("",!0),l("span",null,ie(z.row.statusText===s.QUEUING?`${z.row.statusText} 第${z.row.index}位/共${z.row.total}位`:z.row.statusText),1)])]),_:1}),w(J,{fixed:"right",label:"操作","min-width":"440"},{header:V(()=>[l("div",Zw,[K[6]||(K[6]=l("span",null,"操作",-1)),w(ve,{class:"cursor-pointer",title:"刷新列表",onClick:F},{default:V(()=>[w(_e)]),_:1})])]),default:V(z=>[w(W,{link:"",type:"primary",size:"small",onClick:Re(le=>O(z.row.id),["prevent"])},{default:V(()=>K[7]||(K[7]=[Ie(" 复制任务 ")])),_:2,__:[7]},1032,["onClick"]),w(W,{link:"",type:"primary",size:"small",onClick:Re(le=>ae(z.row.id),["prevent"]),disabled:z.row.statusText===s.STOP||z.row.statusText===s.QUEUING||z.row.statusText===s.PROGRESSING},{default:V(()=>K[8]||(K[8]=[Ie(" 查看详情 ")])),_:2,__:[8]},1032,["onClick","disabled"]),w(W,{link:"",type:"primary",size:"small",onClick:Re(le=>H(z.row.id),["prevent"]),disabled:z.row.statusText===s.STOP||z.row.statusText===s.QUEUING||z.row.statusText===s.PROGRESSING},{default:V(()=>K[9]||(K[9]=[Ie(" 一键打包 ")])),_:2,__:[9]},1032,["onClick","disabled"]),[s.QUEUING].includes(z.row.statusText)?(f(),se(W,{key:0,link:"",type:"primary",size:"small",onClick:Re(le=>re(z.row.id),["prevent"]),title:"每日最多插队10次",disabled:m.value<=0,style:{display:"inline-flex","align-items":"center",gap:"8px"}},{default:V(()=>[K[10]||(K[10]=Ie(" 优先生成 ")),w(Fe,{class:"box-item",effect:"dark",content:`剩余${m.value}次`,placement:"top"},{default:V(()=>[w(ve,{class:"info-icon"},{default:V(()=>[w(he)]),_:1})]),_:1},8,["content"])]),_:2,__:[10]},1032,["onClick","disabled"])):X("",!0),z.row.statusText===s.QUEUING||z.row.statusText===s.PROGRESSING?(f(),se(W,{key:1,link:"",type:"danger",size:"small",onClick:Re(le=>G(z.row.id),["prevent"]),style:{"margin-left":"12px"}},{default:V(()=>K[11]||(K[11]=[Ie(" 停止任务 ")])),_:2,__:[11]},1032,["onClick"])):X("",!0)]),_:1})]),_:1},8,["data"])),[[q,a.value]]),l("div",Jw,[w(be,{"current-page":r.currentPage,"onUpdate:currentPage":K[0]||(K[0]=z=>r.currentPage=z),"page-size":r.pageSize,"onUpdate:pageSize":K[1]||(K[1]=z=>r.pageSize=z),"page-sizes":[10,20,30,40],layout:"sizes, prev, pager, next",total:r.total,onSizeChange:Q,onCurrentChange:P},null,8,["current-page","page-size","total"])])]),w(ee,{modelValue:_.value,"onUpdate:modelValue":K[4]||(K[4]=z=>_.value=z),direction:v.value,size:"45%","destroy-on-close":"","before-close":j,"z-index":2e3},{default:V(()=>[l("div",null,[w(W,{type:"primary",class:"bulk-operation",onClick:L,disabled:!i.value.length},{default:V(()=>K[12]||(K[12]=[Ie(" 批量打包 ")])),_:1,__:[12]},8,["disabled"]),qe((f(),I("div",eI,[w(Ce,{modelValue:h.value,"onUpdate:modelValue":K[2]||(K[2]=z=>h.value=z),onChange:R,class:"select-all-checkbox"},{default:V(()=>K[13]||(K[13]=[Ie(" 全选 ")])),_:1,__:[13]},8,["modelValue"]),w(te,{modelValue:i.value,"onUpdate:modelValue":K[3]||(K[3]=z=>i.value=z),class:"el-checkbox-group"},{default:V(()=>[(f(!0),I(Ee,null,He(c.value,(z,le)=>(f(),se(Ce,{key:le,label:z.name,value:z.id,class:"image-item"},{default:V(()=>[l("div",tI,ie(z.name),1),l("div",oI,[l("video",{src:n(u)+z.file_url,class:"preview",controls:"",preload:"none",poster:n(u)+z.key_frame_url,onPlay:oe},null,40,sI),l("div",lI,[l("div",aI,"尺寸: "+ie(z.width)+"*"+ie(z.height),1),l("div",nI,"时长: "+ie(n(Ir)(z.duration||0)),1)])])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])])),[[q,a.value]])])]),_:1},8,["modelValue","direction"]),w(Al,{ref_key:"packQueueDrawerRef",ref:g,modelValue:x.value,"onUpdate:modelValue":K[5]||(K[5]=z=>x.value=z)},null,8,["modelValue"])],64)}}},rI=ot(iI,[["__scopeId","data-v-71df5079"]]),cI={class:"material-list"},uI=["src","poster"],dI={class:"info"},fI={class:"name"},vI={class:"material-tags-row"},pI={class:"material-info-row"},mI={key:0,class:"material-size"},gI={class:"material-duration"},hI=20,yI={__name:"videoList",props:{videoType:{type:String,default:"ReadingSimu"},source:{type:String,default:"novel"}},setup(e,{expose:o}){const t=E(!1),s=E([]),a=E([]),c="/api/",i=E(1),u=E(0),p=E(!0),y=E(0),_=E(null);Le(()=>{b()}),ut(()=>{});const v=e,$=M(()=>v.source===lt.NOVEL),S=k=>{const g=k.target;document.querySelectorAll("video").forEach(x=>{x!==g&&x.pause()})},m={ReadingSimu:"模拟",Relaxation:"解压",ShortFilm:"短剧"},r=k=>m[k]||k,T=E(""),b=async(k=1,g)=>{T.value=g;try{t.value=!0;const h=await Ur(!$.value,{name:T.value,page:k,pagesize:hI});if(h.code===0)k===1?s.value=h.data.list:s.value=[...s.value,...h.data.list],u.value=h.data.count,p.value=s.value.length<u.value,t.value=!1;else throw ge.error("获取资源失败"),new Error(h.message)}catch(h){ge.error(h),t.value=!1}};me(()=>v.videoType,k=>{k&&(i.value=1,b(i.value))});const C=async()=>{if(!a.value.length){ge.warning("请先选择要打包的视频");return}try{const k={id_list:a.value},g=await un(!$.value,k);g.code===0?(ge.success("已开始打包"),a.value=[],We.emit("packQueueUpdated"),We.emit("openPackQueueDrawer")):ge.error(g.message||"添加打包队列失败")}catch(k){ge.error("添加打包队列失败"),console.error(k)}},d=k=>{const g=k.target,{scrollTop:h,scrollHeight:x,clientHeight:R}=g;x-h<=R+10&&p.value&&!t.value&&(i.value++,b(i.value,T.value))};return o({getVideoList:b,checkedNames:a,downloadVideos:C,packCount:y}),(k,g)=>{const h=ul,x=Ls,R=an,j=gn;return f(),I(Ee,null,[qe((f(),I("div",cI,[w(R,{modelValue:a.value,"onUpdate:modelValue":g[0]||(g[0]=F=>a.value=F),class:"el-checkbox-group",onScroll:d},{default:V(()=>[(f(!0),I(Ee,null,He(s.value,(F,B)=>(f(),se(x,{key:B,label:F.name,value:F.id,class:"image-item"},{default:V(()=>{var Y;return[l("video",{src:n(c)+F.file_url,class:"preview",controls:"",preload:"none",poster:n(c)+F.key_frame_url,onPlay:S},null,40,uI),l("div",dI,[l("div",fI,ie(F.name),1),l("div",vI,[F.category?(f(),se(h,{key:0,type:F.category==="ReadingSimu"?"success":"warning"},{default:V(()=>[Ie(ie(r(F.category)),1)]),_:2},1032,["type"])):X("",!0)]),l("div",pI,[F.width&&F.height?(f(),I("div",mI," 尺寸: "+ie(F.width&&F.height?`${F.width}*${F.height}`:"--"),1)):X("",!0),l("div",gI," 时长: "+ie(F.duration?`${(Y=parseFloat(F.duration))==null?void 0:Y.toFixed(2)}s`:"0s"),1)])])]}),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])])),[[j,t.value]]),w(Al,{ref_key:"packQueueDrawerRef",ref:_},null,512)],64)}}},kI=ot(yI,[["__scopeId","data-v-c7c5fc19"]]),bI={class:"history-task-container"},CI={class:"container-header"},_I={class:"header-left"},wI={class:"view-switch"},II={class:"toggle-switch-container"},TI={class:"toggle-switch-wrapper"},xI={class:"search-box"},FI={class:"search-wrapper"},SI={__name:"index",props:{source:{type:String,default:"novel"}},setup(e){const o=E("task"),t=E(null),s=E(null),a=E(""),c=Be({videoType:"ReadingSimu"}),i=E(!1);me(i,b=>{});const u=M(()=>{var b;return o.value==="video"&&s.value?((b=s.value.checkedNames)==null?void 0:b.length)>0:!1}),p=E(0),y=E(null),_=()=>{if(!u.value){ge.warning("请先选择要打包的视频");return}s.value&&typeof s.value.downloadVideos=="function"?(s.value.downloadVideos(),i.value?y.value.fetchPackQueue():y.value.openDrawer()):ge.error("下载功能不可用，请刷新页面重试")},v=Be({page:1,pageSize:99}),$=async()=>{try{const b=await dl(v);b.code===0&&(p.value=(b.data.list||[]).length)}catch(b){console.error("获取打包队列数量失败:",b)}},S=()=>{$()},m=()=>{$(),i.value?i.value=!1:y.value.openDrawer()},r=()=>{a.value="",T()};Le(()=>{S(),We.on("openPackQueueDrawer",()=>{i.value?y.value.fetchPackQueue():y.value.openDrawer()}),We.on("packQueueUpdated",()=>{$()})}),ut(()=>{We.off("openPackQueueDrawer"),We.off("packQueueUpdated")});const T=()=>{o.value==="task"?t.value.getTaskList(!0,a.value,1,20):s.value.getVideoList(1,a.value)};return me(o,()=>{a.value=""}),(b,C)=>{const d=xw,k=$o,g=Tr;return f(),I("div",bI,[l("div",CI,[l("div",_I,[l("div",wI,[l("div",II,[l("div",TI,[l("div",{class:N(["toggle-switch",{"slide-right":o.value==="video"}])},[l("div",{class:N(["switch-option",{active:o.value==="task"}]),onClick:C[0]||(C[0]=h=>o.value="task")},C[4]||(C[4]=[l("i",{class:"el-icon-document"},null,-1),Ie(" 任务列表 ")]),2),l("div",{class:N(["switch-option",{active:o.value==="video"}]),onClick:C[1]||(C[1]=h=>o.value="video")},C[5]||(C[5]=[l("i",{class:"el-icon-video-camera"},null,-1),Ie(" 视频列表 ")]),2),l("div",{class:N(["slider",{"slide-right":o.value==="video"}])},null,2)],2)])])]),o.value==="video"?(f(),I("button",{key:0,class:N(["download-button",{disabled:!u.value}]),onClick:_},C[6]||(C[6]=[l("i",{class:"el-icon-download"},null,-1),Ie(" 批量打包 ")]),2)):X("",!0)]),l("div",xI,[l("div",FI,[C[7]||(C[7]=l("i",{class:"el-icon-search search-icon"},null,-1)),qe(l("input",{type:"text",class:"custom-search-input","onUpdate:modelValue":C[2]||(C[2]=h=>a.value=h),placeholder:"搜索关键字...",onInput:T},null,544),[[ur,a.value]]),qe(l("i",{class:"el-icon-close clear-icon",onClick:r},null,512),[[pt,a.value]])])])]),o.value==="task"?(f(),se(rI,{key:0,videoType:c.videoType,ref_key:"taskListRef",ref:t,source:e.source},null,8,["videoType","source"])):(f(),se(kI,{key:1,videoType:c.videoType,ref_key:"videoListRef",ref:s,source:e.source},null,8,["videoType","source"])),l("div",{class:"global-pack-queue-icon",onClick:m,title:"打包队列"},[w(g,{value:p.value,hidden:p.value<=0,max:99},{default:V(()=>[w(k,null,{default:V(()=>[w(d)]),_:1})]),_:1},8,["value","hidden"])]),w(Al,{ref_key:"globalPackQueueDrawerRef",ref:y,modelValue:i.value,"onUpdate:modelValue":C[3]||(C[3]=h=>i.value=h)},null,8,["modelValue"])])}}},EI=ot(SI,[["__scopeId","data-v-f491dab0"]]),$I={class:"batch-novels-container"},RI={class:"tabs-scroll-container"},PI={class:"custom-tabs"},OI=["onClick"],VI=["onMouseenter"],LI=["onClick"],BI={__name:"index",setup(e){const o=dr(),t=E("novel"),s=M(()=>o.currentRoute.value.name=="batchShortPlay"?rc.value:ic.value);me(()=>o.currentRoute.value.name,T=>{T==="batchShortPlay"?t.value="shortPlay":t.value="novel"},{immediate:!0});const a=so(),c=E("historyTask"),i=E(!1),u=E({}),p=E([]);let y=null;const _=T=>{c.value=T,a.setCheckedData({}),i.value=!1},v=(T,b)=>{y&&(clearTimeout(y),y=null);const C=T.currentTarget.getBoundingClientRect();u.value={position:"fixed",top:`${C.bottom+8}px`,left:`${C.left}px`,minWidth:`${C.width}px`},p.value=b.children,i.value=!0},$=()=>{y=setTimeout(()=>{i.value=!1},100)},S=()=>{y&&(clearTimeout(y),y=null)},m=()=>{y=setTimeout(()=>{i.value=!1},100)},r=()=>{c.value="historyTask"};return Le(()=>{We.on("jumpToHistoryTask",r),We.on("jumpToNovelTask",T=>{T.category==="ReadingSimu"?c.value="createTask":T.category==="Relaxation"&&(c.value="createVideo")}),We.on("jumpToShortPlayTask",()=>{t.value="shortPlay",c.value="createShortPlayTask"})}),(T,b)=>(f(),I(Ee,null,[l("div",$I,[l("div",RI,[l("div",PI,[(f(!0),I(Ee,null,He(s.value,(C,d)=>(f(),I("div",{key:d,class:"tab-item-container"},[C.children?(f(),I("div",{key:1,class:"tab-item-dropdown",onMouseenter:k=>v(k,C),onMouseleave:$},[l("div",{class:N(["tab-item",{active:C.children&&C.children.some(k=>k.value===c.value)}])},ie(C.label),3)],40,VI)):(f(),I("div",{key:0,class:N(["tab-item",{active:c.value===C.value}]),onClick:k=>_(C.value)},ie(C.label),11,OI))]))),128))])]),(f(),se(fr,null,[c.value==="createTask"?(f(),se(za,{key:0,source:t.value},null,8,["source"])):c.value==="createShortPlayTask"?(f(),se(za,{key:1,source:t.value},null,8,["source"])):c.value==="createVideo"?(f(),se(ww,{key:2})):X("",!0)],1024)),c.value==="historyTask"?(f(),se(EI,{key:0,source:t.value},null,8,["source"])):["createTask","createVideo","historyTask","createShortPlayTask"].includes(c.value)?X("",!0):(f(),se(n(Ci),{tabType:c.value,key:c.value,fromSelf:!0},null,8,["tabType"]))]),(f(),se(Ga,{to:"body"},[i.value?(f(),I("div",{key:0,class:"dropdown-menu",style:ye(u.value),onMouseenter:S,onMouseleave:m},[(f(!0),I(Ee,null,He(p.value,(C,d)=>(f(),I("div",{key:d,class:N(["dropdown-item",{active:c.value===C.value}]),onClick:k=>_(C.value)},ie(C.label),11,LI))),128))],36)):X("",!0)]))],64))}},JI=ot(BI,[["__scopeId","data-v-fe0222c7"]]);export{JI as default};
//# sourceMappingURL=index-BIoFVMf2.js.map

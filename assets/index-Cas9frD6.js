import{_ as W,c as ye,h as ge,a9 as ee,a7 as te,s as ae,aa as fe,E as A,i as ne,j as oe,a as se,ab as le,ac as re,ad as xe,ae as he,af as be,a8 as we,a5 as De,ag as ke,ah as Te}from"./index-CPV7-EPL.js";import{v as ce}from"./el-loading-BYHcIDqY.js";import{E as R}from"./el-card-DF55Avkz.js";import{E as de}from"./el-date-picker-DhAwYbcA.js";import{E as ie}from"./el-divider-B_5bdhNe.js";import{E as Ce}from"./el-pagination-CP-KUehN.js";import{r as f,a4 as H,A as z,P as h,s as t,Q as D,N as o,q as c,X as x,M as $,S as k,aM as V,u as N,O as F,c as Q,L as I,ah as ue,a1 as X,Y as Ee}from"./vue-vendor-BgjGt3mC.js";import{a as $e,E as ze}from"./el-tab-pane-Dua6Jurc.js";/* empty css                          */import"./axios-xsH4HHeE.js";import"./lodash-BmZg10rb.js";import"./jszip-C7-yN4-L.js";import"./remark-CBsncvHK.js";import"./quill-BeGMbSWh.js";const Ve=[{id:1,name:"整体数据"},{id:2,name:"个人数据"}],M=[{id:1,name:"智能编导（脚本）",icon:"📝",description:"AI智能脚本创作工具",dataType:{1:[{type:1,name:"使用人数"},{type:2,name:"生成脚本总数"}],2:[{name:"智能编导-创建任务数",prop:"znbd_creat_count"},{prop:"znbd_made_count",name:"智能编导-生成条数"},{prop:"znbd_copy_count",name:"智能编导-复制数"}]}},{id:2,name:"图片处理",icon:"🖼️",description:"图片快速修复处理",dataType:{1:[{type:1,name:"使用人数"},{type:2,name:"批量抠图总数"},{type:3,name:"修改尺寸总数"}],2:[{prop:"tpcl_coutu_count",name:"批量抠图总数"},{prop:"tpcl_size_count",name:"修改尺寸总数"}]}},{id:3,name:"语音合成",icon:"🎤",description:"智能语音合成与复刻",dataType:{1:[{type:1,name:"使用人数"},{type:2,name:"合成总条数"},{type:3,name:"复刻总条数"}],2:[{prop:"yyhc_count",name:"语音合成-总条数"},{prop:"yyhc_task_count",name:"语音复刻任务总条数"}]}},{id:4,name:"小说快剪",description:"小说视频快速制作",icon:"📚",dataType:{1:[{type:1,name:"使用人数"},{type:2,name:"模拟阅读生成总条数"},{type:3,name:"解压视频生成总条数"}],2:[{prop:"xssp_read_count",name:"模拟阅读生成总条数"},{prop:"xssp_video_count",name:"解压视频生成总条数"}]}},{id:5,name:"视频处理",icon:"⚡",description:"视频快速编辑处理",dataType:{1:[{type:1,name:"处理视频总数"}],2:[{prop:"spcl_count",name:"处理视频总数"}]}},{id:6,name:"图文智绘",icon:"🎨",description:"AI图文智能生成",dataType:{1:[{type:1,name:"使用人数"},{type:2,name:"下载图片总数"},{type:3,name:"AI底图加模板任务总条数"},{type:4,name:"纯AI图任务任务总条数"},{type:5,name:"自定义底图任务总条数"},{type:6,name:"搜索底图任务总条数"}],2:[{prop:"twzh_download_count",name:"下载图片总数"},{prop:"twzh_aiTemplate_count",name:"AI底图加模板任务总条数"},{prop:"twzh_ai_count",name:"纯AI图任务任务总条数"},{prop:"twzh_custom_count",name:"自定义底图任务总条数"},{prop:"twzh_search_count",name:"搜索底图任务总条数"}]}},{id:7,name:"短剧快剪",icon:"🎬",description:"短剧视频快速制作",dataType:{1:[{type:1,name:"使用人数"},{type:2,name:"生产总条数"}],2:[{prop:"djkj_create_count",name:"生产总条数"}]}},{id:8,name:"智能混剪",icon:"🎞️",description:"AI智能视频混剪",dataType:{1:[{type:1,name:"使用人数"},{type:2,name:"生产总条数"}],2:[{prop:"znhj_create_count",name:"生产总条数"}]}}],K={page:1,pagesize:15},Le={class:"mb-[10px] text-[18px] font-[600] text-[#2c3e50]"},Ye={key:0,class:"overview-stat-value"},Ae={__name:"TableData",props:{data:{type:Object,required:!0},name:{type:String,required:!0}},emits:["refresh"],setup(L,{emit:v}){const r=L,u=v,n=f([]),p=f([]),b=H({...K});r.data&&r.data.columns&&(p.value=r.data.columns);const w=_=>{let i="desc",y=_.prop;_.order==="ascending"?i="asc":_.order==="descending"?i="desc":(i="",y="");let g={order_method:i,order_event:y};b.page=1,u("refresh",{...g,...b})};return z(()=>r.data,_=>{n.value=[],_&&_.columns&&(p.value=_.columns),n.value=_.data.map(i=>{const y={};return i.forEach(g=>{y[g.event_name]=g.data}),y})}),z(b,_=>{u("refresh",_)}),(_,i)=>{const y=ge,g=ye,j=Ce,U=te,q=R;return t(),h(q,null,{default:D(()=>[o("div",Le,x(L.name)+" - 用户数据",1),n.value&&n.value.length?(t(),c($,{key:0},[k(g,{data:n.value,style:{width:"100%","min-height":"300px"},"max-height":"600px",onSortChange:w},{default:D(()=>[(t(!0),c($,null,V(p.value,m=>(t(),h(y,{key:m.event_name,prop:m.event_name,label:m.event_show_name,"sort-orders":["descending","ascending",null],sortable:m.event_name==="user_name"?!1:"custom"},{default:D(T=>[m.event_unit==="秒"?(t(),c("span",Ye,x(N(ee)(T.row[m.event_name]||0)),1)):(t(),c("span",{key:1,class:F({"overview-stat-value":m.event_name!=="user_name"})},x(T.row[m.event_name]||0),3))]),_:2},1032,["prop","label","sortable"]))),128))]),_:1},8,["data"]),k(j,{class:"mt-3 justify-end","page-size":b.pagesize,"onUpdate:pageSize":i[0]||(i[0]=m=>b.pagesize=m),"current-page":b.page,"onUpdate:currentPage":i[1]||(i[1]=m=>b.page=m),"page-sizes":[15,50,100,150],background:"",layout:"sizes, prev, pager, next",total:L.data.count},null,8,["page-size","current-page","total"])],64)):(t(),h(U,{key:1,description:"暂无数据"}))]),_:1})}}},pe=W(Ae,[["__scopeId","data-v-4f4c5590"]]),Pe={class:"product-tabs"},Se=["onClick"],Me={class:"product-tab-icon mb-[8px] text-[24px]"},je={class:"product-tab-name font-semibold"},Ie={class:"flex gap-[20px] text-[14px] items-center"},Ne={class:"flex gap-[12px] items-center"},Ue={class:"flex gap-[12px] items-center"},qe={class:"flex items-center mb-[20px]"},Be={class:"overview-icon size-[48px] rounded-[12px] flex items-center justify-center text-[24px] mr-[16px]"},Oe={class:"overview-info"},Fe={class:"text-[20px] mb-[4px] text-[#2c3e50]"},We={class:"text-[#7f8c8d]"},Re={class:"overview-stats"},Ge={class:"overview-stat-value text-[24px] mb-[4px]"},Je={key:0},Qe={key:1},Xe={class:"overview-stat-label text-[12px] text-[#7f8c8d] font-[500]"},He={__name:"newStyle",setup(L){const v=f(),r=f([]),u=Q(()=>r.value.find(l=>l.group_name===v.value)),n=ae(new Date).format("YYYY-MM-DD"),p=H({category:[],user:"",date:[n,n]}),b=f([]),w=[{text:"今天",value:()=>[new Date,new Date]},{text:"上周",value:()=>{const l=new Date,a=new Date;return a.setTime(a.getTime()-3600*1e3*24*7),[a,l]}},{text:"上月",value:()=>{const l=new Date,a=new Date;return a.setTime(a.getTime()-3600*1e3*24*30),[a,l]}}],_=f(null),i=f([]),y=f(!1),g=f(!1),j=l=>{if(y.value||g.value){A.warning("请勿频繁操作！");return}v.value=l},U=l=>l.getTime()>Date.now(),q=l=>{m(),T(l)},m=()=>{y.value=!0,he({start_date:p.date[0]||n,end_date:p.date[1]||n,group_list:v.value}).then(l=>{if(l.code===0){const a=l.data.list||[];_.value=a[0]||{}}else A.error(l.message||"获取数据失败")}).finally(()=>{y.value=!1})},T=(l=K)=>{g.value=!0,xe({start_date:p.date[0]||n,end_date:p.date[1]||n,group_list:v.value,open_id:p.user,...l}).then(a=>{if(a.code===0){const s=a.data||{};i.value=s}else A.error(a.message||"获取数据失败")}).finally(()=>{g.value=!1})},Y=()=>{re({}).then(l=>{if(l.code===0){const a=l.data.list||[];b.value=a}else A.error(l.message||"获取人员数据失败")})};return fe().then(l=>{if(l.code===0){const a=l.data.list||[];a.forEach((s,e)=>{const C=M.find(P=>P.name===s.group_show_name);s.id=e+1,C&&(s.description=C.description,s.icon=C.icon)}),a.length&&(v.value=a[0].group_name),r.value=a}else A.error(l.message||"获取分组数据失败")}),Y(),z(()=>p.date,()=>{m(),T()}),z(()=>p.user,()=>{m(),T()}),z(v,()=>{m(),T()}),(l,a)=>{const s=ie,e=oe,C=ne,P=de,G=se,B=R,O=ce;return t(),c($,null,[k(B,null,{default:D(()=>[o("div",Pe,[(t(!0),c($,null,V(r.value,(d,J)=>(t(),c("div",{key:d.group_name,class:F(["product-tab","cursor-pointer","text-center",`product-${J+1}`,{active:d.group_name===v.value}]),onClick:Z=>j(d.group_name)},[o("span",Me,x(d.icon||"⚡"),1),o("div",je,x(d.group_show_name),1)],10,Se))),128))]),k(s,{"border-style":"dashed"}),o("div",Ie,[a[5]||(a[5]=o("span",null,"其他选项:",-1)),o("div",Ne,[a[2]||(a[2]=o("span",null,"用户:",-1)),k(C,{modelValue:p.user,"onUpdate:modelValue":a[0]||(a[0]=d=>p.user=d),placeholder:"请选择用户",class:"w-[200px]",clearable:"",filterable:""},{default:D(()=>[(t(!0),c($,null,V(b.value,d=>(t(),h(e,{key:d.open_id,label:d.name,value:d.open_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),o("div",Ue,[a[3]||(a[3]=o("span",null,"时间范围:",-1)),k(P,{modelValue:p.date,"onUpdate:modelValue":a[1]||(a[1]=d=>p.date=d),type:"daterange","unlink-panels":"","start-placeholder":"开始日期","end-placeholder":"截止日期",shortcuts:w,"value-format":"YYYY-MM-DD",clearable:!1,disabledDate:U},null,8,["modelValue"])]),k(G,{type:"primary",class:"ml-auto",onClick:q},{default:D(()=>a[4]||(a[4]=[ue("刷新")])),_:1,__:[4]})])]),_:1}),u.value?(t(),c($,{key:0},[_.value?X((t(),h(B,{key:0,class:F(["mt-3","product-overview",`product-${u.value.id}`])},{default:D(()=>[o("div",qe,[o("div",Be,x(u.value.icon||"⚡"),1),o("div",Oe,[o("h2",Fe,x(u.value.group_show_name),1),o("p",We,x(u.value.description),1)])]),o("div",Re,[(t(!0),c($,null,V(_.value.data,d=>(t(),c("div",{key:d.type,class:"overview-stat text-center rounded-[12px] bg-[#f8f9fa] p-[16px]"},[o("div",Ge,[d.event_unit==="秒"?(t(),c("span",Je,x(N(ee)(d.count)),1)):(t(),c("span",Qe,x(N(le)(d.count)),1))]),o("div",Xe,x(d.event_show_name),1)]))),128))])]),_:1},8,["class"])),[[O,y.value]]):I("",!0),X(k(pe,{data:i.value,name:u.value.group_show_name,onRefresh:T,class:F([`product-${u.value.id}`,"mt-3"])},null,8,["data","name","class"]),[[O,g.value]])],64)):I("",!0)],64)}}},Ke=W(He,[["__scopeId","data-v-5f3a8ac1"]]),Ze={key:0,class:"categoryTypeCard"},et={class:"card-box flex gap-[10px]"},tt={class:"icon"},at={class:"content flex-auto overflow-hidden"},nt={class:"text-[16px] font-semibold truncate mt-[7px]"},ot={class:"category-row text-gray-500 mt-[10px]"},st={key:0,class:"text-[24px] text-black break-all"},lt={__name:"CategoryTypeCard",props:{categoryTypeList:{type:Array,required:!0},data:{required:!0}},setup(L){const v=["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],r=L;return(u,n)=>{const p=R,b=te;return r.categoryTypeList&&r.categoryTypeList.length?(t(),c("div",Ze,[(t(!0),c($,null,V(r.categoryTypeList,(w,_)=>(t(),h(p,{class:"item-card cursor-pointer",key:w.id},{default:D(()=>[o("div",et,[o("div",tt,[o("div",{class:"icon-text",style:Ee({backgroundColor:v[_%r.categoryTypeList.length]})},x(w.name.slice(0,2)),5)]),o("div",at,[o("div",nt,x(w.name),1),o("div",ot,[(t(!0),c($,null,V(w.dataType[1],(i,y)=>(t(),c("div",{class:"content-item mt-1 text-[14px]",key:i.id},[o("div",null,x(i.name),1),r.data&&r.data[w.id]?(t(),c("div",st,x(N(le)(r.data[w.id][`data${y+1}`]||0)),1)):I("",!0)]))),128))])])])]),_:2},1024))),128))])):(t(),h(b,{key:1,description:"暂无数据"}))}}},rt=W(lt,[["__scopeId","data-v-e7bb97f3"]]),ct={class:"flex gap-[20px] text-[14px] items-center"},dt={class:"flex gap-[12px]"},it={class:"flex gap-[20px] text-[14px] items-center"},ut={key:0,class:"flex gap-[12px] items-center"},pt={class:"flex gap-[12px] items-center"},_t={__name:"oldStyle",setup(L){var a;const v=be(),r=f(1),u=ae(new Date).format("YYYY-MM-DD"),n=H({category:[],user:((a=v==null?void 0:v.userInfo)==null?void 0:a.open_id)||"",date:[u,u]}),p=Q(()=>n.category.length===M.length),b=f(),w=f([]),_=[{text:"今天",value:()=>[new Date,new Date]},{text:"上周",value:()=>{const s=new Date,e=new Date;return e.setTime(e.getTime()-3600*1e3*24*7),[e,s]}},{text:"上月",value:()=>{const s=new Date,e=new Date;return e.setTime(e.getTime()-3600*1e3*24*30),[e,s]}}],i=f(null),y=f([]),g=f(!1),j=Q(()=>p.value?[...M]:n.category&&n.category.length?[...M.filter(s=>n.category.includes(s.id))]:[...M]),U=s=>s.getTime()>Date.now(),q=()=>{b.value=null},m=s=>{r.value===1?T():Y(s)},T=()=>{g.value=!0,ke({start_date:n.date[0]||u,end_date:n.date[1]||u}).then(s=>{if(s.code===0){const e=s.data.list[0]||{};i.value={1:e.w_data,2:e.i_data,3:e.t_data,4:e.n_data,5:e.v_data,6:e.image_generator_data,7:e.sf_data,8:e.jd_aic_data}}else A.error(s.message||"获取数据失败")}).finally(()=>{g.value=!1})},Y=(s=K)=>{g.value=!0;const e=n.category&&n.category.length?n.category:M.map(C=>C.id);Te({start_date:n.date[0]||u,end_date:n.date[1]||u,type_list:JSON.stringify(e),open_id:n.user,...s}).then(C=>{if(C.code===0){const P=C.data.list||[];y.value=P}else A.error(C.message||"获取数据失败")}).finally(()=>{g.value=!1})},l=()=>{re({}).then(s=>{if(s.code===0){const e=s.data.list||[];w.value=e}else A.error(s.message||"获取人员数据失败")})};return T(),l(),z(()=>n.date,()=>{r.value===1?T():r.value===2&&Y()}),z(()=>n.user,()=>{Y()}),z(()=>n.category,()=>{r.value===2&&Y()}),z(r,()=>{r.value===1?T():r.value===2&&Y()}),(s,e)=>{const C=De,P=we,G=ie,B=oe,O=ne,d=de,J=se,Z=R,_e=$e,me=ze,ve=ce;return X((t(),h(me,{modelValue:r.value,"onUpdate:modelValue":e[3]||(e[3]=S=>r.value=S),onTabClick:q},{default:D(()=>[(t(!0),c($,null,V(N(Ve),S=>(t(),h(_e,{key:S.id,label:S.name,name:S.id},{default:D(()=>[k(Z,{class:"mt-3 ml-2 mr-2"},{default:D(()=>[o("div",ct,[e[4]||(e[4]=o("span",null,"所属类目:",-1)),o("div",dt,[k(P,{modelValue:n.category,"onUpdate:modelValue":e[0]||(e[0]=E=>n.category=E)},{default:D(()=>[(t(!0),c($,null,V(N(M),E=>(t(),h(C,{size:"small",key:E.id,value:E.id,label:E.name,border:""},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])])]),k(G,{"border-style":"dashed"}),o("div",it,[e[8]||(e[8]=o("span",null,"其他选项:",-1)),r.value===2?(t(),c("div",ut,[e[5]||(e[5]=o("span",null,"用户:",-1)),k(O,{modelValue:n.user,"onUpdate:modelValue":e[1]||(e[1]=E=>n.user=E),placeholder:"请选择用户",class:"w-[200px]",clearable:"",filterable:""},{default:D(()=>[(t(!0),c($,null,V(w.value,E=>(t(),h(B,{key:E.open_id,label:E.name,value:E.open_id},null,8,["label","value"]))),128))]),_:2},1032,["modelValue"])])):I("",!0),o("div",pt,[e[6]||(e[6]=o("span",null,"时间范围:",-1)),k(d,{modelValue:n.date,"onUpdate:modelValue":e[2]||(e[2]=E=>n.date=E),type:"daterange","unlink-panels":"","start-placeholder":"开始日期","end-placeholder":"截止日期",shortcuts:_,"value-format":"YYYY-MM-DD",clearable:!1,disabledDate:U},null,8,["modelValue"])]),k(J,{type:"primary",class:"ml-auto",onClick:m},{default:D(()=>e[7]||(e[7]=[ue("刷新")])),_:1,__:[7]})])]),_:2},1024),S.id===1?(t(),h(rt,{key:0,categoryTypeList:j.value,data:i.value,class:"mt-3 ml-2 mr-2"},null,8,["categoryTypeList","data"])):I("",!0),S.id===2?(t(),h(pe,{key:1,categoryTypeList:j.value,data:y.value,count:w.value.length,onRefresh:Y,class:"mt-3 ml-2 mr-2"},null,8,["categoryTypeList","data","count"])):I("",!0)]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])),[[ve,g.value]])}}},mt=W(_t,[["__scopeId","data-v-16710ce1"]]),vt={class:"w-full h-full p-10 overflow-y-auto relative text-[14px]"},Vt={__name:"index",setup(L){const v=f(!0);return(r,u)=>(t(),c("div",vt,[v.value?(t(),h(Ke,{key:0})):(t(),h(mt,{key:1}))]))}};export{Vt as default};
//# sourceMappingURL=index-Cas9frD6.js.map
